import{Q as f}from"./QImg-D78FZSF8.js";import{_ as b,c as w,o as h,w as a,a as s,b as r,af as x,Q as y,e as d,a7 as v,ab as c,ae as g,d as m,aZ as Q,f as u,t as V}from"./index-C7LII3He.js";import{Q as k}from"./QSpace-QUejsFm0.js";import{Q as q}from"./QForm-CxqEXIw4.js";import{Q as C}from"./QPage-DDRRcRUa.js";import{Q as I,a as P}from"./QLayout-Cw7S_Y1_.js";import"./QResizeObserver-B5KVCFjh.js";const S={name:"LoginTorneoYa",data(){return{username:"",password:"",showPassword:!1,rememberMe:!1,loading:!1}},computed:{year(){return new Date().getFullYear()}},methods:{login(){this.loading=!0,this.$axios.post("/login",{username:this.username,password:this.password}).then(l=>{const{user:e,token:n}=l.data;this.$axios.defaults.headers.common.Authorization=`Bearer ${n}`,this.$store&&(this.$store.isLogged=!0,this.$store.user=e,this.$store.permissions=(e.permissions||[]).map(p=>p.name)),localStorage.setItem("tokenTorneoya",n),localStorage.setItem("user",JSON.stringify(e)),this.$alert?.success?.("Bienvenido",e?.name||""),this.$router.push("/")}).catch(l=>{const e=l?.response?.data?.message||"Error de autenticacion";this.$alert?.error?.(e,"Error")}).finally(()=>{this.loading=!1})},forgotPassword(){this.$alert?.info?.("Funcion no disponible por ahora")}}},_={class:"row items-center q-mt-sm q-mb-md"},T={class:"text-caption text-grey-6"};function B(l,e,n,p,o,i){return h(),w(P,{class:"login-layout"},{default:a(()=>[s(I,null,{default:a(()=>[s(C,{class:"full-height"},{default:a(()=>[e[8]||(e[8]=r("div",{class:"login-bg-overlay"},null,-1)),s(q,{onSubmit:x(i.login,["prevent"]),class:"login-wrap"},{default:a(()=>[s(y,{flat:"",bordered:"",class:"login-card"},{default:a(()=>[s(d,{class:"q-pt-lg text-center"},{default:a(()=>[s(f,{src:"logo.png",width:"110px",class:"q-mb-sm",ratio:"1",fit:"contain"}),e[5]||(e[5]=r("div",{class:"text-subtitle2 text-grey-7 brand-chip q-mt-sm"},[r("b",null,"Torneo Ya"),v(" - Crea tus torneos ")],-1))]),_:1}),s(c,{spaced:""}),s(d,{class:"q-pt-none"},{default:a(()=>[e[6]||(e[6]=r("div",{class:"text-h6 text-bold q-mb-xs"},"Iniciar sesion",-1)),e[7]||(e[7]=r("div",{class:"text-body2 text-grey-7 q-mb-md"}," Ingresa para administrar Torneo Ya. ",-1)),s(g,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t),outlined:"",dense:"",label:"Usuario",rules:[t=>!!t||"Ingrese su usuario"],class:"q-mb-sm"},{prepend:a(()=>[s(m,{name:"account_circle",size:"18px"})]),_:1},8,["modelValue","rules"]),s(g,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=t=>o.password=t),outlined:"",dense:"",type:o.showPassword?"text":"password",label:"Clave",rules:[t=>!!t||"Ingrese su clave"]},{prepend:a(()=>[s(m,{name:"lock",size:"18px"})]),append:a(()=>[s(m,{name:o.showPassword?"visibility":"visibility_off",size:"18px",class:"cursor-pointer",onClick:e[1]||(e[1]=t=>o.showPassword=!o.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r("div",_,[s(Q,{modelValue:o.rememberMe,"onUpdate:modelValue":e[3]||(e[3]=t=>o.rememberMe=t),label:"Recordarme",color:"primary",dense:""},null,8,["modelValue"]),s(k),s(u,{flat:"",dense:"","no-caps":"",class:"text-weight-medium link-muted",label:"Olvidaste tu clave?",onClick:i.forgotPassword},null,8,["onClick"])]),s(u,{color:"primary",label:"Entrar",class:"full-width btnLogin","no-caps":"",unelevated:"",loading:o.loading,type:"submit"},null,8,["loading"]),s(u,{outline:"",color:"primary",label:"Registrate",class:"full-width q-mt-sm","no-caps":"",onClick:e[4]||(e[4]=t=>l.$router.push("/register"))})]),_:1}),s(d,{class:"q-pt-none text-center"},{default:a(()=>[s(c,{spaced:""}),r("div",T," (c) "+V(i.year)+" Torneo Ya. Todos los derechos reservados. ",1)]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}const E=b(S,[["render",B],["__scopeId","data-v-bef46586"]]);export{E as default};
