import{Q as b}from"./QImg-DbfNce7X.js";import{_ as x,c as h,o as w,w as o,a as s,b as r,ao as y,Q as v,e as d,G as c,J as g,ag as f,d as u,aI as Q,f as m,t as k}from"./index-BCqWixgG.js";import{Q as C}from"./QSpace-D9phzHsB.js";import{Q as I}from"./QForm-BYazywih.js";import{Q as V}from"./QPage-CCnFDat8.js";import{Q as q,a as $}from"./QLayout-BuINN53W.js";const P={name:"LoginTickets",data(){return{username:"",password:"",showPassword:!1,rememberMe:!1,loading:!1}},computed:{year(){return new Date().getFullYear()}},methods:{login(){this.loading=!0,this.$axios.post("/login",{username:this.username,password:this.password}).then(l=>{const{user:e,token:n}=l.data;this.$axios.defaults.headers.common.Authorization=`Bearer ${n}`,this.$store&&(this.$store.isLogged=!0,this.$store.user=e,this.$store.permissions=(e.permissions||[]).map(p=>p.name)),localStorage.setItem("tokenTicket",n),localStorage.setItem("user",JSON.stringify(e)),this.$alert&&this.$alert.success&&this.$alert.success("Bienvenido",e?.name||""),this.$router.push("/")}).catch(l=>{const e=l?.response?.data?.message||"Error de autenticación";this.$alert&&this.$alert.error&&this.$alert.error(e,"Error")}).finally(()=>{this.loading=!1})},forgotPassword(){this.$alert&&this.$alert.info&&this.$alert.info("Función no disponible por ahora")},goRegister(){this.$alert&&this.$alert.info&&this.$alert.info("Registro no disponible por ahora")}}},S={class:"row items-center q-mt-sm q-mb-md"},R={class:"text-body2"},B={class:"text-caption text-grey-6"};function T(l,e,n,p,t,i){return w(),h($,{class:"login-layout"},{default:o(()=>[s(q,null,{default:o(()=>[s(V,{class:"full-height"},{default:o(()=>[e[11]||(e[11]=r("div",{class:"login-bg-overlay"},null,-1)),s(I,{onSubmit:y(i.login,["prevent"]),class:"login-wrap"},{default:o(()=>[s(v,{flat:"",bordered:"",class:"login-card"},{default:o(()=>[s(d,{class:"q-pt-lg text-center"},{default:o(()=>[s(b,{src:"logo.png",width:"110px",class:"q-mb-sm",ratio:"1",fit:"contain"}),e[4]||(e[4]=r("br",null,null,-1)),e[5]||(e[5]=r("div",{class:"text-subtitle2 text-grey-7 brand-chip"},[r("b",null,"Reserva Tickets"),c(" · Compra y reserva tus entradas ")],-1))]),_:1}),s(g,{spaced:""}),s(d,{class:"q-pt-none"},{default:o(()=>[e[6]||(e[6]=r("div",{class:"text-h6 text-bold q-mb-xs"},"Iniciar sesión",-1)),e[7]||(e[7]=r("div",{class:"text-body2 text-grey-7 q-mb-md"}," Compra tus tickets y gestiona tus reservas ingresando con tus credenciales. ",-1)),e[8]||(e[8]=r("div",{class:"q-mb-sm text-caption text-grey-7"},"Usuario",-1)),s(f,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=a=>t.username=a),outlined:"",dense:"",placeholder:"Ingresa tu usuario",rules:[a=>!!a||"Ingrese su usuario"],class:"q-mb-md"},{prepend:o(()=>[s(u,{name:"account_circle",size:"18px"})]),_:1},8,["modelValue","rules"]),e[9]||(e[9]=r("div",{class:"q-mb-sm text-caption text-grey-7"},"Contraseña",-1)),s(f,{modelValue:t.password,"onUpdate:modelValue":e[2]||(e[2]=a=>t.password=a),outlined:"",dense:"",type:t.showPassword?"text":"password",placeholder:"Ingresa tu contraseña",rules:[a=>!!a||"Ingrese su contraseña"]},{prepend:o(()=>[s(u,{name:"lock",size:"18px"})]),append:o(()=>[s(u,{name:t.showPassword?"visibility":"visibility_off",size:"18px",class:"cursor-pointer",onClick:e[1]||(e[1]=a=>t.showPassword=!t.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),r("div",S,[s(Q,{modelValue:t.rememberMe,"onUpdate:modelValue":e[3]||(e[3]=a=>t.rememberMe=a),label:"Recuérdame",color:"primary",dense:""},null,8,["modelValue"]),s(C),s(m,{flat:"",dense:"","no-caps":"",class:"text-weight-medium link-muted",label:"¿Olvidaste tu contraseña?",onClick:i.forgotPassword},null,8,["onClick"])]),s(m,{color:"primary",label:"Entrar",class:"full-width btnLogin","no-caps":"",unelevated:"",size:"16px",loading:t.loading,type:"submit"},null,8,["loading"])]),_:1}),s(d,{class:"q-pt-none text-center"},{default:o(()=>[r("div",R,[e[10]||(e[10]=c(" ¿Aún no tienes cuenta? ",-1)),s(m,{flat:"",dense:"","no-caps":"",class:"text-weight-medium",label:"Regístrate",onClick:i.goRegister},null,8,["onClick"])]),s(g,{spaced:""}),r("div",B," © "+k(i.year)+" Reserva Tickets. Todos los derechos reservados. ",1)]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}const E=x(P,[["render",T],["__scopeId","data-v-33969c66"]]);export{E as default};
