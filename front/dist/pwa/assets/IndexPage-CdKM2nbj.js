import{Q}from"./QSpace-BwcNFRTt.js";import{_ as S,a6 as D,c as m,o as n,w as a,b as r,a as t,f as P,a9 as g,F as x,aa as v,Q as p,e as c,ad as q,t as l,a7 as d,ab as f,a8 as w}from"./index-CyiBagph.js";import{c as k,Q as b,a as h,b as _}from"./QList-yrCZd6TL.js";import{Q as I}from"./QPage-Ds63GZrV.js";const L={name:"IndexPage",data(){return{loading:!1,totals:{},incidencias:{},deportes:[],porMes:[],recientesCampeonatos:[],recientesPartidos:[]}},computed:{metricCards(){return[{key:"campeonatos",label:"Campeonatos",value:this.totals.campeonatos||0,color:"indigo"},{key:"categorias",label:"Categorias",value:this.totals.categorias||0,color:"deep-orange"},{key:"equipos",label:"Equipos",value:this.totals.equipos||0,color:"teal"},{key:"jugadores",label:"Jugadores",value:this.totals.jugadores||0,color:"green"},{key:"partidos",label:"Partidos",value:this.totals.partidos||0,color:"blue"},{key:"mensajes",label:"Mensajes",value:this.totals.mensajes||0,color:"purple"},{key:"incidencias",label:"Incidencias",value:this.totals.incidencias||0,color:"brown"}]},deporteSeries(){return(this.deportes||[]).map(e=>e.total)},deporteChartOptions(){return{labels:(this.deportes||[]).map(e=>e.nombre),legend:{position:"bottom"},dataLabels:{enabled:!0}}},mesSeries(){return[{name:"Campeonatos",data:(this.porMes||[]).map(e=>e.value)}]},mesChartOptions(){return{xaxis:{categories:(this.porMes||[]).map(e=>e.label)},chart:{toolbar:{show:!1}},dataLabels:{enabled:!1}}}},mounted(){this.loadDashboard()},methods:{loadDashboard(){this.loading=!0,this.$axios.get("dashboard").then(e=>{this.totals=e.data?.totals||{},this.incidencias=e.data?.incidencias||{},this.deportes=e.data?.deportes||[],this.porMes=e.data?.campeonatos_por_mes||[],this.recientesCampeonatos=e.data?.recientes_campeonatos||[],this.recientesPartidos=e.data?.recientes_partidos||[]}).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo cargar dashboard")).finally(()=>{this.loading=!1})},score(e){return e.goles_local===null||e.goles_visita===null?"vs":`${e.goles_local}:${e.goles_visita}`},formatDate(e){return e?new Date(e).toLocaleDateString():"-"},formatDateTime(e){return e?new Date(e).toLocaleString():"-"},deporteNombre(e){return e?(this.deportes||[]).find(C=>C.deporte===e)?.nombre||e:"Sin deporte"}}},N={class:"row items-center q-mb-md"},j={class:"row q-col-gutter-md q-mb-md"},B={class:"text-caption text-grey-7"},M={class:"text-h6 text-weight-bold"},O={class:"row q-col-gutter-md q-mb-md"},T={class:"col-12 col-lg-6"},V={class:"col-12 col-lg-6"},z={class:"row q-col-gutter-md"},A={class:"col-12 col-lg-6"},E={class:"col-12 col-lg-6"};function F(e,o,C,U,u,i){const y=D("apexchart");return n(),m(I,{class:"q-pa-md dashboard-page"},{default:a(()=>[r("div",N,[o[0]||(o[0]=r("div",null,[r("div",{class:"text-h5 text-weight-bold"},"Inicio - Torneo Ya"),r("div",{class:"text-caption text-grey-6"},"Resumen de tu cuenta y actividad reciente")],-1)),t(Q),t(P,{color:"primary","no-caps":"",icon:"refresh",label:"Actualizar",loading:u.loading,onClick:i.loadDashboard},null,8,["loading","onClick"])]),r("div",j,[(n(!0),g(x,null,v(i.metricCards,s=>(n(),g("div",{class:"col-6 col-md-3",key:s.key},[t(p,{flat:"",bordered:"",class:"metric-card"},{default:a(()=>[t(c,{class:"row items-center q-gutter-sm"},{default:a(()=>[t(q,{color:s.color,"text-color":"white",icon:"insights"},null,8,["color"]),r("div",null,[r("div",B,l(s.label),1),r("div",M,l(s.value),1)])]),_:2},1024)]),_:2},1024)]))),128))]),r("div",O,[r("div",T,[t(p,{flat:"",bordered:""},{default:a(()=>[t(c,{class:"text-subtitle1 text-weight-bold"},{default:a(()=>[...o[1]||(o[1]=[d("Distribucion Por Deporte",-1)])]),_:1}),t(f),t(c,null,{default:a(()=>[t(y,{type:"donut",height:"300",options:i.deporteChartOptions,series:i.deporteSeries},null,8,["options","series"])]),_:1})]),_:1})]),r("div",V,[t(p,{flat:"",bordered:""},{default:a(()=>[t(c,{class:"text-subtitle1 text-weight-bold"},{default:a(()=>[...o[2]||(o[2]=[d("Campeonatos Creados (6 meses)",-1)])]),_:1}),t(f),t(c,null,{default:a(()=>[t(y,{type:"bar",height:"300",options:i.mesChartOptions,series:i.mesSeries},null,8,["options","series"])]),_:1})]),_:1})])]),r("div",z,[r("div",A,[t(p,{flat:"",bordered:""},{default:a(()=>[t(c,{class:"text-subtitle1 text-weight-bold"},{default:a(()=>[...o[3]||(o[3]=[d("Ultimos Campeonatos",-1)])]),_:1}),t(f),t(k,{separator:""},{default:a(()=>[(n(!0),g(x,null,v(u.recientesCampeonatos,s=>(n(),m(b,{key:s.id},{default:a(()=>[t(h,null,{default:a(()=>[t(_,{class:"text-weight-medium"},{default:a(()=>[d(l(s.nombre),1)]),_:2},1024),t(_,{caption:""},{default:a(()=>[d(l(s.tipo)+" | "+l(s.codigo)+" | "+l(i.deporteNombre(s.deporte))+" | "+l(i.formatDate(s.created_at)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),u.recientesCampeonatos.length?w("",!0):(n(),m(b,{key:0},{default:a(()=>[t(h,{class:"text-grey-6"},{default:a(()=>[...o[4]||(o[4]=[d("Sin registros",-1)])]),_:1})]),_:1}))]),_:1})]),_:1})]),r("div",E,[t(p,{flat:"",bordered:""},{default:a(()=>[t(c,{class:"text-subtitle1 text-weight-bold"},{default:a(()=>[...o[5]||(o[5]=[d("Ultimos Partidos",-1)])]),_:1}),t(f),t(k,{separator:""},{default:a(()=>[(n(!0),g(x,null,v(u.recientesPartidos,s=>(n(),m(b,{key:s.id},{default:a(()=>[t(h,null,{default:a(()=>[t(_,{class:"text-weight-medium"},{default:a(()=>[d(l(s.local?.nombre||"Pendiente")+" "+l(i.score(s))+" "+l(s.visita?.nombre||"Pendiente"),1)]),_:2},1024),t(_,{caption:""},{default:a(()=>[d(l(s.fase?.nombre||"-")+" | "+l(s.estado||"no_realizado")+" | "+l(s.programado_at?i.formatDateTime(s.programado_at):"Sin fecha"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),u.recientesPartidos.length?w("",!0):(n(),m(b,{key:0},{default:a(()=>[t(h,{class:"text-grey-6"},{default:a(()=>[...o[6]||(o[6]=[d("Sin registros",-1)])]),_:1})]),_:1}))]),_:1})]),_:1})])])]),_:1})}const H=S(L,[["render",F],["__scopeId","data-v-479b8a79"]]);export{H as default};
