import{Q as ae}from"./QImg-Bw2ogfsS.js";import{B as Lo,Z as Qe,au as po,g as Ue,r as ie,z as E,m as fo,l as Do,a3 as z,ac as Io,j as A,d as X,av as Eo,aw as So,ax as Mo,R as Ee,S as Re,ap as Je,Y as Ke,p as xe,ay as Uo,az as Ro,a5 as Ne,aA as No,E as Oo,G as We,H as Ce,I as He,J as Ao,K as De,L as no,P as Bo,at as zo,aB as Go,aC as Qo,V as Jo,X as Wo,a4 as Ho,_ as Xe,a9 as w,o as u,b as s,a as t,w as l,e as y,ag as Ko,c as b,a8 as j,f,a7 as h,ab as de,aj as W,Q as L,F as J,aa as Y,ad as fe,t as m,ae as P,ai as ho,ah as je,h as ce,a6 as so,aD as Xo,af as Yo}from"./index-F1tR8Zd7.js";import{Q as te}from"./format-Bg5lL9ZL.js";import{Q as K}from"./QSpace-CEfCjwtz.js";import{Q as Zo}from"./QResizeObserver-Bv-qVGI_.js";import{r as $o,b as T,Q as Se,a as ue,c as et}from"./QTable-D1f24TeV.js";import{Q as ro}from"./QBanner-DxjzrRCy.js";import{Q as bo}from"./QBadge-1g4bL-7t.js";import{c as he,Q as I,a as k,b as G}from"./QList-BUnxxmyW.js";import{g as uo,s as co}from"./touch-BjYP5sR0.js";import{c as ot}from"./position-engine-D-amRUn6.js";import{Q as Ie}from"./QFile-D-pMpfh2.js";import{Q as tt}from"./QForm-CVZ3FBcu.js";import{Q as Me}from"./QBtnDropdown-BiDUwFlm.js";import{Q as at}from"./QPage-DNKR3ZTb.js";import{C as Q}from"./ClosePopup-K8h_zmlu.js";let it=0;const lt=["click","keydown"],nt={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${it++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function st(o,e,d,v){const i=Lo(po,Qe);if(i===Qe)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Qe;const{proxy:a}=Ue(),n=ie(null),g=ie(null),r=ie(null),M=E(()=>o.disable===!0||o.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},o.ripple===!0?{}:o.ripple)),S=E(()=>i.currentModel.value===o.name),re=E(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(S.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(o.icon&&o.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(o.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(o.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),D=E(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(o.contentClass!==void 0?` ${o.contentClass}`:"")),N=E(()=>o.disable===!0||i.hasFocus.value===!0||S.value===!1&&i.hasActiveTab.value===!0?-1:o.tabindex||0);function O(F,B){if(B!==!0&&F?.qAvoidFocus!==!0&&n.value?.focus(),o.disable!==!0){i.updateModel({name:o.name}),d("click",F);return}}function Z(F){So(F,[13,32])?O(F,!0):Mo(F)!==!0&&F.keyCode>=35&&F.keyCode<=40&&F.altKey!==!0&&F.metaKey!==!0&&i.onKbdNavigate(F.keyCode,a.$el)===!0&&Ee(F),d("keydown",F)}function ne(){const F=i.tabProps.value.narrowIndicator,B=[],$=A("div",{ref:r,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});o.icon!==void 0&&B.push(A(X,{class:"q-tab__icon",name:o.icon})),o.label!==void 0&&B.push(A("div",{class:"q-tab__label"},o.label)),o.alert!==!1&&B.push(o.alertIcon!==void 0?A(X,{class:"q-tab__alert-icon",color:o.alert!==!0?o.alert:void 0,name:o.alertIcon}):A("div",{class:"q-tab__alert"+(o.alert!==!0?` text-${o.alert}`:"")})),F===!0&&B.push($);const le=[A("div",{class:"q-focus-helper",tabindex:-1,ref:n}),A("div",{class:D.value},Eo(e.default,B))];return F===!1&&le.push($),le}const me={name:E(()=>o.name),rootRef:g,tabIndicatorRef:r,routeData:v};fo(()=>{i.unregisterTab(me)}),Do(()=>{i.registerTab(me)});function ke(F,B){const $={ref:g,class:re.value,tabindex:N.value,role:"tab","aria-selected":S.value===!0?"true":"false","aria-disabled":o.disable===!0?"true":void 0,onClick:O,onKeydown:Z,...B};return z(A(F,$,ne()),[[Io,M.value]])}return{renderTab:ke,$tabs:i}}const se=Re({name:"QTab",props:nt,emits:lt,setup(o,{slots:e,emit:d}){const{renderTab:v}=st(o,e,d);return()=>v("div")}});function rt(o,e,d){const v=d===!0?["left","right"]:["top","bottom"];return`absolute-${e===!0?v[0]:v[1]}${o?` text-${o}`:""}`}const dt=["left","center","right","justify"],vo=Re({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:o=>dt.includes(o)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(o,{slots:e,emit:d}){const{proxy:v}=Ue(),{$q:i}=v,{registerTick:a}=Je(),{registerTick:n}=Je(),{registerTick:g}=Je(),{registerTimeout:r,removeTimeout:M}=Ke(),{registerTimeout:S,removeTimeout:re}=Ke(),D=ie(null),N=ie(null),O=ie(o.modelValue),Z=ie(!1),ne=ie(!0),me=ie(!1),ke=ie(!1),F=[],B=ie(0),$=ie(!1);let le=null,ge=null,ee;const Pe=E(()=>({activeClass:o.activeClass,activeColor:o.activeColor,activeBgColor:o.activeBgColor,indicatorClass:rt(o.indicatorColor,o.switchIndicator,o.vertical),narrowIndicator:o.narrowIndicator,inlineLabel:o.inlineLabel,noCaps:o.noCaps})),Ve=E(()=>{const c=B.value,p=O.value;for(let q=0;q<c;q++)if(F[q].name.value===p)return!0;return!1}),Oe=E(()=>`q-tabs__content--align-${Z.value===!0?"left":ke.value===!0?"justify":o.align}`),Ae=E(()=>`q-tabs row no-wrap items-center q-tabs--${Z.value===!0?"":"not-"}scrollable q-tabs--${o.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${o.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${o.mobileArrows===!0?"":"out"}-arrows`+(o.dense===!0?" q-tabs--dense":"")+(o.shrink===!0?" col-shrink":"")+(o.stretch===!0?" self-stretch":"")),Be=E(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Oe.value+(o.contentClass!==void 0?` ${o.contentClass}`:"")),_=E(()=>o.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),V=E(()=>o.vertical!==!0&&i.lang.rtl===!0),oe=E(()=>$o===!1&&V.value===!0);xe(V,ye),xe(()=>o.modelValue,c=>{be({name:c,setCurrent:!0,skipEmit:!0})}),xe(()=>o.outsideArrows,Te);function be({name:c,setCurrent:p,skipEmit:q}){O.value!==c&&(q!==!0&&o["onUpdate:modelValue"]!==void 0&&d("update:modelValue",c),(p===!0||o["onUpdate:modelValue"]===void 0)&&(ko(O.value,c),O.value=c))}function Te(){a(()=>{D.value&&Ye({width:D.value.offsetWidth,height:D.value.offsetHeight})})}function Ye(c){if(_.value===void 0||N.value===null)return;const p=c[_.value.container],q=Math.min(N.value[_.value.scroll],Array.prototype.reduce.call(N.value.children,(R,x)=>R+(x[_.value.content]||0),0)),U=p>0&&q>p;Z.value=U,U===!0&&n(ye),ke.value=p<parseInt(o.breakpoint,10)}function ko(c,p){const q=c!=null&&c!==""?F.find(R=>R.name.value===c):null,U=p!=null&&p!==""?F.find(R=>R.name.value===p):null;if(Le===!0)Le=!1;else if(q&&U){const R=q.tabIndicatorRef.value,x=U.tabIndicatorRef.value;le!==null&&(clearTimeout(le),le=null),R.style.transition="none",R.style.transform="none",x.style.transition="none",x.style.transform="none";const C=R.getBoundingClientRect(),H=x.getBoundingClientRect();x.style.transform=o.vertical===!0?`translate3d(0,${C.top-H.top}px,0) scale3d(1,${H.height?C.height/H.height:1},1)`:`translate3d(${C.left-H.left}px,0,0) scale3d(${H.width?C.width/H.width:1},1,1)`,g(()=>{le=setTimeout(()=>{le=null,x.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",x.style.transform="none"},70)})}U&&Z.value===!0&&qe(U.rootRef.value)}function qe(c){const{left:p,width:q,top:U,height:R}=N.value.getBoundingClientRect(),x=c.getBoundingClientRect();let C=o.vertical===!0?x.top-U:x.left-p;if(C<0){N.value[o.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(C),ye();return}C+=o.vertical===!0?x.height-R:x.width-q,C>0&&(N.value[o.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(C),ye())}function ye(){const c=N.value;if(c===null)return;const p=c.getBoundingClientRect(),q=o.vertical===!0?c.scrollTop:Math.abs(c.scrollLeft);V.value===!0?(ne.value=Math.ceil(q+p.width)<c.scrollWidth-1,me.value=q>0):(ne.value=q>0,me.value=o.vertical===!0?Math.ceil(q+p.height)<c.scrollHeight:Math.ceil(q+p.width)<c.scrollWidth)}function Ze(c){ge!==null&&clearInterval(ge),ge=setInterval(()=>{Fo(c)===!0&&ve()},5)}function $e(){Ze(oe.value===!0?Number.MAX_SAFE_INTEGER:0)}function eo(){Ze(oe.value===!0?0:Number.MAX_SAFE_INTEGER)}function ve(){ge!==null&&(clearInterval(ge),ge=null)}function qo(c,p){const q=Array.prototype.filter.call(N.value.children,H=>H===p||H.matches&&H.matches(".q-tab.q-focusable")===!0),U=q.length;if(U===0)return;if(c===36)return qe(q[0]),q[0].focus(),!0;if(c===35)return qe(q[U-1]),q[U-1].focus(),!0;const R=c===(o.vertical===!0?38:37),x=c===(o.vertical===!0?40:39),C=R===!0?-1:x===!0?1:void 0;if(C!==void 0){const H=V.value===!0?-1:1,pe=q.indexOf(p)+C*H;return pe>=0&&pe<U&&(qe(q[pe]),q[pe].focus({preventScroll:!0})),!0}}const yo=E(()=>oe.value===!0?{get:c=>Math.abs(c.scrollLeft),set:(c,p)=>{c.scrollLeft=-p}}:o.vertical===!0?{get:c=>c.scrollTop,set:(c,p)=>{c.scrollTop=p}}:{get:c=>c.scrollLeft,set:(c,p)=>{c.scrollLeft=p}});function Fo(c){const p=N.value,{get:q,set:U}=yo.value;let R=!1,x=q(p);const C=c<x?-1:1;return x+=C*5,x<0?(R=!0,x=0):(C===-1&&x<=c||C===1&&x>=c)&&(R=!0,x=c),U(p,x),ye(),R}function oo(c,p){for(const q in c)if(c[q]!==p[q])return!1;return!0}function wo(){let c=null,p={matchedLen:0,queryDiff:9999,hrefLen:0};const q=F.filter(C=>C.routeData?.hasRouterLink.value===!0),{hash:U,query:R}=v.$route,x=Object.keys(R).length;for(const C of q){const H=C.routeData.exact.value===!0;if(C.routeData[H===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:pe,query:ze,matched:Vo,href:To}=C.routeData.resolvedLink.value,Ge=Object.keys(ze).length;if(H===!0){if(pe!==U||Ge!==x||oo(R,ze)===!1)continue;c=C.name.value;break}if(pe!==""&&pe!==U||Ge!==0&&oo(ze,R)===!1)continue;const _e={matchedLen:Vo.length,queryDiff:x-Ge,hrefLen:To.length-pe.length};if(_e.matchedLen>p.matchedLen){c=C.name.value,p=_e;continue}else if(_e.matchedLen!==p.matchedLen)continue;if(_e.queryDiff<p.queryDiff)c=C.name.value,p=_e;else if(_e.queryDiff!==p.queryDiff)continue;_e.hrefLen>p.hrefLen&&(c=C.name.value,p=_e)}if(c===null&&F.some(C=>C.routeData===void 0&&C.name.value===O.value)===!0){Le=!1;return}be({name:c,setCurrent:!0})}function Co(c){if(M(),$.value!==!0&&D.value!==null&&c.target&&typeof c.target.closest=="function"){const p=c.target.closest(".q-tab");p&&D.value.contains(p)===!0&&($.value=!0,Z.value===!0&&qe(p))}}function xo(){r(()=>{$.value=!1},30)}function we(){ao.avoidRouteWatcher===!1?S(wo):re()}function to(){if(ee===void 0){const c=xe(()=>v.$route.fullPath,we);ee=()=>{c(),ee=void 0}}}function jo(c){F.push(c),B.value++,Te(),c.routeData===void 0||v.$route===void 0?S(()=>{if(Z.value===!0){const p=O.value,q=p!=null&&p!==""?F.find(U=>U.name.value===p):null;q&&qe(q.rootRef.value)}}):(to(),c.routeData.hasRouterLink.value===!0&&we())}function Po(c){F.splice(F.indexOf(c),1),B.value--,Te(),ee!==void 0&&c.routeData!==void 0&&(F.every(p=>p.routeData===void 0)===!0&&ee(),we())}const ao={currentModel:O,tabProps:Pe,hasFocus:$,hasActiveTab:Ve,registerTab:jo,unregisterTab:Po,verifyRouteModel:we,updateModel:be,onKbdNavigate:qo,avoidRouteWatcher:!1};No(po,ao);function io(){le!==null&&clearTimeout(le),ve(),ee?.()}let lo,Le;return fo(io),Uo(()=>{lo=ee!==void 0,io()}),Ro(()=>{lo===!0&&(to(),Le=!0,we()),Te()}),()=>A("div",{ref:D,class:Ae.value,role:"tablist",onFocusin:Co,onFocusout:xo},[A(Zo,{onResize:Ye}),A("div",{ref:N,class:Be.value,onScroll:ye},Ne(e.default)),A(X,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(ne.value===!0?"":" q-tabs__arrow--faded"),name:o.leftIcon||i.iconSet.tabs[o.vertical===!0?"up":"left"],onMousedownPassive:$e,onTouchstartPassive:$e,onMouseupPassive:ve,onMouseleavePassive:ve,onTouchendPassive:ve}),A(X,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(me.value===!0?"":" q-tabs__arrow--faded"),name:o.rightIcon||i.iconSet.tabs[o.vertical===!0?"down":"right"],onMousedownPassive:eo,onTouchstartPassive:eo,onMouseupPassive:ve,onMouseleavePassive:ve,onTouchendPassive:ve})])}});function ut(o){const e=[.06,6,50];return typeof o=="string"&&o.length&&o.split(":").forEach((d,v)=>{const i=parseFloat(d);i&&(e[v]=i)}),e}const ct=Oo({name:"touch-swipe",beforeMount(o,{value:e,arg:d,modifiers:v}){if(v.mouse!==!0&&Ce.has.touch!==!0)return;const i=v.mouseCapture===!0?"Capture":"",a={handler:e,sensitivity:ut(d),direction:uo(v),noop:Ao,mouseStart(n){co(n,a)&&Bo(n)&&(De(a,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),a.start(n,!0))},touchStart(n){if(co(n,a)){const g=n.target;De(a,"temp",[[g,"touchmove","move","notPassiveCapture"],[g,"touchcancel","end","notPassiveCapture"],[g,"touchend","end","notPassiveCapture"]]),a.start(n)}},start(n,g){Ce.is.firefox===!0&&He(o,!0);const r=no(n);a.event={x:r.left,y:r.top,time:Date.now(),mouse:g===!0,dir:!1}},move(n){if(a.event===void 0)return;if(a.event.dir!==!1){Ee(n);return}const g=Date.now()-a.event.time;if(g===0)return;const r=no(n),M=r.left-a.event.x,S=Math.abs(M),re=r.top-a.event.y,D=Math.abs(re);if(a.event.mouse!==!0){if(S<a.sensitivity[1]&&D<a.sensitivity[1]){a.end(n);return}}else if(window.getSelection().toString()!==""){a.end(n);return}else if(S<a.sensitivity[2]&&D<a.sensitivity[2])return;const N=S/g,O=D/g;a.direction.vertical===!0&&S<D&&S<100&&O>a.sensitivity[0]&&(a.event.dir=re<0?"up":"down"),a.direction.horizontal===!0&&S>D&&D<100&&N>a.sensitivity[0]&&(a.event.dir=M<0?"left":"right"),a.direction.up===!0&&S<D&&re<0&&S<100&&O>a.sensitivity[0]&&(a.event.dir="up"),a.direction.down===!0&&S<D&&re>0&&S<100&&O>a.sensitivity[0]&&(a.event.dir="down"),a.direction.left===!0&&S>D&&M<0&&D<100&&N>a.sensitivity[0]&&(a.event.dir="left"),a.direction.right===!0&&S>D&&M>0&&D<100&&N>a.sensitivity[0]&&(a.event.dir="right"),a.event.dir!==!1?(Ee(n),a.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),ot(),a.styleCleanup=Z=>{a.styleCleanup=void 0,document.body.classList.remove("non-selectable");const ne=()=>{document.body.classList.remove("no-pointer-events--children")};Z===!0?setTimeout(ne,50):ne()}),a.handler({evt:n,touch:a.event.mouse!==!0,mouse:a.event.mouse,direction:a.event.dir,duration:g,distance:{x:S,y:D}})):a.end(n)},end(n){a.event!==void 0&&(We(a,"temp"),Ce.is.firefox===!0&&He(o,!1),a.styleCleanup?.(!0),n!==void 0&&a.event.dir!==!1&&Ee(n),a.event=void 0)}};if(o.__qtouchswipe=a,v.mouse===!0){const n=v.mouseCapture===!0||v.mousecapture===!0?"Capture":"";De(a,"main",[[o,"mousedown","mouseStart",`passive${n}`]])}Ce.has.touch===!0&&De(a,"main",[[o,"touchstart","touchStart",`passive${v.capture===!0?"Capture":""}`],[o,"touchmove","noop","notPassiveCapture"]])},updated(o,e){const d=o.__qtouchswipe;d!==void 0&&(e.oldValue!==e.value&&(typeof e.value!="function"&&d.end(),d.handler=e.value),d.direction=uo(e.modifiers))},beforeUnmount(o){const e=o.__qtouchswipe;e!==void 0&&(We(e,"main"),We(e,"temp"),Ce.is.firefox===!0&&He(o,!1),e.styleCleanup?.(),delete o.__qtouchswipe)}});function mt(){let o=Object.create(null);return{getCache:(e,d)=>o[e]===void 0?o[e]=typeof d=="function"?d():d:o[e],setCache(e,d){o[e]=d},hasCache(e){return Object.hasOwnProperty.call(o,e)},clearCache(e){e!==void 0?delete o[e]:o=Object.create(null)}}}const gt={name:{required:!0},disable:Boolean},mo={setup(o,{slots:e}){return()=>A("div",{class:"q-panel scroll",role:"tabpanel"},Ne(e.default))}},pt={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},ft=["update:modelValue","beforeTransition","transition"];function ht(){const{props:o,emit:e,proxy:d}=Ue(),{getCache:v}=mt(),{registerTimeout:i}=Ke();let a,n;const g=ie(null),r={value:null};function M(_){const V=o.vertical===!0?"up":"left";ee((d.$q.lang.rtl===!0?-1:1)*(_.direction===V?1:-1))}const S=E(()=>[[ct,M,void 0,{horizontal:o.vertical!==!0,vertical:o.vertical,mouse:!0}]]),re=E(()=>o.transitionPrev||`slide-${o.vertical===!0?"down":"right"}`),D=E(()=>o.transitionNext||`slide-${o.vertical===!0?"up":"left"}`),N=E(()=>`--q-transition-duration: ${o.transitionDuration}ms`),O=E(()=>typeof o.modelValue=="string"||typeof o.modelValue=="number"?o.modelValue:String(o.modelValue)),Z=E(()=>({include:o.keepAliveInclude,exclude:o.keepAliveExclude,max:o.keepAliveMax})),ne=E(()=>o.keepAliveInclude!==void 0||o.keepAliveExclude!==void 0);xe(()=>o.modelValue,(_,V)=>{const oe=B(_)===!0?$(_):-1;n!==!0&&ge(oe===-1?0:oe<$(V)?-1:1),r.value!==oe&&(r.value=oe,e("beforeTransition",_,V),i(()=>{e("transition",_,V)},o.transitionDuration))});function me(){ee(1)}function ke(){ee(-1)}function F(_){e("update:modelValue",_)}function B(_){return _!=null&&_!==""}function $(_){return a.findIndex(V=>V.props.name===_&&V.props.disable!==""&&V.props.disable!==!0)}function le(){return a.filter(_=>_.props.disable!==""&&_.props.disable!==!0)}function ge(_){const V=_!==0&&o.animated===!0&&r.value!==-1?"q-transition--"+(_===-1?re.value:D.value):null;g.value!==V&&(g.value=V)}function ee(_,V=r.value){let oe=V+_;for(;oe!==-1&&oe<a.length;){const be=a[oe];if(be!==void 0&&be.props.disable!==""&&be.props.disable!==!0){ge(_),n=!0,e("update:modelValue",be.props.name),setTimeout(()=>{n=!1});return}oe+=_}o.infinite===!0&&a.length!==0&&V!==-1&&V!==a.length&&ee(_,_===-1?a.length:-1)}function Pe(){const _=$(o.modelValue);return r.value!==_&&(r.value=_),!0}function Ve(){const _=B(o.modelValue)===!0&&Pe()&&a[r.value];return o.keepAlive===!0?[A(Qo,Z.value,[A(ne.value===!0?v(O.value,()=>({...mo,name:O.value})):mo,{key:O.value,style:N.value},()=>_)])]:[A("div",{class:"q-panel scroll",style:N.value,key:O.value,role:"tabpanel"},[_])]}function Oe(){if(a.length!==0)return o.animated===!0?[A(zo,{name:g.value},Ve)]:Ve()}function Ae(_){return a=Go(Ne(_.default,[])).filter(V=>V.props!==null&&V.props.slot===void 0&&B(V.props.name)===!0),a.length}function Be(){return a}return Object.assign(d,{next:me,previous:ke,goTo:F}),{panelIndex:r,panelDirectives:S,updatePanelsList:Ae,updatePanelIndex:Pe,getPanelContent:Oe,getEnabledPanels:le,getPanels:Be,isValidPanelName:B,keepAliveProps:Z,needsUniqueKeepAliveWrapper:ne,goToPanelByOffset:ee,goToPanel:F,nextPanel:me,previousPanel:ke}}const Fe=Re({name:"QTabPanel",props:gt,setup(o,{slots:e}){return()=>A("div",{class:"q-tab-panel",role:"tabpanel"},Ne(e.default))}}),_o=Re({name:"QTabPanels",props:{...pt,...Jo},emits:ft,setup(o,{slots:e}){const d=Ue(),v=Wo(o,d.proxy.$q),{updatePanelsList:i,getPanelContent:a,panelDirectives:n}=ht(),g=E(()=>"q-tab-panels q-panel-parent"+(v.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(e),Ho("div",{class:g.value},a(),"pan",o.swipeable,()=>n.value))}}),go=["Primera fase","Segunda fase","Tercera fase","Cuarta fase","Quinta fase","Sexta fase","Septima fase","Octava fase","Novena fase","Decima fase"],bt={name:"ClasificacionPanel",props:{code:{type:String,required:!0},campeonato:{type:Object,default:()=>({})},canEdit:{type:Boolean,default:!1},isLightMode:{type:Boolean,default:!1},mensajes:{type:Array,default:()=>[]}},data(){return{fases:[],faseId:null,genDialog:!1,genMode:"ida",faseDialog:!1,partidoDialog:!1,editPartidoDialog:!1,editTab:"basico",incidenciaTabs:[{key:"goles"},{key:"faltas"},{key:"amarillas"},{key:"rojas"},{key:"sustituciones"},{key:"porteros"}],incidenciaDialog:!1,incidenciaDialogMode:"insert",editingIncidenciaId:null,faseForm:{id:null,nombre:"Primera fase",tipo:"liga"},partidoForm:{campeonato_fase_id:null,campeonato_fecha_id:null,local_equipo_id:null,visita_equipo_id:null,grupo_nombre:null,estado:"no_realizado"},editPartidoForm:{id:null,campeonato_fecha_id:null,programado_fecha:"",programado_hora:"",local_equipo_id:null,visita_equipo_id:null,grupo_nombre:null,goles_local:null,goles_visita:null,estado:"no_realizado"},incidencias:{goles:[],tarjetas_amarillas:[],tarjetas_rojas:[],faltas:[],sustituciones:[],porteros:[]},eventForms:{gol:{equipo_id:null,jugador_id:null,minuto:null,detalle:""},amarilla:{equipo_id:null,jugador_id:null,minuto:null,detalle:""},roja:{equipo_id:null,jugador_id:null,minuto:null,detalle:""},falta:{equipo_id:null,jugador_id:null,minuto:null,detalle:""},sustitucion:{equipo_id:null,jugador_sale_id:null,jugador_entra_id:null,minuto:null},portero:{equipo_id:null,jugador_id:null,nombre_portero:""}},estadoOptions:[{label:"No realizado",value:"no_realizado"},{label:"En vivo",value:"en_vivo"},{label:"Finalizado",value:"finalizado"}],btnLoading:{fase:!1,generar:!1,partido:!1,editar:!1,incidencia:!1,refresh:!1,report:!1},newMessage:"",sendingMessage:!1}},computed:{activeFase(){return this.fases.find(o=>Number(o.id)===Number(this.faseId))||null},faseOptions(){return(this.fases||[]).map(o=>({...o,label:`${o.nombre} (${o.tipo==="eliminatoria"?"eliminatoria":"todos contra todos"})`}))},tabla(){return this.activeFase?.tabla||[]},isEliminatoria(){return this.activeFase?.tipo==="eliminatoria"},activePartidos(){return this.activeFase?.partidos||[]},allTeamOptions(){return(this.campeonato?.equipos||[]).map(o=>({id:o.id,nombre:o.nombre,imagen:o.imagen||"torneoImagen.jpg",grupo_nombre:o.grupo?.nombre||o.grupo_nombre||null,jugadores:o.jugadores||[]}))},editTeamOptions(){const o=[Number(this.editPartidoForm.local_equipo_id),Number(this.editPartidoForm.visita_equipo_id)].filter(Boolean);return o.length?this.allTeamOptions.filter(e=>o.includes(Number(e.id))):this.allTeamOptions},filteredTeamOptionsCreate(){return this.partidoForm.grupo_nombre?this.allTeamOptions.filter(o=>(o.grupo_nombre||"Sin grupo")===this.partidoForm.grupo_nombre):this.allTeamOptions},filteredTeamOptionsEdit(){return this.editPartidoForm.grupo_nombre?this.allTeamOptions.filter(o=>(o.grupo_nombre||"Sin grupo")===this.editPartidoForm.grupo_nombre):this.allTeamOptions},groupOptions(){return(this.campeonato?.grupos||[]).map(o=>({value:o.nombre,label:o.nombre}))},incidenciaMeta(){const o={goles:{singular:"Gol",plural:"Goles",icon:"sports_soccer",path:"goles"},faltas:{singular:"Falta",plural:"Faltas",icon:"sports",path:"faltas"},amarillas:{singular:"Tarjeta amarilla",plural:"Tarjetas amarillas",icon:"style",path:"amarillas"},rojas:{singular:"Tarjeta roja",plural:"Tarjetas rojas",icon:"warning",path:"rojas"},sustituciones:{singular:"Sustitucion",plural:"Sustituciones",icon:"swap_horiz",path:"sustituciones"},porteros:{singular:"Portero",plural:"Porteros",icon:"sports_handball",path:"porteros"}};return o[this.currentIncTab]||o.goles},currentIncTab(){return this.editTab==="basico"?"goles":this.editTab},incidenciaTitle(){return this.incidenciaMeta.plural},incidenciaRows(){return{goles:this.incidencias.goles||[],faltas:this.incidencias.faltas||[],amarillas:this.incidencias.tarjetas_amarillas||[],rojas:this.incidencias.tarjetas_rojas||[],sustituciones:this.incidencias.sustituciones||[],porteros:this.incidencias.porteros||[]}[this.currentIncTab]||[]},incidenciaColumns(){return this.currentIncTab==="sustituciones"?[{name:"actions",label:"Opciones",align:"left"},{name:"minuto",label:"Min",align:"left",field:o=>o.minuto||"-"},{name:"equipo",label:"Equipo",align:"left",field:o=>o.equipo?.nombre||"-"},{name:"sale",label:"Sale",align:"left",field:o=>o.jugadorSale?.nombre||"-"},{name:"entra",label:"Entra",align:"left",field:o=>o.jugadorEntra?.nombre||"-"}]:this.currentIncTab==="porteros"?[{name:"actions",label:"Opciones",align:"left"},{name:"equipo",label:"Equipo",align:"left",field:o=>o.equipo?.nombre||"-"},{name:"jugador",label:"Jugador",align:"left",field:o=>o.jugador?.nombre||o.nombre_portero||"-"}]:[{name:"actions",label:"Opciones",align:"left"},{name:"minuto",label:"Min",align:"left",field:o=>o.minuto||"-"},{name:"equipo",label:"Equipo",align:"left",field:o=>o.equipo?.nombre||"-"},{name:"jugador",label:"Jugador",align:"left",field:o=>o.jugador?.nombre||"-"},{name:"detalle",label:"Detalle",align:"left",field:o=>o.detalle||"-"}]},currentEventForm(){return{goles:this.eventForms.gol,faltas:this.eventForms.falta,amarillas:this.eventForms.amarilla,rojas:this.eventForms.roja,sustituciones:this.eventForms.sustitucion,porteros:this.eventForms.portero}[this.currentIncTab]||this.eventForms.gol}},watch:{code(){this.cargar()},faseId(o){this.partidoForm.campeonato_fase_id=o},"partidoForm.grupo_nombre"(){this.cleanInvalidTeams()},"editPartidoForm.grupo_nombre"(){this.cleanInvalidTeamsEdit()}},mounted(){this.cargar()},methods:{imageSrc(o){return`${this.$url}../../images/${o||"torneoImagen.jpg"}`},equipoLogo(o,e=null){const d=(this.campeonato?.equipos||[]).find(v=>Number(v.id)===Number(o));return this.imageSrc(d?.imagen||e||"torneoImagen.jpg")},playersByTeam(o){return((this.campeonato?.equipos||[]).find(d=>Number(d.id)===Number(o))?.jugadores||[]).map(d=>({id:d.id,nombre:d.nombre}))},formatScore(o){return o.goles_local===null||o.goles_visita===null?"vs":`${o.goles_local}:${o.goles_visita}`},formatDateTime(o){return o?new Date(o).toLocaleString():""},formatPartidoSchedule(o){if(!o)return"Sin fecha";const e=new Date(o);if(Number.isNaN(e.getTime()))return"Sin fecha";const d=e.toLocaleDateString(),v=e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`${d} ${v}`},buildProgramadoAt(o,e){return o?`${o} ${e||"00:00"}:00`:null},splitProgramadoAt(o){if(!o)return{fecha:"",hora:""};const e=new Date(o);if(!Number.isNaN(e.getTime())){const a=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),g=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),M=String(e.getMinutes()).padStart(2,"0");return{fecha:`${a}-${n}-${g}`,hora:`${r}:${M}`}}const d=String(o),[v,i=""]=d.split(" ");return{fecha:v||"",hora:i.slice(0,5)||""}},estadoLabel(o){return{no_realizado:"No realizado",en_vivo:"En vivo",finalizado:"Finalizado",jugado:"Finalizado",pendiente:"No realizado"}[o]||"No realizado"},estadoClass(o){return o==="en_vivo"?"estado-vivo":o==="finalizado"||o==="jugado"?"estado-finalizado":"estado-no-realizado"},estadoColor(o){return o==="en_vivo"?"amber-6":o==="finalizado"||o==="jugado"?"positive":"grey-5"},estadoTextColor(o){return o==="en_vivo"?"black":"white"},defaultFaseName(){const o=this.fases.length;return go[o]?go[o]:`Fase ${o+1}`},resetFaseForm(){this.faseForm={id:null,nombre:this.defaultFaseName(),tipo:"liga"}},editarFase(o){this.faseForm={id:o.id,nombre:o.nombre,tipo:o.tipo||"liga"}},eliminarFase(o){this.$alert.dialog(`Deseas eliminar la fase ${o.nombre}?`).onOk(()=>{this.btnLoading.fase=!0,this.$axios.delete(`campeonatos/${this.campeonato.id}/fases/${o.id}`).then(()=>{this.$alert.success("Fase eliminada"),this.resetFaseForm(),this.cargar()}).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo eliminar fase")).finally(()=>{this.btnLoading.fase=!1})})},cleanInvalidTeams(){const o=this.filteredTeamOptionsCreate.map(e=>Number(e.id));o.includes(Number(this.partidoForm.local_equipo_id))||(this.partidoForm.local_equipo_id=null),o.includes(Number(this.partidoForm.visita_equipo_id))||(this.partidoForm.visita_equipo_id=null)},cleanInvalidTeamsEdit(){const o=this.filteredTeamOptionsEdit.map(e=>Number(e.id));o.includes(Number(this.editPartidoForm.local_equipo_id))||(this.editPartidoForm.local_equipo_id=null),o.includes(Number(this.editPartidoForm.visita_equipo_id))||(this.editPartidoForm.visita_equipo_id=null)},abrirFaseDialog(){this.resetFaseForm(),this.faseDialog=!0},abrirPartidoDialog(){this.partidoForm={campeonato_fase_id:this.activeFase?.id||this.faseId,campeonato_fecha_id:null,local_equipo_id:null,visita_equipo_id:null,grupo_nombre:null,estado:"no_realizado"},this.partidoDialog=!0},openEditPartido(o){if(!this.canEdit)return;const e=this.splitProgramadoAt(o.programado_at);this.editPartidoForm={id:o.id,campeonato_fecha_id:o.campeonato_fecha_id||null,programado_fecha:e.fecha,programado_hora:e.hora,local_equipo_id:o.local_equipo_id||null,visita_equipo_id:o.visita_equipo_id||null,grupo_nombre:o.grupo_nombre||null,goles_local:o.goles_local,goles_visita:o.goles_visita,estado:o.estado||"no_realizado"},this.editTab="basico",this.editPartidoDialog=!0,this.loadIncidencias()},loadIncidencias(){!this.editPartidoForm.id||!this.canEdit||this.$axios.get(`campeonatos/${this.campeonato.id}/partidos/${this.editPartidoForm.id}/incidencias`).then(o=>{this.applyIncidencias(o.data)}).catch(o=>this.$alert.error(o.response?.data?.message||"No se pudo cargar incidencias"))},applyIncidencias(o){this.incidencias={goles:o?.goles||[],tarjetas_amarillas:o?.tarjetas_amarillas||[],tarjetas_rojas:o?.tarjetas_rojas||[],faltas:o?.faltas||[],sustituciones:o?.sustituciones||[],porteros:o?.porteros||[]},Object.prototype.hasOwnProperty.call(o||{},"goles_local")&&(this.editPartidoForm.goles_local=o.goles_local),Object.prototype.hasOwnProperty.call(o||{},"goles_visita")&&(this.editPartidoForm.goles_visita=o.goles_visita)},cargar(){this.btnLoading.refresh=!0,this.$axios.get(`public/campeonatos/${this.code}/clasificacion`).then(o=>{const e=this.faseId;if(this.fases=o.data||[],!this.fases.length)return;const d=this.fases.some(v=>Number(v.id)===Number(e));this.faseId=d?e:this.fases[0].id,this.partidoForm.campeonato_fase_id=this.faseId}).catch(o=>this.$alert.error(o.response?.data?.message||"No se pudo cargar clasificacion")).finally(()=>{this.btnLoading.refresh=!1})},downloadBlob(o,e){const d=window.URL.createObjectURL(o),v=document.createElement("a");v.href=d,v.download=e,document.body.appendChild(v),v.click(),v.remove(),window.URL.revokeObjectURL(d)},downloadReport(o){if(!this.$store?.isLogged){this.$alert.error("Debes iniciar sesion para descargar reportes");return}this.btnLoading.report=!0;const e={type:o};this.faseId&&(e.fase_id=this.faseId),this.$axios.get(`public/campeonatos/${this.code}/reportes/pdf`,{params:e,responseType:"blob"}).then(d=>{const v=(this.activeFase?.nombre||"fase").toString().replace(/\s+/g,"_");this.downloadBlob(d.data,`reporte_${o}_${v}.pdf`)}).catch(d=>this.$alert.error(d.response?.data?.message||"No se pudo generar PDF")).finally(()=>{this.btnLoading.report=!1})},toggleAgrupar(o){!this.activeFase||!this.canEdit||this.$axios.put(`campeonatos/${this.campeonato.id}/fases/${this.activeFase.id}`,{nombre:this.activeFase.nombre,tipo:this.activeFase.tipo,agrupar_por_grupo:!!o}).then(()=>this.cargar()).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo actualizar fase"))},guardarFase(){const o=(this.faseForm.nombre||"").trim();if(!o){this.$alert.error("Nombre de fase requerido");return}this.btnLoading.fase=!0,(this.faseForm.id?this.$axios.put(`campeonatos/${this.campeonato.id}/fases/${this.faseForm.id}`,{nombre:o,tipo:this.faseForm.tipo,agrupar_por_grupo:!0}):this.$axios.post(`campeonatos/${this.campeonato.id}/fases`,{nombre:o,tipo:this.faseForm.tipo,agrupar_por_grupo:!0})).then(()=>{this.$alert.success(this.faseForm.id?"Fase actualizada":"Fase creada"),this.resetFaseForm(),this.cargar()}).catch(d=>this.$alert.error(d.response?.data?.message||"No se pudo guardar fase")).finally(()=>{this.btnLoading.fase=!1})},generarPartidos(){this.activeFase&&(this.btnLoading.generar=!0,this.$axios.post(`campeonatos/${this.campeonato.id}/fases/${this.activeFase.id}/generar-partidos`,{modo:this.genMode}).then(()=>{this.genDialog=!1,this.$alert.success("Partidos generados"),this.cargar()}).catch(o=>this.$alert.error(o.response?.data?.message||"No se pudo generar partidos")).finally(()=>{this.btnLoading.generar=!1}))},guardarPartido(){const o=this.partidoForm.campeonato_fase_id;if(!o){this.$alert.error("Selecciona una fase");return}if(this.partidoForm.local_equipo_id&&this.partidoForm.local_equipo_id===this.partidoForm.visita_equipo_id){this.$alert.error("Local y visita no pueden ser el mismo equipo");return}const e={campeonato_fecha_id:null,local_equipo_id:this.partidoForm.local_equipo_id,visita_equipo_id:this.partidoForm.visita_equipo_id,grupo_nombre:this.partidoForm.grupo_nombre,estado:this.partidoForm.estado};this.btnLoading.partido=!0,this.$axios.post(`campeonatos/${this.campeonato.id}/fases/${o}/partidos`,e).then(()=>{this.partidoDialog=!1,this.$alert.success("Partido agregado"),this.cargar()}).catch(d=>this.$alert.error(d.response?.data?.message||"No se pudo agregar partido")).finally(()=>{this.btnLoading.partido=!1})},guardarEdicionPartido(){if(this.editPartidoForm.id){if(this.editPartidoForm.local_equipo_id&&this.editPartidoForm.local_equipo_id===this.editPartidoForm.visita_equipo_id){this.$alert.error("Local y visita no pueden ser el mismo equipo");return}this.btnLoading.editar=!0,this.$axios.put(`campeonatos/${this.campeonato.id}/partidos/${this.editPartidoForm.id}`,{campeonato_fecha_id:null,programado_at:this.buildProgramadoAt(this.editPartidoForm.programado_fecha,this.editPartidoForm.programado_hora),local_equipo_id:this.editPartidoForm.local_equipo_id,visita_equipo_id:this.editPartidoForm.visita_equipo_id,grupo_nombre:this.editPartidoForm.grupo_nombre,goles_local:this.editPartidoForm.goles_local,goles_visita:this.editPartidoForm.goles_visita,estado:this.editPartidoForm.estado||"no_realizado"}).then(()=>{this.editPartidoDialog=!1,this.$alert.success("Partido actualizado"),this.cargar()}).catch(o=>this.$alert.error(o.response?.data?.message||"No se pudo guardar partido")).finally(()=>{this.btnLoading.editar=!1})}},eliminarPartido(){this.editPartidoForm.id&&this.$alert.dialog("Se eliminara este partido. Deseas continuar?").onOk(()=>{this.btnLoading.editar=!0,this.$axios.delete(`campeonatos/${this.campeonato.id}/partidos/${this.editPartidoForm.id}`).then(()=>{this.editPartidoDialog=!1,this.$alert.success("Partido eliminado"),this.cargar()}).catch(o=>this.$alert.error(o.response?.data?.message||"No se pudo eliminar partido")).finally(()=>{this.btnLoading.editar=!1})})},postIncidencia(o,e){if(this.editPartidoForm.id)return this.btnLoading.incidencia=!0,this.$axios.post(`campeonatos/${this.campeonato.id}/partidos/${this.editPartidoForm.id}/${o}`,e).then(d=>(this.applyIncidencias(d.data),o==="goles"&&this.cargar(),d)).catch(d=>this.$alert.error(d.response?.data?.message||"No se pudo guardar incidencia")).finally(()=>{this.btnLoading.incidencia=!1})},deleteIncidencia(o,e){if(this.editPartidoForm.id)return this.btnLoading.incidencia=!0,this.$axios.delete(`campeonatos/${this.campeonato.id}/partidos/${this.editPartidoForm.id}/${o}/${e}`).then(d=>(this.applyIncidencias(d.data),o==="goles"&&this.cargar(),d)).catch(d=>this.$alert.error(d.response?.data?.message||"No se pudo eliminar incidencia")).finally(()=>{this.btnLoading.incidencia=!1})},resetCurrentEventForm(){this.eventForms={...this.eventForms,gol:{equipo_id:null,jugador_id:null,minuto:null,detalle:""},amarilla:{equipo_id:null,jugador_id:null,minuto:null,detalle:""},roja:{equipo_id:null,jugador_id:null,minuto:null,detalle:""},falta:{equipo_id:null,jugador_id:null,minuto:null,detalle:""},sustitucion:{equipo_id:null,jugador_sale_id:null,jugador_entra_id:null,minuto:null},portero:{equipo_id:null,jugador_id:null,nombre_portero:""}}},openIncidenciaDialog(o="insert",e=null){this.incidenciaDialogMode=o,this.editingIncidenciaId=e?.id||null,this.resetCurrentEventForm(),o==="edit"&&e&&(this.currentIncTab==="goles"&&(this.eventForms.gol={equipo_id:e.equipo_id||null,jugador_id:e.jugador_id||null,minuto:e.minuto||null,detalle:e.detalle||""}),this.currentIncTab==="faltas"&&(this.eventForms.falta={equipo_id:e.equipo_id||null,jugador_id:e.jugador_id||null,minuto:e.minuto||null,detalle:e.detalle||""}),this.currentIncTab==="amarillas"&&(this.eventForms.amarilla={equipo_id:e.equipo_id||null,jugador_id:e.jugador_id||null,minuto:e.minuto||null,detalle:e.detalle||""}),this.currentIncTab==="rojas"&&(this.eventForms.roja={equipo_id:e.equipo_id||null,jugador_id:e.jugador_id||null,minuto:e.minuto||null,detalle:e.detalle||""}),this.currentIncTab==="sustituciones"&&(this.eventForms.sustitucion={equipo_id:e.equipo_id||null,jugador_sale_id:e.jugador_sale_id||null,jugador_entra_id:e.jugador_entra_id||null,minuto:e.minuto||null}),this.currentIncTab==="porteros"&&(this.eventForms.portero={equipo_id:e.equipo_id||null,jugador_id:e.jugador_id||null,nombre_portero:e.nombre_portero||""})),this.incidenciaDialog=!0},saveIncidenciaDialog(){const o=this.incidenciaMeta.path,e={...this.currentEventForm};if(this.incidenciaDialogMode==="edit"&&this.editingIncidenciaId){this.deleteIncidencia(o,this.editingIncidenciaId).then(()=>this.postIncidencia(o,e)).then(()=>{this.incidenciaDialog=!1});return}this.postIncidencia(o,e).then(()=>{this.incidenciaDialog=!1})},deleteCurrentRow(o){o?.id&&this.$alert.dialog(`Deseas eliminar ${this.incidenciaMeta.singular}?`).onOk(()=>this.deleteIncidencia(this.incidenciaMeta.path,o.id))},addGol(){this.postIncidencia("goles",this.eventForms.gol)},deleteGol(o){this.deleteIncidencia("goles",o)},addAmarilla(){this.postIncidencia("amarillas",this.eventForms.amarilla)},deleteAmarilla(o){this.deleteIncidencia("amarillas",o)},addRoja(){this.postIncidencia("rojas",this.eventForms.roja)},deleteRoja(o){this.deleteIncidencia("rojas",o)},addFalta(){this.postIncidencia("faltas",this.eventForms.falta)},deleteFalta(o){this.deleteIncidencia("faltas",o)},addSustitucion(){this.postIncidencia("sustituciones",this.eventForms.sustitucion)},deleteSustitucion(o){this.deleteIncidencia("sustituciones",o)},savePortero(){this.postIncidencia("porteros",this.eventForms.portero)},deletePortero(o){this.deleteIncidencia("porteros",o)},sendMessage(){if(!this.newMessage||!this.newMessage.trim()){this.$alert.error("Escribe un comentario");return}this.sendingMessage=!0,this.$axios.post(`public/campeonatos/${this.code}/mensajes`,{mensaje:this.newMessage.trim()}).then(()=>{this.newMessage="",this.$emit("refresh-mensajes")}).catch(o=>this.$alert.error(o.response?.data?.message||"No se pudo enviar comentario")).finally(()=>{this.sendingMessage=!1})}}},vt={class:"col-12 col-lg-8"},_t={class:"col-12 col-md-4"},kt={class:"col-12 col-md-4 row items-center q-gutter-sm"},qt={class:"col-12 col-md-4 text-right row justify-end q-gutter-sm"},yt={class:"text-left"},Ft={class:"text-left"},wt={class:"row items-center no-wrap q-gutter-xs"},Ct={class:"text-center"},xt={class:"text-center"},jt={class:"text-center"},Pt={class:"text-center"},Vt={class:"text-center"},Tt={class:"text-center"},Lt={class:"text-center"},Dt={class:"text-center"},It={class:"text-center"},Et={class:"col-12 col-lg-4"},St={class:"col-12 col-md-6"},Mt={class:"col-12 col-md-6"},Ut={class:"match-list q-pa-xs"},Rt={class:"row"},Nt={class:"row items-center"},Ot={class:"col-4 col-md-4 text-center"},At={class:"text-caption q-mt-xs"},Bt={class:"col-4 col-md-4 text-center"},zt={class:"match-score text-weight-bold"},Gt={class:"text-caption text-weight-medium"},Qt={class:"text-caption"},Jt={class:"text-caption"},Wt={class:"col-4 col-md-4 text-center"},Ht={class:"text-caption q-mt-xs"},Kt={class:"row items-center q-gutter-xs q-mt-xs"},Xt={key:0,class:"text-caption text-grey-6 q-pa-sm"},Yt={class:"col-12"},Zt={class:"row q-col-gutter-sm"},$t={class:"col-12 col-md-10"},ea={class:"col-12 col-md-2 flex flex-center"},oa={class:"col-12 col-md-7"},ta={class:"row q-gutter-xs"},aa={class:"col-12 col-md-5"},ia={class:"row q-gutter-sm"},la={class:"col-12 col-md-6"},na={class:"col-12 col-md-6"},sa={class:"col-12 col-md-6"},ra={class:"col-12 col-md-6"},da={class:"col-12 col-md-6"},ua={class:"row q-col-gutter-sm"},ca={class:"col-12 col-md-6"},ma={class:"col-12 col-md-6"},ga={class:"col-12 col-md-6"},pa={class:"col-12 col-md-4"},fa={class:"col-12 col-md-4"},ha={class:"col-12 col-md-4"},ba={class:"col-12 col-md-4"},va={class:"col-12 col-md-4"},_a={class:"row items-center q-mb-sm"},ka={class:"text-subtitle2"},qa={class:"text-h6"},ya={class:"col-12 col-md-6"},Fa={class:"col-12 col-md-6"},wa={class:"col-12 col-md-4"},Ca={class:"col-12 col-md-8"},xa={class:"col-12"},ja={class:"col-12 col-md-6"},Pa={class:"col-12 col-md-6"},Va={class:"col-12 col-md-4"},Ta={class:"col-12 col-md-6"},La={class:"col-12 col-md-6"},Da={class:"col-12"};function Ia(o,e,d,v,i,a){return u(),w("div",{class:W(["row q-col-gutter-md clasif-root",{"mode-light":d.isLightMode}])},[s("div",vt,[t(L,{flat:"",bordered:"",class:W(["bg-dark-card q-mb-md",{"text-white":!d.isLightMode}])},{default:l(()=>[t(y,{class:"row items-center q-col-gutter-sm"},{default:l(()=>[s("div",_t,[t(T,{modelValue:i.faseId,"onUpdate:modelValue":e[0]||(e[0]=n=>i.faseId=n),dense:"",outlined:"",dark:!d.isLightMode,"emit-value":"","map-options":"","option-value":"id","option-label":"label",options:a.faseOptions,label:"Fase"},null,8,["modelValue","dark","options"])]),s("div",kt,[e[56]||(e[56]=s("span",null,"Clasificacion por grupo",-1)),t(Ko,{"model-value":a.activeFase?.agrupar_por_grupo,color:"positive",disable:!d.canEdit||!a.activeFase,"onUpdate:modelValue":a.toggleAgrupar},null,8,["model-value","disable","onUpdate:modelValue"])]),s("div",qt,[t(f,{color:"primary",icon:"refresh","no-caps":"",label:"Actualizar",onClick:a.cargar,loading:i.btnLoading.refresh},null,8,["onClick","loading"]),o.$store?.isLogged?(u(),b(Me,{key:0,color:"deep-purple",icon:"picture_as_pdf","no-caps":"",label:"Reportes PDF",disable:i.btnLoading.report},{default:l(()=>[t(he,null,{default:l(()=>[z((u(),b(I,{clickable:"",onClick:e[1]||(e[1]=n=>a.downloadReport("tabla_posiciones"))},{default:l(()=>[t(k,{avatar:""},{default:l(()=>[t(X,{name:"table_chart"})]),_:1}),t(k,null,{default:l(()=>[...e[57]||(e[57]=[h("Tabla de posiciones",-1)])]),_:1})]),_:1})),[[Q]]),z((u(),b(I,{clickable:"",onClick:e[2]||(e[2]=n=>a.downloadReport("partidos_fase"))},{default:l(()=>[t(k,{avatar:""},{default:l(()=>[t(X,{name:"sports_soccer"})]),_:1}),t(k,null,{default:l(()=>[...e[58]||(e[58]=[h("Partidos de la fase",-1)])]),_:1})]),_:1})),[[Q]]),t(de),z((u(),b(I,{clickable:"",onClick:e[3]||(e[3]=n=>a.downloadReport("ranking_total"))},{default:l(()=>[t(k,null,{default:l(()=>[...e[59]||(e[59]=[h("Ranking general",-1)])]),_:1})]),_:1})),[[Q]]),z((u(),b(I,{clickable:"",onClick:e[4]||(e[4]=n=>a.downloadReport("ranking_goles"))},{default:l(()=>[t(k,null,{default:l(()=>[...e[60]||(e[60]=[h("Ranking de goles",-1)])]),_:1})]),_:1})),[[Q]]),z((u(),b(I,{clickable:"",onClick:e[5]||(e[5]=n=>a.downloadReport("ranking_faltas"))},{default:l(()=>[t(k,null,{default:l(()=>[...e[61]||(e[61]=[h("Ranking de faltas",-1)])]),_:1})]),_:1})),[[Q]]),z((u(),b(I,{clickable:"",onClick:e[6]||(e[6]=n=>a.downloadReport("ranking_amarillas"))},{default:l(()=>[t(k,null,{default:l(()=>[...e[62]||(e[62]=[h("Ranking de amarillas",-1)])]),_:1})]),_:1})),[[Q]]),z((u(),b(I,{clickable:"",onClick:e[7]||(e[7]=n=>a.downloadReport("ranking_rojas"))},{default:l(()=>[t(k,null,{default:l(()=>[...e[63]||(e[63]=[h("Ranking de rojas",-1)])]),_:1})]),_:1})),[[Q]]),z((u(),b(I,{clickable:"",onClick:e[8]||(e[8]=n=>a.downloadReport("ranking_sustituciones"))},{default:l(()=>[t(k,null,{default:l(()=>[...e[64]||(e[64]=[h("Ranking de sustituciones",-1)])]),_:1})]),_:1})),[[Q]]),z((u(),b(I,{clickable:"",onClick:e[9]||(e[9]=n=>a.downloadReport("ranking_porteros"))},{default:l(()=>[t(k,null,{default:l(()=>[...e[65]||(e[65]=[h("Ranking de porteros",-1)])]),_:1})]),_:1})),[[Q]])]),_:1})]),_:1},8,["disable"])):j("",!0),d.canEdit?(u(),b(f,{key:1,color:"indigo",icon:"add_circle","no-caps":"",label:"Nueva fase",onClick:a.abrirFaseDialog,loading:i.btnLoading.fase},null,8,["onClick","loading"])):j("",!0)])]),_:1})]),_:1},8,["class"]),a.isEliminatoria?(u(!0),w(J,{key:0},Y(a.tabla,n=>(u(),b(L,{key:n.grupo,flat:"",bordered:"",class:W(["bg-dark-card q-mb-md",{"text-white":!d.isLightMode}])},{default:l(()=>[t(y,{class:"text-subtitle1 text-weight-bold"},{default:l(()=>[h(m(n.grupo),1)]),_:2},1024),t(de,{dark:!d.isLightMode},null,8,["dark"]),t(he,{separator:"",dark:!d.isLightMode},{default:l(()=>[(u(!0),w(J,null,Y(n.rows,g=>(u(),b(I,{key:g.equipo_id},{default:l(()=>[t(k,{avatar:""},{default:l(()=>[t(fe,{rounded:"",size:"36px"},{default:l(()=>[t(ae,{src:a.equipoLogo(g.equipo_id)},null,8,["src"])]),_:2},1024)]),_:2},1024),t(k,null,{default:l(()=>[t(G,{class:"text-weight-medium"},{default:l(()=>[h(m(g.equipo),1)]),_:2},1024),t(G,{caption:""},{default:l(()=>[h(" Ganados: "+m(g.pg)+" | Empatados: "+m(g.pe)+" | Perdidos: "+m(g.pp),1)]),_:2},1024)]),_:2},1024),t(k,{side:""},{default:l(()=>[t(te,{dense:"",color:"indigo-2","text-color":"indigo-10"},{default:l(()=>[h("PJ "+m(g.pj),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["dark"])]),_:2},1032,["class"]))),128)):(u(!0),w(J,{key:1},Y(a.tabla,n=>(u(),b(L,{key:n.grupo,flat:"",bordered:"",class:W(["bg-dark-card q-mb-md",{"text-white":!d.isLightMode}])},{default:l(()=>[t(y,{class:"text-center text-subtitle1 text-weight-bold"},{default:l(()=>[h(m(n.grupo),1)]),_:2},1024),t(de,{dark:!d.isLightMode},null,8,["dark"]),t(et,{dense:"",flat:"",dark:!d.isLightMode,class:"table-standings"},{default:l(()=>[e[66]||(e[66]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Pos"),s("th",{class:"text-left"},"Equipos"),s("th",{class:"text-center"},"Pts"),s("th",{class:"text-center"},"J"),s("th",{class:"text-center"},"G"),s("th",{class:"text-center"},"E"),s("th",{class:"text-center"},"P"),s("th",{class:"text-center"},"GF"),s("th",{class:"text-center"},"GC"),s("th",{class:"text-center"},"DIF"),s("th",{class:"text-center"},"%")])],-1)),s("tbody",null,[(u(!0),w(J,null,Y(n.rows,(g,r)=>(u(),w("tr",{key:g.equipo_id},[s("td",yt,m(r+1),1),s("td",Ft,[s("div",wt,[t(fe,{rounded:"",size:"24px"},{default:l(()=>[t(ae,{src:a.equipoLogo(g.equipo_id)},null,8,["src"])]),_:2},1024),s("span",null,m(g.equipo),1)])]),s("td",Ct,m(g.pts),1),s("td",xt,m(g.pj),1),s("td",jt,m(g.pg),1),s("td",Pt,m(g.pe),1),s("td",Vt,m(g.pp),1),s("td",Tt,m(g.gf),1),s("td",Lt,m(g.gc),1),s("td",Dt,m(g.dif),1),s("td",It,m(g.porcentaje),1)]))),128))])]),_:2},1032,["dark"])]),_:2},1032,["class"]))),128))]),s("div",Et,[t(L,{flat:"",bordered:"",class:W(["bg-dark-card",{"text-white":!d.isLightMode}])},{default:l(()=>[t(y,{class:"row items-center"},{default:l(()=>[e[67]||(e[67]=s("div",{class:"text-h6 text-weight-bold"},"Juegos",-1)),t(K),t(T,{modelValue:i.faseId,"onUpdate:modelValue":e[10]||(e[10]=n=>i.faseId=n),dense:"",outlined:"",dark:!d.isLightMode,"emit-value":"","map-options":"","option-value":"id","option-label":"label",options:a.faseOptions,style:{"min-width":"160px"}},null,8,["modelValue","dark","options"])]),_:1}),t(de,{dark:!d.isLightMode},null,8,["dark"]),t(y,{class:"row q-col-gutter-sm"},{default:l(()=>[s("div",St,[d.canEdit?(u(),b(f,{key:0,class:"full-width",color:"primary","no-caps":"",icon:"auto_awesome",label:"Generar partidos",onClick:e[11]||(e[11]=n=>i.genDialog=!0),loading:i.btnLoading.generar},null,8,["loading"])):j("",!0)]),s("div",Mt,[d.canEdit?(u(),b(f,{key:0,class:"full-width",color:"teal","no-caps":"",icon:"sports_soccer",label:"Agregar partido",onClick:a.abrirPartidoDialog,loading:i.btnLoading.partido},null,8,["onClick","loading"])):j("",!0)])]),_:1}),t(de,{dark:!d.isLightMode},null,8,["dark"]),s("div",Ut,[s("div",Rt,[(u(!0),w(J,null,Y(a.activePartidos,n=>(u(),b(L,{key:n.id,flat:"",bordered:"",class:W(["match-card col-12",{editable:d.canEdit}]),onDblclick:g=>a.openEditPartido(n)},{default:l(()=>[t(y,{class:"q-pa-xs"},{default:l(()=>[s("div",Nt,[s("div",Ot,[t(fe,{rounded:"",size:"36px",class:"match-avatar"},{default:l(()=>[t(ae,{src:a.equipoLogo(n.local_equipo_id,n.local?.imagen)},null,8,["src"])]),_:2},1024),s("div",At,m(n.local?.nombre||"Pendiente"),1)]),s("div",Bt,[s("div",zt,m(a.formatScore(n)),1),s("div",{class:W(["match-mid-card q-mt-xs",a.estadoClass(n.estado)])},[s("div",Gt,m(a.estadoLabel(n.estado)),1),s("div",Qt,m(n.grupo_nombre||"General"),1),s("div",Jt,m(a.formatPartidoSchedule(n.programado_at)),1)],2)]),s("div",Wt,[t(fe,{rounded:"",size:"36px",class:"match-avatar"},{default:l(()=>[t(ae,{src:a.equipoLogo(n.visita_equipo_id,n.visita?.imagen)},null,8,["src"])]),_:2},1024),s("div",Ht,m(n.visita?.nombre||"Pendiente"),1)])]),s("div",Kt,[t(K),d.canEdit?(u(),b(f,{key:0,dense:"",flat:"",round:"",icon:"edit",color:"primary",onClick:g=>a.openEditPartido(n),loading:i.btnLoading.editar},null,8,["onClick","loading"])):j("",!0)])]),_:2},1024)]),_:2},1032,["class","onDblclick"]))),128))]),a.activePartidos.length?j("",!0):(u(),w("div",Xt,"No hay partidos en esta fase"))])]),_:1},8,["class"])]),s("div",Yt,[t(L,{flat:"",bordered:"",class:W(["bg-dark-card",{"text-white":!d.isLightMode}])},{default:l(()=>[t(y,{class:"text-subtitle1 text-weight-bold"},{default:l(()=>[...e[68]||(e[68]=[h("Comentarios",-1)])]),_:1}),t(de,{dark:!d.isLightMode},null,8,["dark"]),t(y,null,{default:l(()=>[s("div",Zt,[s("div",$t,[t(P,{modelValue:i.newMessage,"onUpdate:modelValue":e[12]||(e[12]=n=>i.newMessage=n),type:"textarea",autogrow:"",outlined:"",dark:!d.isLightMode,label:"Escribe un comentario"},null,8,["modelValue","dark"])]),s("div",ea,[t(f,{color:"deep-orange","no-caps":"",icon:"send",label:"Enviar",class:"full-width",onClick:a.sendMessage,loading:i.sendingMessage},null,8,["onClick","loading"])])])]),_:1}),t(de,{dark:!d.isLightMode},null,8,["dark"]),t(he,{separator:"",dark:!d.isLightMode},{default:l(()=>[(u(!0),w(J,null,Y(d.mensajes,n=>(u(),b(I,{key:n.id},{default:l(()=>[t(k,null,{default:l(()=>[t(G,{class:"text-weight-medium"},{default:l(()=>[h(m(n.user?.name||n.user?.username||n.autor_nombre||"Publico"),1)]),_:2},1024),t(G,{caption:""},{default:l(()=>[h(m(a.formatDateTime(n.created_at)),1)]),_:2},1024),t(G,{class:"q-mt-xs"},{default:l(()=>[h(m(n.mensaje),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),d.mensajes?.length?j("",!0):(u(),b(I,{key:0},{default:l(()=>[t(k,{class:"text-grey-6"},{default:l(()=>[...e[69]||(e[69]=[h("Sin comentarios aun",-1)])]),_:1})]),_:1}))]),_:1},8,["dark"])]),_:1},8,["class"])]),t(ce,{modelValue:i.genDialog,"onUpdate:modelValue":e[15]||(e[15]=n=>i.genDialog=n),persistent:""},{default:l(()=>[t(L,{style:{width:"420px","max-width":"95vw"}},{default:l(()=>[t(y,{class:"text-h6"},{default:l(()=>[...e[70]||(e[70]=[h("Generar partidos",-1)])]),_:1}),t(y,null,{default:l(()=>[t(ho,{modelValue:i.genMode,"onUpdate:modelValue":e[13]||(e[13]=n=>i.genMode=n),type:"radio",options:[{label:"Solo ida",value:"ida"},{label:"Ida y vuelta",value:"ida_vuelta"}]},null,8,["modelValue"])]),_:1}),t(je,{align:"right"},{default:l(()=>[t(f,{flat:"","no-caps":"",label:"Cancelar",onClick:e[14]||(e[14]=n=>i.genDialog=!1)}),t(f,{color:"primary","no-caps":"",label:"Continuar",onClick:a.generarPartidos,loading:i.btnLoading.generar},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ce,{modelValue:i.faseDialog,"onUpdate:modelValue":e[19]||(e[19]=n=>i.faseDialog=n),persistent:""},{default:l(()=>[t(L,{style:{width:"720px","max-width":"96vw"}},{default:l(()=>[t(y,{class:"row items-center"},{default:l(()=>[e[71]||(e[71]=s("div",{class:"text-h6"},"Gestionar fases",-1)),t(K),t(f,{flat:"",round:"",dense:"",icon:"close",onClick:e[16]||(e[16]=n=>i.faseDialog=!1)})]),_:1}),t(y,{class:"row q-col-gutter-md"},{default:l(()=>[s("div",oa,[t(he,{bordered:"",separator:""},{default:l(()=>[(u(!0),w(J,null,Y(i.fases,n=>(u(),b(I,{key:n.id},{default:l(()=>[t(k,null,{default:l(()=>[t(G,{class:"text-weight-medium"},{default:l(()=>[h(m(n.nombre),1)]),_:2},1024),t(G,{caption:""},{default:l(()=>[h(m(n.tipo==="eliminatoria"?"Eliminatoria":"Todos contra todos"),1)]),_:2},1024)]),_:2},1024),t(k,{side:""},{default:l(()=>[s("div",ta,[t(f,{dense:"",flat:"",icon:"edit",color:"primary",onClick:g=>a.editarFase(n)},null,8,["onClick"]),t(f,{dense:"",flat:"",icon:"delete",color:"negative",onClick:g=>a.eliminarFase(n)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),s("div",aa,[t(P,{modelValue:i.faseForm.nombre,"onUpdate:modelValue":e[17]||(e[17]=n=>i.faseForm.nombre=n),dense:"",outlined:"",label:"Nombre fase",class:"q-mb-sm"},null,8,["modelValue"]),t(T,{modelValue:i.faseForm.tipo,"onUpdate:modelValue":e[18]||(e[18]=n=>i.faseForm.tipo=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"value","option-label":"label",options:[{label:"Todos contra todos",value:"liga"},{label:"Eliminatoria",value:"eliminatoria"}],label:"Tipo",class:"q-mb-sm"},null,8,["modelValue"]),s("div",ia,[t(f,{flat:"","no-caps":"",label:"Nuevo",onClick:a.resetFaseForm},null,8,["onClick"]),t(f,{color:"primary","no-caps":"",label:i.faseForm.id?"Actualizar":"Crear fase",onClick:a.guardarFase,loading:i.btnLoading.fase},null,8,["label","onClick","loading"])])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ce,{modelValue:i.partidoDialog,"onUpdate:modelValue":e[26]||(e[26]=n=>i.partidoDialog=n),persistent:""},{default:l(()=>[t(L,{style:{width:"620px","max-width":"95vw"}},{default:l(()=>[t(y,{class:"text-h6"},{default:l(()=>[...e[72]||(e[72]=[h("Agregar partido",-1)])]),_:1}),t(y,{class:"row q-col-gutter-sm"},{default:l(()=>[s("div",la,[t(T,{modelValue:i.partidoForm.campeonato_fase_id,"onUpdate:modelValue":e[20]||(e[20]=n=>i.partidoForm.campeonato_fase_id=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"label",options:a.faseOptions,label:"Fase"},null,8,["modelValue","options"])]),s("div",na,[t(T,{modelValue:i.partidoForm.grupo_nombre,"onUpdate:modelValue":e[21]||(e[21]=n=>i.partidoForm.grupo_nombre=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"value","option-label":"label",options:a.groupOptions,label:"Grupo",clearable:""},null,8,["modelValue","options"])]),s("div",sa,[t(T,{modelValue:i.partidoForm.estado,"onUpdate:modelValue":e[22]||(e[22]=n=>i.partidoForm.estado=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"value","option-label":"label",options:i.estadoOptions,label:"Estado"},null,8,["modelValue","options"])]),s("div",ra,[t(T,{modelValue:i.partidoForm.local_equipo_id,"onUpdate:modelValue":e[23]||(e[23]=n=>i.partidoForm.local_equipo_id=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",options:a.filteredTeamOptionsCreate,label:"Local"},null,8,["modelValue","options"])]),s("div",da,[t(T,{modelValue:i.partidoForm.visita_equipo_id,"onUpdate:modelValue":e[24]||(e[24]=n=>i.partidoForm.visita_equipo_id=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",options:a.filteredTeamOptionsCreate,label:"Visita"},null,8,["modelValue","options"])])]),_:1}),t(je,{align:"right"},{default:l(()=>[t(f,{flat:"","no-caps":"",label:"Cancelar",onClick:e[25]||(e[25]=n=>i.partidoDialog=!1)}),t(f,{color:"primary","no-caps":"",label:"Guardar",onClick:a.guardarPartido,loading:i.btnLoading.partido},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ce,{modelValue:i.editPartidoDialog,"onUpdate:modelValue":e[41]||(e[41]=n=>i.editPartidoDialog=n),persistent:""},{default:l(()=>[t(L,{style:{width:"900px","max-width":"96vw"}},{default:l(()=>[t(y,{class:"row items-center"},{default:l(()=>[e[73]||(e[73]=s("div",{class:"text-h6"},"Editar partido",-1)),t(K),t(f,{dense:"",flat:"",round:"",icon:"close",onClick:e[27]||(e[27]=n=>i.editPartidoDialog=!1)})]),_:1}),t(vo,{modelValue:i.editTab,"onUpdate:modelValue":e[28]||(e[28]=n=>i.editTab=n),dense:"","no-caps":"",align:"left",class:"q-px-md"},{default:l(()=>[t(se,{name:"basico",label:"Datos basicos",icon:"edit"}),t(se,{name:"goles",label:"Goles",icon:"sports_soccer"}),t(se,{name:"faltas",label:"Faltas",icon:"sports"}),t(se,{name:"amarillas",label:"Amarillas",icon:"style"}),t(se,{name:"rojas",label:"Rojas",icon:"warning"}),t(se,{name:"sustituciones",label:"Sustituciones",icon:"swap_horiz"}),t(se,{name:"porteros",label:"Porteros",icon:"sports_handball"})]),_:1},8,["modelValue"]),t(de),t(_o,{modelValue:i.editTab,"onUpdate:modelValue":e[39]||(e[39]=n=>i.editTab=n),animated:""},{default:l(()=>[t(Fe,{name:"basico"},{default:l(()=>[s("div",ua,[s("div",ca,[t(T,{modelValue:i.editPartidoForm.grupo_nombre,"onUpdate:modelValue":e[29]||(e[29]=n=>i.editPartidoForm.grupo_nombre=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"value","option-label":"label",options:a.groupOptions,label:"Grupo",clearable:""},null,8,["modelValue","options"])]),s("div",ma,[t(T,{modelValue:i.editPartidoForm.local_equipo_id,"onUpdate:modelValue":e[30]||(e[30]=n=>i.editPartidoForm.local_equipo_id=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",options:a.filteredTeamOptionsEdit,label:"Local"},null,8,["modelValue","options"])]),s("div",ga,[t(T,{modelValue:i.editPartidoForm.visita_equipo_id,"onUpdate:modelValue":e[31]||(e[31]=n=>i.editPartidoForm.visita_equipo_id=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",options:a.filteredTeamOptionsEdit,label:"Visita"},null,8,["modelValue","options"])]),s("div",pa,[t(P,{modelValue:i.editPartidoForm.goles_local,"onUpdate:modelValue":e[32]||(e[32]=n=>i.editPartidoForm.goles_local=n),modelModifiers:{number:!0},dense:"",outlined:"",type:"number",min:"0",label:"Goles local"},null,8,["modelValue"])]),s("div",fa,[t(P,{modelValue:i.editPartidoForm.goles_visita,"onUpdate:modelValue":e[33]||(e[33]=n=>i.editPartidoForm.goles_visita=n),modelModifiers:{number:!0},dense:"",outlined:"",type:"number",min:"0",label:"Goles visita"},null,8,["modelValue"])]),s("div",ha,[t(T,{modelValue:i.editPartidoForm.estado,"onUpdate:modelValue":e[34]||(e[34]=n=>i.editPartidoForm.estado=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"value","option-label":"label",options:i.estadoOptions,label:"Estado"},null,8,["modelValue","options"])]),s("div",ba,[t(P,{modelValue:i.editPartidoForm.programado_fecha,"onUpdate:modelValue":e[35]||(e[35]=n=>i.editPartidoForm.programado_fecha=n),dense:"",outlined:"",type:"date",label:"Fecha"},null,8,["modelValue"])]),s("div",va,[t(P,{modelValue:i.editPartidoForm.programado_hora,"onUpdate:modelValue":e[36]||(e[36]=n=>i.editPartidoForm.programado_hora=n),dense:"",outlined:"",type:"time",label:"Hora"},null,8,["modelValue"])])])]),_:1}),(u(!0),w(J,null,Y(i.incidenciaTabs,n=>(u(),b(Fe,{key:n.key,name:n.key},{default:l(()=>[s("div",_a,[s("div",ka,m(a.incidenciaTitle),1),t(K),t(f,{color:"primary","no-caps":"",icon:a.incidenciaMeta.icon,label:`Agregar ${a.incidenciaMeta.singular}`,onClick:e[37]||(e[37]=g=>a.openIncidenciaDialog("insert"))},null,8,["icon","label"])]),t(Se,{rows:a.incidenciaRows,columns:a.incidenciaColumns,"row-key":"id",flat:"",bordered:"",dense:"","rows-per-page-options":[0],"no-data-label":"Sin registros"},{"body-cell-actions":l(g=>[t(ue,{props:g,class:"text-left"},{default:l(()=>[t(Me,{dense:"","no-caps":"",size:"11px",color:"primary",label:"Opciones"},{default:l(()=>[t(he,null,{default:l(()=>[z((u(),b(I,{clickable:"",onClick:e[38]||(e[38]=r=>a.openIncidenciaDialog("insert"))},{default:l(()=>[t(k,{avatar:""},{default:l(()=>[t(X,{name:"add"})]),_:1}),t(k,null,{default:l(()=>[t(G,null,{default:l(()=>[...e[74]||(e[74]=[h("Insertar",-1)])]),_:1})]),_:1})]),_:1})),[[Q]]),z((u(),b(I,{clickable:"",onClick:r=>a.openIncidenciaDialog("edit",g.row)},{default:l(()=>[t(k,{avatar:""},{default:l(()=>[t(X,{name:"edit"})]),_:1}),t(k,null,{default:l(()=>[t(G,null,{default:l(()=>[...e[75]||(e[75]=[h("Modificar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[Q]]),z((u(),b(I,{clickable:"",onClick:r=>a.deleteCurrentRow(g.row)},{default:l(()=>[t(k,{avatar:""},{default:l(()=>[t(X,{name:"delete"})]),_:1}),t(k,null,{default:l(()=>[t(G,null,{default:l(()=>[...e[76]||(e[76]=[h("Eliminar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[Q]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1},8,["name"]))),128))]),_:1},8,["modelValue"]),t(je,{align:"right"},{default:l(()=>[d.canEdit&&i.editPartidoForm.id?(u(),b(f,{key:0,flat:"","no-caps":"",color:"negative",icon:"delete",label:"Eliminar",onClick:a.eliminarPartido},null,8,["onClick"])):j("",!0),t(K),t(f,{flat:"","no-caps":"",label:"Cancelar",onClick:e[40]||(e[40]=n=>i.editPartidoDialog=!1)}),t(f,{color:"primary","no-caps":"",icon:"save",label:"Guardar",onClick:a.guardarEdicionPartido,loading:i.btnLoading.editar},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ce,{modelValue:i.incidenciaDialog,"onUpdate:modelValue":e[55]||(e[55]=n=>i.incidenciaDialog=n),persistent:""},{default:l(()=>[t(L,{style:{width:"620px","max-width":"95vw"}},{default:l(()=>[t(y,{class:"row items-center"},{default:l(()=>[s("div",qa,m(i.incidenciaDialogMode==="edit"?`Modificar ${a.incidenciaMeta.singular}`:`Agregar ${a.incidenciaMeta.singular}`),1),t(K),t(f,{dense:"",flat:"",round:"",icon:"close",onClick:e[42]||(e[42]=n=>i.incidenciaDialog=!1)})]),_:1}),t(y,{class:"row q-col-gutter-sm"},{default:l(()=>[a.currentIncTab==="goles"||a.currentIncTab==="faltas"||a.currentIncTab==="amarillas"||a.currentIncTab==="rojas"?(u(),w(J,{key:0},[s("div",ya,[t(T,{modelValue:a.currentEventForm.equipo_id,"onUpdate:modelValue":e[43]||(e[43]=n=>a.currentEventForm.equipo_id=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",options:a.editTeamOptions,label:"Equipo"},null,8,["modelValue","options"])]),s("div",Fa,[t(T,{modelValue:a.currentEventForm.jugador_id,"onUpdate:modelValue":e[44]||(e[44]=n=>a.currentEventForm.jugador_id=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",options:a.playersByTeam(a.currentEventForm.equipo_id),label:"Jugador",clearable:""},null,8,["modelValue","options"])]),s("div",wa,[t(P,{modelValue:a.currentEventForm.minuto,"onUpdate:modelValue":e[45]||(e[45]=n=>a.currentEventForm.minuto=n),modelModifiers:{number:!0},dense:"",outlined:"",type:"number",label:"Minuto"},null,8,["modelValue"])]),s("div",Ca,[t(P,{modelValue:a.currentEventForm.detalle,"onUpdate:modelValue":e[46]||(e[46]=n=>a.currentEventForm.detalle=n),dense:"",outlined:"",label:"Detalle"},null,8,["modelValue"])])],64)):j("",!0),a.currentIncTab==="sustituciones"?(u(),w(J,{key:1},[s("div",xa,[t(T,{modelValue:a.currentEventForm.equipo_id,"onUpdate:modelValue":e[47]||(e[47]=n=>a.currentEventForm.equipo_id=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",options:a.editTeamOptions,label:"Equipo"},null,8,["modelValue","options"])]),s("div",ja,[t(T,{modelValue:a.currentEventForm.jugador_sale_id,"onUpdate:modelValue":e[48]||(e[48]=n=>a.currentEventForm.jugador_sale_id=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",options:a.playersByTeam(a.currentEventForm.equipo_id),label:"Jugador sale",clearable:""},null,8,["modelValue","options"])]),s("div",Pa,[t(T,{modelValue:a.currentEventForm.jugador_entra_id,"onUpdate:modelValue":e[49]||(e[49]=n=>a.currentEventForm.jugador_entra_id=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",options:a.playersByTeam(a.currentEventForm.equipo_id),label:"Jugador entra",clearable:""},null,8,["modelValue","options"])]),s("div",Va,[t(P,{modelValue:a.currentEventForm.minuto,"onUpdate:modelValue":e[50]||(e[50]=n=>a.currentEventForm.minuto=n),modelModifiers:{number:!0},dense:"",outlined:"",type:"number",label:"Minuto"},null,8,["modelValue"])])],64)):j("",!0),a.currentIncTab==="porteros"?(u(),w(J,{key:2},[s("div",Ta,[t(T,{modelValue:a.currentEventForm.equipo_id,"onUpdate:modelValue":e[51]||(e[51]=n=>a.currentEventForm.equipo_id=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",options:a.editTeamOptions,label:"Equipo"},null,8,["modelValue","options"])]),s("div",La,[t(T,{modelValue:a.currentEventForm.jugador_id,"onUpdate:modelValue":e[52]||(e[52]=n=>a.currentEventForm.jugador_id=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",options:a.playersByTeam(a.currentEventForm.equipo_id),label:"Jugador portero",clearable:""},null,8,["modelValue","options"])]),s("div",Da,[t(P,{modelValue:a.currentEventForm.nombre_portero,"onUpdate:modelValue":e[53]||(e[53]=n=>a.currentEventForm.nombre_portero=n),dense:"",outlined:"",label:"Nombre libre (opcional)"},null,8,["modelValue"])])],64)):j("",!0)]),_:1}),t(je,{align:"right"},{default:l(()=>[t(f,{flat:"","no-caps":"",label:"Cancelar",onClick:e[54]||(e[54]=n=>i.incidenciaDialog=!1)}),t(f,{color:"primary","no-caps":"",label:i.incidenciaDialogMode==="edit"?"Guardar cambios":"Guardar",onClick:a.saveIncidenciaDialog,loading:i.btnLoading.incidencia},null,8,["label","onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],2)}const Ea=Xe(bt,[["render",Ia],["__scopeId","data-v-6fee0dbb"]]),Sa={name:"RankingPanel",props:{code:{type:String,required:!0},campeonato:{type:Object,default:()=>({})},isLightMode:{type:Boolean,default:!1}},data(){return{loading:!1,rows:[],resumen:{},search:"",faseId:0,faseOptions:[{id:0,label:"Todas las fases"}],metric:"goles",equipoFilter:0,metricOptions:[{label:"Goles",value:"goles"},{label:"Faltas",value:"faltas"},{label:"Amarillas",value:"amarillas"},{label:"Rojas",value:"rojas"},{label:"Sustituciones",value:"sustituciones"},{label:"Porteros",value:"porteros"},{label:"Total",value:"total"}],columns:[{name:"pos",label:"#",align:"center",field:"pos"},{name:"jugador",label:"Jugador",align:"left",field:"jugador"},{name:"goles",label:"Goles",align:"center",field:"goles"},{name:"faltas",label:"Faltas",align:"center",field:"faltas"},{name:"amarillas",label:"Amarillas",align:"center",field:"amarillas"},{name:"rojas",label:"Rojas",align:"center",field:"rojas"},{name:"sustituciones",label:"Sustit.",align:"center",field:"sustituciones"},{name:"porteros",label:"Portero",align:"center",field:"porteros"},{name:"total",label:"Total",align:"center",field:"total"}]}},computed:{equipoOptions(){const o=[{id:0,nombre:"Todos"}],e=(this.campeonato?.equipos||[]).map(d=>({id:Number(d.id),nombre:d.nombre}));return o.concat(e)},filteredRows(){const o=(this.search||"").toLowerCase().trim();return(this.rows||[]).filter(e=>this.equipoFilter&&Number(e.equipo_id)!==Number(this.equipoFilter)?!1:o?`${e.jugador||""} ${e.equipo||""}`.toLowerCase().includes(o):!0)},sortedRows(){const o=this.metric||"goles";return[...this.filteredRows].sort((e,d)=>(e[o]||0)!==(d[o]||0)?(d[o]||0)-(e[o]||0):(e.total||0)!==(d.total||0)?(d.total||0)-(e.total||0):(e.jugador||"").localeCompare(d.jugador||"")).map((e,d)=>({...e,key:`${e.jugador_id||0}-${e.equipo_id||0}-${d}`}))},resumenChips(){return[{key:"goles",label:"Goles",color:"green",icon:"sports_soccer"},{key:"faltas",label:"Faltas",color:"blue-grey",icon:"sports"},{key:"amarillas",label:"Amarillas",color:"amber-8",icon:"style"},{key:"rojas",label:"Rojas",color:"red",icon:"warning"},{key:"sustituciones",label:"Sustit.",color:"indigo",icon:"swap_horiz"},{key:"porteros",label:"Porteros",color:"teal",icon:"sports_handball"}]}},mounted(){this.loadFases().finally(()=>this.loadRanking())},watch:{code(){this.loadFases().finally(()=>this.loadRanking())},faseId(){this.loadRanking()}},methods:{loadFases(){return this.$axios.get(`public/campeonatos/${this.code}/clasificacion`).then(o=>{const e=o.data||[];this.faseOptions=[{id:0,label:"Todas las fases"}].concat(e.map(d=>({id:Number(d.id),label:`${d.nombre} (${d.tipo==="eliminatoria"?"eliminatoria":"todos contra todos"})`})))}).catch(()=>{this.faseOptions=[{id:0,label:"Todas las fases"}],this.faseId=0})},loadRanking(){this.loading=!0;const o={};this.faseId&&(o.fase_id=this.faseId),this.$axios.get(`public/campeonatos/${this.code}/ranking`,{params:o}).then(e=>{this.rows=e.data?.rows||[],this.resumen=e.data?.resumen||{}}).catch(e=>{this.rows=[],this.resumen={},this.$alert.error(e.response?.data?.message||"No se pudo cargar ranking")}).finally(()=>{this.loading=!1})}}},Ma={class:"col-12 col-md-3"},Ua={class:"col-12 col-md-4"},Ra={class:"col-12 col-md-3"},Na={class:"col-12 col-md-3"},Oa={class:"col-12 col-md-2 text-right"},Aa={class:"text-weight-medium"},Ba={class:"text-caption text-grey-5"};function za(o,e,d,v,i,a){return u(),w("div",{class:W(["ranking-root",{"mode-light":d.isLightMode}])},[t(L,{flat:"",bordered:"",class:W(["bg-dark-card q-mb-md",{"text-white":!d.isLightMode}])},{default:l(()=>[t(y,{class:"row q-col-gutter-sm items-center"},{default:l(()=>[s("div",Ma,[t(T,{modelValue:i.faseId,"onUpdate:modelValue":e[0]||(e[0]=n=>i.faseId=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"label",options:i.faseOptions,label:"Fase"},null,8,["modelValue","options"])]),s("div",Ua,[t(T,{modelValue:i.metric,"onUpdate:modelValue":e[1]||(e[1]=n=>i.metric=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"value","option-label":"label",options:i.metricOptions,label:"Ordenar por"},null,8,["modelValue","options"])]),s("div",Ra,[t(T,{modelValue:i.equipoFilter,"onUpdate:modelValue":e[2]||(e[2]=n=>i.equipoFilter=n),dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"nombre",options:a.equipoOptions,label:"Filtrar equipo"},null,8,["modelValue","options"])]),s("div",Na,[t(P,{modelValue:i.search,"onUpdate:modelValue":e[3]||(e[3]=n=>i.search=n),dense:"",outlined:"",label:"Buscar jugador"},{append:l(()=>[t(X,{name:"search"})]),_:1},8,["modelValue"])]),s("div",Oa,[t(f,{color:"primary","no-caps":"",icon:"refresh",label:"Actualizar",loading:i.loading,onClick:a.loadRanking},null,8,["loading","onClick"])])]),_:1}),t(de,{dark:!d.isLightMode},null,8,["dark"]),t(y,{class:"row q-col-gutter-sm"},{default:l(()=>[(u(!0),w(J,null,Y(a.resumenChips,n=>(u(),w("div",{class:"col-6 col-md-2",key:n.key},[t(te,{class:"full-width justify-center",dense:"",color:n.color,"text-color":"white",icon:n.icon},{default:l(()=>[h(m(n.label)+": "+m(i.resumen?.[n.key]||0),1)]),_:2},1032,["color","icon"])]))),128))]),_:1})]),_:1},8,["class"]),t(Se,{rows:a.sortedRows,columns:i.columns,"row-key":"key",flat:"",bordered:"",dense:"",loading:i.loading,"rows-per-page-options":[0],"no-data-label":"Sin datos de ranking",class:W(["bg-dark-card",{"text-white":!d.isLightMode}])},{"body-cell-pos":l(n=>[t(ue,{props:n,class:"text-center"},{default:l(()=>[t(bo,{color:"indigo",rounded:""},{default:l(()=>[h(m(n.pageIndex+1),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-jugador":l(n=>[t(ue,{props:n},{default:l(()=>[s("div",Aa,m(n.row.jugador||"Sin jugador"),1),s("div",Ba,m(n.row.equipo||"Sin equipo"),1)]),_:2},1032,["props"])]),"body-cell-total":l(n=>[t(ue,{props:n,class:"text-center"},{default:l(()=>[t(te,{dense:"",color:"primary","text-color":"white"},{default:l(()=>[h(m(n.row.total),1)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","class"])],2)}const Ga=Xe(Sa,[["render",za],["__scopeId","data-v-a79b0ccd"]]),Qa={name:"CampeonatoPublicoPage",components:{ClasificacionPanel:Ea,RankingPanel:Ga},props:{isLightMode:{type:Boolean,default:!1}},data(){return{loading:!1,saving:!1,sendingMessage:!1,tab:"inicio",campeonato:{},deportes:[],grupos:[],equipos:[],mensajes:[],newMessage:"",equiposDialog:!1,gruposDialog:!1,equipoDialog:!1,jugadorDialog:!1,jugadorFormDialog:!1,playersLoading:!1,jugadorSaving:!1,selectedEquipo:null,groupAutoCount:3,groupAutoCountOptions:[1,2,3,4,5,6,7,8].map(o=>({label:`${o}`,value:o})),grupoForm:{id:null,nombre:""},teamPreview:null,jugadorPreview:null,teamForm:{id:null,nombre:"",entrenador:"",campeonato_grupo_id:null,imagen:null,imagen_actual:"torneoImagen.jpg"},jugadorForm:{id:null,nombre:"",abreviado:"",posicion:"",numero_camiseta:"",fecha_nacimiento:"",documento:"",celular:"",foto:null,foto_actual:"torneoImagen.jpg"},configImagePreview:null,configBannerPreview:null,config:{id:null,nombre:"",tipo:"unico",deporte:null,descripcion:"",fecha_inicio:"",fecha_fin:"",imagen:null,banner:null},equiposColumns:[{name:"imagen",label:"",field:"imagen",align:"left"},{name:"nombre",label:"Equipo",field:"nombre",align:"left"},{name:"entrenador",label:"Entrenador",field:"entrenador",align:"left"},{name:"grupo_nombre",label:"Categoria",field:"grupo_nombre",align:"left"}],equiposAdminColumns:[{name:"imagen",label:"",field:"imagen",align:"left"},{name:"actions",label:"Opciones",align:"left"},{name:"nombre",label:"Equipo",field:"nombre",align:"left"},{name:"entrenador",label:"Entrenador",field:"entrenador",align:"left"},{name:"categoria",label:"Categoria",field:"grupo_nombre",align:"left"},{name:"jugadores_count",label:"Jugadores",align:"right"}],jugadoresColumns:[{name:"actions",label:"Opciones",align:"left"},{name:"foto",label:"Foto",field:"foto",align:"left"},{name:"nombre",label:"Nombre",field:"nombre",align:"left"},{name:"abreviado",label:"Abrev.",field:"abreviado",align:"left"},{name:"posicion",label:"Posicion",field:"posicion",align:"left"},{name:"numero_camiseta",label:"#",field:"numero_camiseta",align:"left"},{name:"documento",label:"Documento",field:"documento",align:"left"},{name:"celular",label:"Celular",field:"celular",align:"left"}]}},computed:{canEdit(){const o=this.$store?.user||{};return!this.$store?.isLogged||!o?.id||!this.campeonato?.id?!1:o.role==="Administrador"||Number(o.id)===Number(this.campeonato.user_id)},canModerate(){return this.canEdit},esPadreCategorias(){return this.campeonato?.tipo==="categorias"},showParentBanner(){return!!this.campeonato?.parent?.id&&this.campeonato?.tipo==="categoria_item"},creadorNombre(){return this.campeonato?.user?.name||this.campeonato?.user?.username||"Sin creador"},creatorWhatsappLink(){const e=(this.campeonato?.user?.telefono_contacto_1||"").toString().replace(/\D/g,"");return e?`https://wa.me/${e}`:""},grupoSelectOptions(){return this.grupos.map(o=>({id:o.id,nombre:o.nombre}))}},mounted(){this.cargarDeportes(),this.cargarCampeonato(),this.cargarMensajes()},watch:{"$route.params.code"(){this.cargarCampeonato(),this.cargarMensajes(),this.tab="inicio",this.equiposDialog=!1,this.gruposDialog=!1,this.equipoDialog=!1,this.jugadorDialog=!1,this.jugadorFormDialog=!1}},beforeUnmount(){this.configImagePreview&&URL.revokeObjectURL(this.configImagePreview),this.configBannerPreview&&URL.revokeObjectURL(this.configBannerPreview),this.teamPreview&&URL.revokeObjectURL(this.teamPreview),this.jugadorPreview&&URL.revokeObjectURL(this.jugadorPreview)},methods:{imageSrc(o){return`${this.$url}../../images/${o||"torneoImagen.jpg"}`},deporteNombre(o){return this.deportes.find(e=>e.key===o)?.nombre||o},rangoFechas(o,e){return!o&&!e?"Sin fechas definidas":o&&e?`${o} - ${e}`:o||e},formatDateTime(o){return o?new Date(o).toLocaleString():""},tabIcon(o){return this.tab===o?{inicio:"o_home",clasificacion:"o_leaderboard",ranking:"o_emoji_events",configuracion:"o_settings"}[o]:{inicio:"home",clasificacion:"leaderboard",ranking:"emoji_events",configuracion:"settings"}[o]},tabClass(o){return{"tab-active":this.tab===o,[`tab-${o}`]:!0}},sharePublic(){const o=window.location.href;if(navigator.share){navigator.share({title:this.campeonato?.nombre||"Torneo Ya",text:`Mira este campeonato: ${this.campeonato?.nombre||""}`,url:o}).catch(()=>{});return}navigator.clipboard.writeText(o).then(()=>this.$alert.success("Enlace copiado")).catch(()=>this.$alert.error("No se pudo copiar el enlace"))},openWhatsApp(){this.creatorWhatsappLink&&window.open(this.creatorWhatsappLink,"_blank")},goHome(){this.$router.push("/")},goToPadre(){this.campeonato?.parent?.codigo&&this.$router.push(`/c/${this.campeonato.parent.codigo}`)},entrarCategoria(o){this.$router.push(`/c/${o.codigo}`)},onConfigFileChange(o,e){o==="imagen"?(this.configImagePreview&&URL.revokeObjectURL(this.configImagePreview),this.configImagePreview=e?URL.createObjectURL(e):null):(this.configBannerPreview&&URL.revokeObjectURL(this.configBannerPreview),this.configBannerPreview=e?URL.createObjectURL(e):null),e&&this.canEdit&&this.saveConfig(!0)},onTeamImageChange(o){this.teamPreview&&URL.revokeObjectURL(this.teamPreview),this.teamPreview=o?URL.createObjectURL(o):null},onJugadorImageChange(o){this.jugadorPreview&&URL.revokeObjectURL(this.jugadorPreview),this.jugadorPreview=o?URL.createObjectURL(o):null},resetGrupoForm(){this.grupoForm={id:null,nombre:""}},resetTeamForm(){this.teamPreview&&URL.revokeObjectURL(this.teamPreview),this.teamPreview=null,this.teamForm={id:null,nombre:"",entrenador:"",campeonato_grupo_id:null,imagen:null,imagen_actual:"torneoImagen.jpg"}},resetJugadorForm(){this.jugadorPreview&&URL.revokeObjectURL(this.jugadorPreview),this.jugadorPreview=null,this.jugadorForm={id:null,nombre:"",abreviado:"",posicion:"",numero_camiseta:"",fecha_nacimiento:"",documento:"",celular:"",foto:null,foto_actual:"torneoImagen.jpg"}},cargarDeportes(){this.$axios.get("public/deportes").then(o=>{this.deportes=o.data||[]}).catch(()=>{this.deportes=[]})},cargarCampeonato(){this.loading=!0,this.$axios.get(`public/campeonatos/${this.$route.params.code}`).then(o=>{this.campeonato=o.data||{},this.campeonato?.tipo==="categorias"&&this.tab==="clasificacion"&&(this.tab="inicio"),this.grupos=this.campeonato.grupos||[],this.equipos=this.campeonato.equipos||[],this.config={id:this.campeonato.id,nombre:this.campeonato.nombre||"",tipo:this.campeonato.tipo||"unico",deporte:this.campeonato.deporte||null,descripcion:this.campeonato.descripcion||"",fecha_inicio:this.campeonato.fecha_inicio||"",fecha_fin:this.campeonato.fecha_fin||"",imagen:null,banner:null}}).catch(o=>this.$alert.error(o.response?.data?.message||"No se pudo cargar el campeonato")).finally(()=>{this.loading=!1})},loadGestionData(){return Promise.all([this.$axios.get(`campeonatos/${this.campeonato.id}/grupos`).then(o=>{this.grupos=o.data||[]}).catch(()=>{this.grupos=[]}),this.$axios.get(`campeonatos/${this.campeonato.id}/equipos`).then(o=>{this.equipos=o.data||[]}).catch(()=>{this.equipos=[]})])},openEquiposDialog(){this.canEdit&&(this.equiposDialog=!0,this.loadGestionData())},openGruposDialog(){this.gruposDialog=!0,this.resetGrupoForm()},crearGruposAuto(){this.$axios.post(`campeonatos/${this.campeonato.id}/grupos/defaults`,{cantidad:this.groupAutoCount}).then(()=>{this.$alert.success("Grupos generados"),this.loadGestionData(),this.cargarCampeonato()}).catch(o=>this.$alert.error(o.response?.data?.message||"No se pudo generar categorias"))},guardarGrupo(){const o=(this.grupoForm.nombre||"").trim();if(!o){this.$alert.error("Ingresa un nombre de categoria");return}(this.grupoForm.id?this.$axios.put(`campeonatos/${this.campeonato.id}/grupos/${this.grupoForm.id}`,{nombre:o}):this.$axios.post(`campeonatos/${this.campeonato.id}/grupos`,{nombre:o})).then(()=>{this.$alert.success(this.grupoForm.id?"Categoria actualizada":"Categoria agregada"),this.resetGrupoForm(),this.loadGestionData(),this.cargarCampeonato()}).catch(d=>this.$alert.error(d.response?.data?.message||"No se pudo guardar categoria"))},editarGrupo(o){this.grupoForm={id:o.id,nombre:o.nombre||""}},eliminarGrupo(o){this.$alert.dialog(`Eliminar categoria ${o.nombre}?`).onOk(()=>{this.$axios.delete(`campeonatos/${this.campeonato.id}/grupos/${o.id}`).then(()=>{this.$alert.success("Categoria eliminada"),this.loadGestionData(),this.cargarCampeonato()}).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo eliminar categoria"))})},openEquipoDialog(o=null){o?this.teamForm={id:o.id,nombre:o.nombre||"",entrenador:o.entrenador||"",campeonato_grupo_id:o.campeonato_grupo_id||null,imagen:null,imagen_actual:o.imagen||"torneoImagen.jpg"}:this.resetTeamForm(),this.equipoDialog=!0},guardarEquipo(){if(!this.teamForm.nombre||!this.teamForm.nombre.trim()){this.$alert.error("Nombre del equipo requerido");return}const o=new FormData;o.append("nombre",this.teamForm.nombre.trim()),o.append("entrenador",this.teamForm.entrenador||""),this.teamForm.campeonato_grupo_id&&o.append("campeonato_grupo_id",this.teamForm.campeonato_grupo_id),this.teamForm.imagen&&o.append("imagen",this.teamForm.imagen),(this.teamForm.id?this.$axios.post(`campeonatos/${this.campeonato.id}/equipos/${this.teamForm.id}?_method=PUT`,o,{headers:{"Content-Type":"multipart/form-data"}}):this.$axios.post(`campeonatos/${this.campeonato.id}/equipos`,o,{headers:{"Content-Type":"multipart/form-data"}})).then(()=>{this.$alert.success(this.teamForm.id?"Equipo actualizado":"Equipo creado"),this.equipoDialog=!1,this.resetTeamForm(),this.loadGestionData(),this.cargarCampeonato()}).catch(d=>this.$alert.error(d.response?.data?.message||"No se pudo guardar equipo"))},eliminarEquipo(o){this.$alert.dialog(`Eliminar equipo ${o.nombre}?`).onOk(()=>{this.$axios.delete(`campeonatos/${this.campeonato.id}/equipos/${o.id}`).then(()=>{this.$alert.success("Equipo eliminado"),this.loadGestionData(),this.cargarCampeonato()}).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo eliminar equipo"))})},openJugadorDialog(o){this.selectedEquipo=o,this.resetJugadorForm(),this.jugadorDialog=!0,this.playersLoading=!0,this.loadGestionData().then(()=>{const e=this.equipos.find(d=>d.id===o.id);e&&(this.selectedEquipo=e)}).finally(()=>{this.playersLoading=!1})},openJugadorFormDialog(o=null){o?this.editarJugador(o):this.resetJugadorForm(),this.jugadorFormDialog=!0},guardarJugador(){if(!this.selectedEquipo?.id)return;if(!this.jugadorForm.nombre||!this.jugadorForm.nombre.trim()){this.$alert.error("Nombre del jugador requerido");return}this.jugadorSaving=!0;const o=new FormData;o.append("nombre",this.jugadorForm.nombre.trim()),o.append("abreviado",this.jugadorForm.abreviado||""),o.append("posicion",this.jugadorForm.posicion||""),o.append("numero_camiseta",this.jugadorForm.numero_camiseta||""),o.append("fecha_nacimiento",this.jugadorForm.fecha_nacimiento||""),o.append("documento",this.jugadorForm.documento||""),o.append("celular",this.jugadorForm.celular||""),this.jugadorForm.foto&&o.append("foto",this.jugadorForm.foto),(this.jugadorForm.id?this.$axios.post(`campeonatos/${this.campeonato.id}/equipos/${this.selectedEquipo.id}/jugadores/${this.jugadorForm.id}?_method=PUT`,o,{headers:{"Content-Type":"multipart/form-data"}}):this.$axios.post(`campeonatos/${this.campeonato.id}/equipos/${this.selectedEquipo.id}/jugadores`,o,{headers:{"Content-Type":"multipart/form-data"}})).then(()=>{this.$alert.success(this.jugadorForm.id?"Jugador actualizado":"Jugador agregado"),this.jugadorFormDialog=!1,this.resetJugadorForm(),this.playersLoading=!0,this.loadGestionData().then(()=>{this.cargarCampeonato();const d=this.equipos.find(v=>v.id===this.selectedEquipo.id);d&&(this.selectedEquipo=d)}).finally(()=>{this.playersLoading=!1})}).catch(d=>this.$alert.error(d.response?.data?.message||"No se pudo guardar jugador")).finally(()=>{this.jugadorSaving=!1})},editarJugador(o){this.jugadorPreview&&URL.revokeObjectURL(this.jugadorPreview),this.jugadorPreview=null,this.jugadorForm={id:o.id,nombre:o.nombre||"",abreviado:o.abreviado||"",posicion:o.posicion||"",numero_camiseta:o.numero_camiseta||"",fecha_nacimiento:o.fecha_nacimiento||"",documento:o.documento||"",celular:o.celular||"",foto:null,foto_actual:o.foto||"torneoImagen.jpg"}},eliminarJugador(o){this.selectedEquipo?.id&&this.$alert.dialog(`Eliminar jugador ${o.nombre}?`).onOk(()=>{this.playersLoading=!0,this.$axios.delete(`campeonatos/${this.campeonato.id}/equipos/${this.selectedEquipo.id}/jugadores/${o.id}`).then(()=>{this.$alert.success("Jugador eliminado"),this.loadGestionData().then(()=>{this.cargarCampeonato();const e=this.equipos.find(d=>d.id===this.selectedEquipo.id);e&&(this.selectedEquipo=e)}).finally(()=>{this.playersLoading=!1})}).catch(e=>{this.$alert.error(e.response?.data?.message||"No se pudo eliminar jugador"),this.playersLoading=!1})})},saveConfig(o=!1){if(!this.canEdit)return;this.saving=!0;const e=new FormData;e.append("nombre",this.config.nombre||""),e.append("tipo",this.config.tipo||"unico"),e.append("descripcion",this.config.descripcion||""),this.config.deporte&&e.append("deporte",this.config.deporte),this.config.fecha_inicio&&e.append("fecha_inicio",this.config.fecha_inicio),this.config.fecha_fin&&e.append("fecha_fin",this.config.fecha_fin),this.config.imagen&&e.append("imagen",this.config.imagen),this.config.banner&&e.append("banner",this.config.banner),this.$axios.post(`campeonatos/${this.config.id}?_method=PUT`,e,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{o||this.$alert.success("Configuracion actualizada"),this.cargarCampeonato()}).catch(d=>this.$alert.error(d.response?.data?.message||"No se pudo guardar")).finally(()=>{this.saving=!1})},cargarMensajes(){this.$axios.get(`public/campeonatos/${this.$route.params.code}/mensajes`).then(o=>{this.mensajes=o.data||[]}).catch(()=>{this.mensajes=[]})},sendMessage(){if(!this.newMessage||!this.newMessage.trim()){this.$alert.error("Escribe un mensaje");return}this.sendingMessage=!0,this.$axios.post(`public/campeonatos/${this.$route.params.code}/mensajes`,{mensaje:this.newMessage.trim()}).then(()=>{this.newMessage="",this.cargarMensajes()}).catch(o=>this.$alert.error(o.response?.data?.message||"No se pudo enviar mensaje")).finally(()=>{this.sendingMessage=!1})},toggleVisible(o){this.$axios.patch(`campeonatos/${this.campeonato.id}/mensajes/${o.id}/visible`).then(()=>this.cargarMensajes()).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo cambiar visibilidad"))},refreshInicio(){this.cargarCampeonato(),this.cargarMensajes()}}},Ja={class:"hero-overlay"},Wa={class:"hero-content"},Ha={class:"hero-main"},Ka={class:"text-h5 text-weight-bold text-white"},Xa={class:"row items-center q-gutter-sm q-mt-xs"},Ya={class:"text-blue-1"},Za={class:"row items-center q-gutter-sm q-mt-sm"},$a={class:"column q-gutter-sm actions-col"},ei={key:0,class:"row"},oi={class:"row items-center q-mb-sm"},ti={key:1,class:"q-mb-md"},ai={class:"row q-col-gutter-sm"},ii={class:"col"},li={class:"text-weight-bold"},ni={class:"text-caption text-blue-2"},si={key:2,class:"q-mb-md"},ri={class:"row items-center q-mb-sm"},di={key:0,class:"text-grey-5"},ui={key:1,class:"row q-col-gutter-sm"},ci={class:"col"},mi={class:"text-weight-bold"},gi={class:"text-caption text-blue-2"},pi={class:"col-12 col-md-10"},fi={class:"col-12 col-md-2 flex flex-center"},hi={class:"row q-col-gutter-sm"},bi={class:"col-12 col-md-6"},vi={class:"col-12 col-md-6"},_i={class:"col-12 col-md-6"},ki={class:"col-12 col-md-6"},qi={key:0,class:"col-12 col-md-6"},yi={class:"col-12 col-md-6"},Fi={class:"col-12 col-md-6"},wi={class:"col-12 col-md-6"},Ci={class:"col-12 col-md-6"},xi={class:"col-12"},ji={key:0,class:"row justify-end q-mt-sm"},Pi={class:"row q-col-gutter-md q-mb-md"},Vi={class:"col-12 col-md-6"},Ti={class:"row q-gutter-xs"},Li={class:"col-12 col-md-6 row justify-end items-center q-gutter-sm"},Di={class:"row q-col-gutter-sm q-mb-md"},Ii={class:"col-12 col-md-6"},Ei={class:"col-12 col-md-6 flex items-center"},Si={class:"row q-col-gutter-sm q-mb-md"},Mi={class:"col-12 col-md-8"},Ui={class:"col-12 col-md-4"},Ri={class:"text-subtitle1 text-weight-bold"},Ni={class:"row q-col-gutter-sm"},Oi={class:"col-12 col-md-6"},Ai={class:"col-12 col-md-6"},Bi={class:"col-12 col-md-6"},zi={class:"col-12 col-md-6"},Gi={class:"col-12 col-md-6"},Qi={class:"text-subtitle1 text-weight-bold"},Ji={class:"text-subtitle1 text-weight-bold"},Wi={class:"row q-col-gutter-sm q-mb-md"},Hi={class:"col-12 col-md-3"},Ki={class:"col-12 col-md-2"},Xi={class:"col-12 col-md-2"},Yi={class:"col-12 col-md-2"},Zi={class:"col-12 col-md-3"},$i={class:"col-12 col-md-3"},el={class:"col-12 col-md-3"},ol={class:"col-12 col-md-4"},tl={class:"col-12 col-md-4"},al={class:"row justify-end"};function il(o,e,d,v,i,a){const n=so("ClasificacionPanel"),g=so("RankingPanel");return u(),b(at,{class:W(["public-page",{"mode-light":d.isLightMode}])},{default:l(()=>[s("div",{class:"hero",style:Xo({backgroundImage:`url(${a.imageSrc(i.campeonato.banner||"torneoBanner.jpg")})`})},[s("div",Ja,[s("div",Wa,[t(fe,{rounded:"",size:"76px",class:"hero-logo"},{default:l(()=>[t(ae,{src:i.configImagePreview||a.imageSrc(i.campeonato.imagen||"torneoImagen.jpg")},null,8,["src"])]),_:1}),s("div",Ha,[s("div",Ka,m(i.campeonato.nombre||"Campeonato"),1),s("div",Xa,[s("div",Ya,m(a.rangoFechas(i.campeonato.fecha_inicio,i.campeonato.fecha_fin)),1),t(te,{dense:"",color:a.esPadreCategorias?"deep-orange-2":"blue-2","text-color":a.esPadreCategorias?"deep-orange-10":"blue-10"},{default:l(()=>[h(m(a.esPadreCategorias?"Tipo: categorias":"Tipo: unico"),1)]),_:1},8,["color","text-color"])]),s("div",Za,[t(te,{dense:"",color:"indigo-2","text-color":"indigo-10",icon:"shield"},{default:l(()=>[h("Codigo: "+m(i.campeonato.codigo),1)]),_:1}),t(te,{dense:"",color:"teal-2","text-color":"teal-10",icon:"person"},{default:l(()=>[h(" Creador: "+m(a.creadorNombre),1)]),_:1}),i.campeonato?.user?.telefono_contacto_1?(u(),b(te,{key:0,dense:"",color:"green-2","text-color":"green-10",icon:"phone"},{default:l(()=>[h(m(i.campeonato.user.telefono_contacto_1),1)]),_:1})):j("",!0)])]),t(K),s("div",$a,[o.$store?.isLogged?(u(),w("div",ei,[t(f,{color:"indigo-9","text-color":"white",class:"btn-top-home","no-caps":"",dense:"",icon:"home",label:"Home",onClick:a.goHome},null,8,["onClick"])])):j("",!0),t(f,{color:"white","text-color":"indigo-9","no-caps":"",icon:"share",label:"Compartir",onClick:a.sharePublic},null,8,["onClick"]),a.creatorWhatsappLink?(u(),b(f,{key:1,color:"positive","no-caps":"",icon:"chat",label:"WhatsApp al creador",onClick:a.openWhatsApp},null,8,["onClick"])):j("",!0)])])])],4),t(L,{flat:"",bordered:"",class:"q-ma-md panel-shell"},{default:l(()=>[t(vo,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=r=>i.tab=r),dense:"",align:"left","no-caps":"",class:"pub-tabs"},{default:l(()=>[t(se,{name:"inicio",label:"Inicio",icon:a.tabIcon("inicio"),class:W(a.tabClass("inicio"))},null,8,["icon","class"]),a.esPadreCategorias?j("",!0):(u(),b(se,{key:0,name:"clasificacion",label:"Clasificacion",icon:a.tabIcon("clasificacion"),class:W(a.tabClass("clasificacion"))},null,8,["icon","class"])),t(se,{name:"ranking",label:"Ranking",icon:a.tabIcon("ranking"),class:W(a.tabClass("ranking"))},null,8,["icon","class"]),o.$store?.isLogged?(u(),b(se,{key:1,name:"configuracion",label:"Configuracion",icon:a.tabIcon("configuracion"),class:W(a.tabClass("configuracion"))},null,8,["icon","class"])):j("",!0)]),_:1},8,["modelValue"]),t(_o,{modelValue:i.tab,"onUpdate:modelValue":e[13]||(e[13]=r=>i.tab=r),animated:"",class:"panels"},{default:l(()=>[t(Fe,{name:"inicio"},{default:l(()=>[a.showParentBanner?(u(),b(ro,{key:0,dense:"",rounded:"",class:"bg-indigo-2 text-indigo-10 q-mb-md"},{default:l(()=>[e[42]||(e[42]=h(" Este campeonato pertenece a: ",-1)),s("b",null,m(i.campeonato.parent.nombre),1),o.$store?.isLogged?(u(),b(f,{key:0,color:"indigo-9","text-color":"white",class:"q-ml-sm btn-parent-back","no-caps":"",label:"Volver al campeonato principal",onClick:a.goToPadre},null,8,["onClick"])):j("",!0)]),_:1})):j("",!0),s("div",oi,[e[43]||(e[43]=s("div",{class:"text-subtitle1 text-weight-medium text-cyan-2"},"Resumen",-1)),t(K),t(f,{color:"primary","text-color":"white","no-caps":"",class:"btn-refresh-home",icon:"refresh",label:"Actualizar",loading:i.loading,onClick:a.refreshInicio},null,8,["loading","onClick"])]),t(L,{flat:"",bordered:"",class:"q-mb-md bg-dark-card text-blue-1"},{default:l(()=>[t(y,null,{default:l(()=>[h(m(i.campeonato.descripcion||"Sin descripcion"),1)]),_:1})]),_:1}),a.esPadreCategorias?(u(),w("div",ti,[e[44]||(e[44]=s("div",{class:"text-subtitle1 text-green-3 q-mb-sm"},"Categorias del campeonato",-1)),s("div",ai,[(u(!0),w(J,null,Y(i.campeonato.categorias||[],r=>(u(),w("div",{key:r.id,class:"col-12 col-md-4"},[t(L,{flat:"",bordered:"",class:"bg-dark-card text-white"},{default:l(()=>[t(y,{class:"row items-center q-gutter-sm"},{default:l(()=>[t(fe,{rounded:"",size:"44px"},{default:l(()=>[t(ae,{src:a.imageSrc(r.imagen||"torneoImagen.jpg")},null,8,["src"])]),_:2},1024),s("div",ii,[s("div",li,m(r.nombre),1),s("div",ni,m(a.deporteNombre(r.deporte)||r.deporte||"Sin deporte"),1)]),t(f,{dense:"",color:"primary",class:"btn-enter-cat","no-caps":"",label:"Entrar",onClick:M=>a.entrarCategoria(r)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))])])):(u(),w("div",si,[s("div",ri,[e[45]||(e[45]=s("div",{class:"text-subtitle1 text-weight-medium text-green-3"},"Equipos",-1)),t(K),a.canEdit?(u(),b(f,{key:0,color:"green-7","no-caps":"",icon:"groups",label:"Gestionar equipos",onClick:a.openEquiposDialog},null,8,["onClick"])):j("",!0)]),i.equipos.length?(u(),w("div",ui,[(u(!0),w(J,null,Y(i.equipos,r=>(u(),w("div",{key:r.id,class:"col-12 col-md-6"},[t(L,{flat:"",bordered:"",class:"bg-dark-card text-white"},{default:l(()=>[t(y,{class:"row items-center q-gutter-sm"},{default:l(()=>[t(fe,{rounded:"",size:"44px"},{default:l(()=>[t(ae,{src:a.imageSrc(r.imagen||"torneoImagen.jpg")},null,8,["src"])]),_:2},1024),s("div",ci,[s("div",mi,m(r.nombre),1),s("div",gi,m(r.entrenador||"Sin entrenador"),1)]),t(te,{dense:"",color:"teal-2","text-color":"teal-10"},{default:l(()=>[h(m(r.grupo_nombre||"Sin categoria"),1)]),_:2},1024),t(te,{dense:"",color:"indigo-2","text-color":"indigo-10"},{default:l(()=>[h(m((r.jugadores||[]).length)+" jugadores",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])):(u(),w("div",di,"Aun no hay equipos registrados"))])),e[47]||(e[47]=s("div",{class:"text-subtitle1 text-weight-medium q-mb-sm text-deep-orange-3"},"Mensajes",-1)),t(he,{bordered:"",separator:"",class:"rounded-borders messages-list q-mb-md"},{default:l(()=>[(u(!0),w(J,null,Y(i.mensajes,r=>(u(),b(I,{key:r.id,class:"items-start"},{default:l(()=>[t(k,null,{default:l(()=>[t(G,{class:"text-white"},{default:l(()=>[s("b",null,m(r.user?.name||r.user?.username||r.autor_nombre||"Publico"),1),r.visible?j("",!0):(u(),b(bo,{key:0,color:"orange",class:"q-ml-sm"},{default:l(()=>[...e[46]||(e[46]=[h("Oculto",-1)])]),_:1}))]),_:2},1024),t(G,{caption:"",class:"text-blue-2"},{default:l(()=>[h(m(a.formatDateTime(r.created_at)),1)]),_:2},1024),t(G,{class:"q-mt-xs text-grey-3"},{default:l(()=>[h(m(r.mensaje),1)]),_:2},1024)]),_:2},1024),a.canModerate?(u(),b(k,{key:0,side:""},{default:l(()=>[t(f,{dense:"",flat:"",color:r.visible?"negative":"positive",label:r.visible?"Ocultar":"Mostrar",icon:r.visible?"visibility_off":"visibility",onClick:M=>a.toggleVisible(r)},null,8,["color","label","icon","onClick"])]),_:2},1024)):j("",!0)]),_:2},1024))),128))]),_:1}),t(L,{flat:"",bordered:"",class:"bg-dark-card"},{default:l(()=>[t(y,{class:"row q-col-gutter-sm"},{default:l(()=>[s("div",pi,[t(P,{modelValue:i.newMessage,"onUpdate:modelValue":e[1]||(e[1]=r=>i.newMessage=r),type:"textarea",autogrow:"",outlined:"",dark:!d.isLightMode,color:"teal-3",label:"Escribe tu mensaje",hint:"Tu mensaje se publica al presionar Enviar"},null,8,["modelValue","dark"])]),s("div",fi,[t(f,{color:"deep-orange","no-caps":"",class:"full-width",label:"Enviar",icon:"send",onClick:a.sendMessage,loading:i.sendingMessage},null,8,["onClick","loading"])])]),_:1})]),_:1})]),_:1}),a.esPadreCategorias?j("",!0):(u(),b(Fe,{key:0,name:"clasificacion",class:"panel-light-blue"},{default:l(()=>[t(n,{code:o.$route.params.code,campeonato:i.campeonato,"can-edit":a.canEdit,"is-light-mode":d.isLightMode,mensajes:i.mensajes,onRefreshMensajes:a.cargarMensajes},null,8,["code","campeonato","can-edit","is-light-mode","mensajes","onRefreshMensajes"])]),_:1})),t(Fe,{name:"ranking",class:"panel-light-amber"},{default:l(()=>[t(g,{code:o.$route.params.code,campeonato:i.campeonato,"is-light-mode":d.isLightMode},null,8,["code","campeonato","is-light-mode"])]),_:1}),o.$store?.isLogged?(u(),b(Fe,{key:1,name:"configuracion"},{default:l(()=>[a.canEdit?j("",!0):(u(),b(ro,{key:0,dense:"",rounded:"",class:"bg-orange-2 text-orange-10 q-mb-sm"},{default:l(()=>[...e[48]||(e[48]=[h(" Solo el creador o administrador logueado puede modificar este campeonato. ",-1)])]),_:1})),t(tt,{onSubmit:e[12]||(e[12]=Yo(r=>a.saveConfig(),["prevent"]))},{default:l(()=>[s("div",hi,[s("div",bi,[t(P,{modelValue:i.config.nombre,"onUpdate:modelValue":e[2]||(e[2]=r=>i.config.nombre=r),dense:"",outlined:"",dark:!d.isLightMode,color:"cyan-3",label:"Nombre",disable:!a.canEdit},null,8,["modelValue","dark","disable"])]),s("div",vi,[t(ho,{modelValue:i.config.tipo,"onUpdate:modelValue":e[3]||(e[3]=r=>i.config.tipo=r),options:[{label:"Unico",value:"unico"},{label:"Multiples categorias",value:"categorias"}],type:"radio",inline:"",disable:!a.canEdit,color:"cyan-3"},null,8,["modelValue","disable"])]),s("div",_i,[t(P,{modelValue:i.config.fecha_inicio,"onUpdate:modelValue":e[4]||(e[4]=r=>i.config.fecha_inicio=r),dense:"",outlined:"",dark:!d.isLightMode,type:"date",color:"cyan-3",label:"Fecha inicio",disable:!a.canEdit},null,8,["modelValue","dark","disable"])]),s("div",ki,[t(P,{modelValue:i.config.fecha_fin,"onUpdate:modelValue":e[5]||(e[5]=r=>i.config.fecha_fin=r),dense:"",outlined:"",dark:!d.isLightMode,type:"date",color:"cyan-3",label:"Fecha fin",disable:!a.canEdit},null,8,["modelValue","dark","disable"])]),i.config.tipo==="unico"?(u(),w("div",qi,[t(T,{modelValue:i.config.deporte,"onUpdate:modelValue":e[6]||(e[6]=r=>i.config.deporte=r),dense:"",outlined:"",dark:!d.isLightMode,color:"cyan-3","emit-value":"","map-options":"","option-value":"key","option-label":"nombre",options:i.deportes,label:"Deporte",disable:!a.canEdit},null,8,["modelValue","dark","options","disable"])])):j("",!0),s("div",yi,[t(Ie,{modelValue:i.config.imagen,"onUpdate:modelValue":[e[7]||(e[7]=r=>i.config.imagen=r),e[8]||(e[8]=r=>a.onConfigFileChange("imagen",r))],dense:"",outlined:"",dark:!d.isLightMode,color:"cyan-3",label:"Logo/imagen",accept:"image/*",disable:!a.canEdit},null,8,["modelValue","dark","disable"])]),s("div",Fi,[t(Ie,{modelValue:i.config.banner,"onUpdate:modelValue":[e[9]||(e[9]=r=>i.config.banner=r),e[10]||(e[10]=r=>a.onConfigFileChange("banner",r))],dense:"",outlined:"",dark:!d.isLightMode,color:"cyan-3",label:"Banner/fondo",accept:"image/*",disable:!a.canEdit},null,8,["modelValue","dark","disable"])]),s("div",wi,[t(L,{flat:"",bordered:"",class:"bg-dark-card"},{default:l(()=>[t(y,{class:"q-pa-sm"},{default:l(()=>[e[49]||(e[49]=s("div",{class:"text-caption text-blue-2 q-mb-xs"},"Vista previa logo",-1)),t(ae,{src:i.configImagePreview||a.imageSrc(i.campeonato.imagen||"torneoImagen.jpg"),ratio:1},null,8,["src"])]),_:1})]),_:1})]),s("div",Ci,[t(L,{flat:"",bordered:"",class:"bg-dark-card"},{default:l(()=>[t(y,{class:"q-pa-sm"},{default:l(()=>[e[50]||(e[50]=s("div",{class:"text-caption text-blue-2 q-mb-xs"},"Vista previa banner",-1)),t(ae,{src:i.configBannerPreview||a.imageSrc(i.campeonato.banner||"torneoBanner.jpg"),ratio:16/9},null,8,["src"])]),_:1})]),_:1})]),s("div",xi,[t(P,{modelValue:i.config.descripcion,"onUpdate:modelValue":e[11]||(e[11]=r=>i.config.descripcion=r),dense:"",outlined:"",dark:!d.isLightMode,color:"cyan-3",type:"textarea",autogrow:"",label:"Descripcion",disable:!a.canEdit},null,8,["modelValue","dark","disable"])])]),a.canEdit?(u(),w("div",ji,[t(f,{color:"primary","no-caps":"",label:"Guardar cambios",type:"submit",loading:i.saving},null,8,["loading"])])):j("",!0)]),_:1})]),_:1})):j("",!0)]),_:1},8,["modelValue"]),t(ce,{modelValue:i.equiposDialog,"onUpdate:modelValue":e[16]||(e[16]=r=>i.equiposDialog=r),persistent:""},{default:l(()=>[t(L,{style:{width:"980px","max-width":"98vw"},class:"bg-grey-1"},{default:l(()=>[t(y,{class:"row items-center"},{default:l(()=>[e[51]||(e[51]=s("div",{class:"text-subtitle1 text-weight-bold"},"Gestionar equipos",-1)),t(K),t(f,{flat:"",round:"",dense:"",icon:"close",onClick:e[14]||(e[14]=r=>i.equiposDialog=!1)})]),_:1}),t(y,null,{default:l(()=>[s("div",Pi,[s("div",Vi,[e[52]||(e[52]=s("div",{class:"text-subtitle2 q-mb-xs"},"Categorias existentes",-1)),s("div",Ti,[(u(!0),w(J,null,Y(i.grupos,r=>(u(),b(te,{key:r.id,dense:"",color:"teal-2","text-color":"teal-10",label:r.nombre},null,8,["label"]))),128)),i.grupos.length?j("",!0):(u(),b(te,{key:0,dense:"",color:"grey-4","text-color":"black",label:"Sin categorias"}))])]),s("div",Li,[t(f,{color:"indigo","no-caps":"",icon:"category",label:"Crear categorias",onClick:a.openGruposDialog},null,8,["onClick"]),t(f,{color:"primary","no-caps":"",icon:"groups",label:"Crear equipo",onClick:e[15]||(e[15]=r=>a.openEquipoDialog())})])]),t(Se,{rows:i.equipos,columns:i.equiposAdminColumns,"row-key":"id",flat:"",bordered:"",dense:"","rows-per-page-options":[0],"no-data-label":"No hay equipos"},{"body-cell-imagen":l(r=>[t(ue,{props:r},{default:l(()=>[t(fe,{rounded:"",size:"34px"},{default:l(()=>[t(ae,{src:a.imageSrc(r.row.imagen||"torneoImagen.jpg")},null,8,["src"])]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-categoria":l(r=>[t(ue,{props:r},{default:l(()=>[h(m(r.row.grupo_nombre||"Sin categoria"),1)]),_:2},1032,["props"])]),"body-cell-jugadores_count":l(r=>[t(ue,{props:r,class:"text-right"},{default:l(()=>[t(te,{dense:"",color:"indigo-2","text-color":"indigo-10"},{default:l(()=>[h(m((r.row.jugadores||[]).length),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":l(r=>[t(ue,{props:r,class:"text-left"},{default:l(()=>[t(Me,{label:"Opciones","no-caps":"",size:"10px",dense:"",color:"primary"},{default:l(()=>[t(he,null,{default:l(()=>[z((u(),b(I,{clickable:"",onClick:M=>a.openEquipoDialog(r.row)},{default:l(()=>[t(k,{avatar:""},{default:l(()=>[t(X,{name:"edit"})]),_:1}),t(k,null,{default:l(()=>[t(G,null,{default:l(()=>[...e[53]||(e[53]=[h("Editar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[Q]]),z((u(),b(I,{clickable:"",onClick:M=>a.openJugadorDialog(r.row)},{default:l(()=>[t(k,{avatar:""},{default:l(()=>[t(X,{name:"groups"})]),_:1}),t(k,null,{default:l(()=>[t(G,null,{default:l(()=>[...e[54]||(e[54]=[h("Jugadores",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[Q]]),t(de),z((u(),b(I,{clickable:"",onClick:M=>a.eliminarEquipo(r.row)},{default:l(()=>[t(k,{avatar:""},{default:l(()=>[t(X,{name:"delete"})]),_:1}),t(k,null,{default:l(()=>[t(G,null,{default:l(()=>[...e[55]||(e[55]=[h("Eliminar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[Q]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ce,{modelValue:i.gruposDialog,"onUpdate:modelValue":e[20]||(e[20]=r=>i.gruposDialog=r),persistent:""},{default:l(()=>[t(L,{style:{width:"620px","max-width":"95vw"}},{default:l(()=>[t(y,{class:"row items-center"},{default:l(()=>[e[56]||(e[56]=s("div",{class:"text-subtitle1 text-weight-bold"},"Categorias del campeonato",-1)),t(K),t(f,{flat:"",round:"",dense:"",icon:"close",onClick:e[17]||(e[17]=r=>i.gruposDialog=!1)})]),_:1}),t(y,null,{default:l(()=>[s("div",Di,[s("div",Ii,[t(T,{modelValue:i.groupAutoCount,"onUpdate:modelValue":e[18]||(e[18]=r=>i.groupAutoCount=r),dense:"",outlined:"",options:i.groupAutoCountOptions,label:"Cuantas categorias quieres crear","emit-value":"","map-options":""},null,8,["modelValue","options"])]),s("div",Ei,[t(f,{color:"teal","no-caps":"",icon:"auto_awesome",label:"Generar grupos A/B/C...",onClick:a.crearGruposAuto},null,8,["onClick"])])]),s("div",Si,[s("div",Mi,[t(P,{modelValue:i.grupoForm.nombre,"onUpdate:modelValue":e[19]||(e[19]=r=>i.grupoForm.nombre=r),dense:"",outlined:"",label:"Nombre de categoria"},null,8,["modelValue"])]),s("div",Ui,[t(f,{class:"full-width",color:"indigo","no-caps":"",label:i.grupoForm.id?"Actualizar":"Agregar",onClick:a.guardarGrupo},null,8,["label","onClick"])])]),t(he,{bordered:"",separator:""},{default:l(()=>[(u(!0),w(J,null,Y(i.grupos,r=>(u(),b(I,{key:r.id},{default:l(()=>[t(k,null,{default:l(()=>[h(m(r.nombre),1)]),_:2},1024),t(k,{side:""},{default:l(()=>[t(f,{dense:"",flat:"",color:"primary",icon:"edit",onClick:M=>a.editarGrupo(r)},null,8,["onClick"]),t(f,{dense:"",flat:"",color:"negative",icon:"delete",onClick:M=>a.eliminarGrupo(r)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ce,{modelValue:i.equipoDialog,"onUpdate:modelValue":e[27]||(e[27]=r=>i.equipoDialog=r),persistent:""},{default:l(()=>[t(L,{style:{width:"680px","max-width":"95vw"}},{default:l(()=>[t(y,{class:"row items-center"},{default:l(()=>[s("div",Ri,m(i.teamForm.id?"Editar equipo":"Nuevo equipo"),1),t(K),t(f,{flat:"",round:"",dense:"",icon:"close",onClick:e[21]||(e[21]=r=>i.equipoDialog=!1)})]),_:1}),t(y,null,{default:l(()=>[s("div",Ni,[s("div",Oi,[t(P,{modelValue:i.teamForm.nombre,"onUpdate:modelValue":e[22]||(e[22]=r=>i.teamForm.nombre=r),dense:"",outlined:"",label:"Nombre del equipo"},null,8,["modelValue"])]),s("div",Ai,[t(P,{modelValue:i.teamForm.entrenador,"onUpdate:modelValue":e[23]||(e[23]=r=>i.teamForm.entrenador=r),dense:"",outlined:"",label:"Entrenador"},null,8,["modelValue"])]),s("div",Bi,[t(T,{modelValue:i.teamForm.campeonato_grupo_id,"onUpdate:modelValue":e[24]||(e[24]=r=>i.teamForm.campeonato_grupo_id=r),dense:"",outlined:"",clearable:"","emit-value":"","map-options":"",options:a.grupoSelectOptions,"option-value":"id","option-label":"nombre",label:"Categoria (opcional)"},null,8,["modelValue","options"])]),s("div",zi,[t(Ie,{modelValue:i.teamForm.imagen,"onUpdate:modelValue":[e[25]||(e[25]=r=>i.teamForm.imagen=r),a.onTeamImageChange],dense:"",outlined:"",label:"Imagen equipo",accept:"image/*"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Gi,[t(ae,{src:i.teamPreview||a.imageSrc(i.teamForm.imagen_actual||"torneoImagen.jpg"),ratio:1},null,8,["src"])])])]),_:1}),t(je,{align:"right"},{default:l(()=>[t(f,{flat:"","no-caps":"",label:"Cancelar",onClick:e[26]||(e[26]=r=>i.equipoDialog=!1)}),t(f,{color:"primary","no-caps":"",label:i.teamForm.id?"Actualizar":"Crear",onClick:a.guardarEquipo},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ce,{modelValue:i.jugadorDialog,"onUpdate:modelValue":e[30]||(e[30]=r=>i.jugadorDialog=r),persistent:""},{default:l(()=>[t(L,{style:{width:"840px","max-width":"98vw"}},{default:l(()=>[t(y,{class:"row items-center"},{default:l(()=>[s("div",Qi,"Jugadores de "+m(i.selectedEquipo?.nombre),1),t(te,{dense:"",color:"indigo-2","text-color":"indigo-10",class:"q-ml-sm"},{default:l(()=>[h(m((i.selectedEquipo?.jugadores||[]).length)+" jugadores ",1)]),_:1}),t(K),t(f,{color:"primary","no-caps":"",icon:"person_add",label:"Agregar jugador",loading:i.jugadorSaving,disable:i.playersLoading||i.jugadorSaving,onClick:e[28]||(e[28]=r=>a.openJugadorFormDialog())},null,8,["loading","disable"]),t(f,{flat:"",round:"",dense:"",icon:"close",onClick:e[29]||(e[29]=r=>i.jugadorDialog=!1)})]),_:1}),t(y,null,{default:l(()=>[t(Se,{rows:i.selectedEquipo?.jugadores||[],columns:i.jugadoresColumns,"row-key":"id",flat:"",bordered:"",dense:"",loading:i.playersLoading,"rows-per-page-options":[0],"no-data-label":"No hay jugadores registrados"},{"body-cell-actions":l(r=>[t(ue,{props:r,class:"text-left"},{default:l(()=>[t(Me,{label:"Opciones","no-caps":"",size:"10px",dense:"",color:"primary",disable:i.jugadorSaving||i.playersLoading},{default:l(()=>[t(he,null,{default:l(()=>[z((u(),b(I,{clickable:"",onClick:M=>a.openJugadorFormDialog(r.row)},{default:l(()=>[t(k,{avatar:""},{default:l(()=>[t(X,{name:"edit"})]),_:1}),t(k,null,{default:l(()=>[t(G,null,{default:l(()=>[...e[57]||(e[57]=[h("Editar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[Q]]),z((u(),b(I,{clickable:"",onClick:M=>a.eliminarJugador(r.row)},{default:l(()=>[t(k,{avatar:""},{default:l(()=>[t(X,{name:"delete"})]),_:1}),t(k,null,{default:l(()=>[t(G,null,{default:l(()=>[...e[58]||(e[58]=[h("Eliminar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[Q]])]),_:2},1024)]),_:2},1032,["disable"])]),_:2},1032,["props"])]),"body-cell-foto":l(r=>[t(ue,{props:r},{default:l(()=>[t(fe,{rounded:"",size:"34px"},{default:l(()=>[t(ae,{src:a.imageSrc(r.row.foto||"torneoImagen.jpg")},null,8,["src"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ce,{modelValue:i.jugadorFormDialog,"onUpdate:modelValue":e[41]||(e[41]=r=>i.jugadorFormDialog=r),persistent:""},{default:l(()=>[t(L,{style:{width:"780px","max-width":"95vw"}},{default:l(()=>[t(y,{class:"row items-center"},{default:l(()=>[s("div",Ji,m(i.jugadorForm.id?"Editar jugador":"Nuevo jugador"),1),t(K),t(f,{flat:"",round:"",dense:"",icon:"close",onClick:e[31]||(e[31]=r=>i.jugadorFormDialog=!1)})]),_:1}),t(y,null,{default:l(()=>[s("div",Wi,[s("div",Hi,[t(P,{modelValue:i.jugadorForm.nombre,"onUpdate:modelValue":e[32]||(e[32]=r=>i.jugadorForm.nombre=r),dense:"",outlined:"",label:"Nombre"},null,8,["modelValue"])]),s("div",Ki,[t(P,{modelValue:i.jugadorForm.abreviado,"onUpdate:modelValue":e[33]||(e[33]=r=>i.jugadorForm.abreviado=r),dense:"",outlined:"",label:"Abreviado"},null,8,["modelValue"])]),s("div",Xi,[t(P,{modelValue:i.jugadorForm.posicion,"onUpdate:modelValue":e[34]||(e[34]=r=>i.jugadorForm.posicion=r),dense:"",outlined:"",label:"Posicion"},null,8,["modelValue"])]),s("div",Yi,[t(P,{modelValue:i.jugadorForm.numero_camiseta,"onUpdate:modelValue":e[35]||(e[35]=r=>i.jugadorForm.numero_camiseta=r),dense:"",outlined:"",label:"Nro camiseta"},null,8,["modelValue"])]),s("div",Zi,[t(P,{modelValue:i.jugadorForm.fecha_nacimiento,"onUpdate:modelValue":e[36]||(e[36]=r=>i.jugadorForm.fecha_nacimiento=r),type:"date",dense:"",outlined:"",label:"Nacimiento"},null,8,["modelValue"])]),s("div",$i,[t(P,{modelValue:i.jugadorForm.documento,"onUpdate:modelValue":e[37]||(e[37]=r=>i.jugadorForm.documento=r),dense:"",outlined:"",label:"Documento"},null,8,["modelValue"])]),s("div",el,[t(P,{modelValue:i.jugadorForm.celular,"onUpdate:modelValue":e[38]||(e[38]=r=>i.jugadorForm.celular=r),dense:"",outlined:"",label:"Celular"},null,8,["modelValue"])]),s("div",ol,[t(Ie,{modelValue:i.jugadorForm.foto,"onUpdate:modelValue":[e[39]||(e[39]=r=>i.jugadorForm.foto=r),a.onJugadorImageChange],dense:"",outlined:"",label:"Foto",accept:"image/*"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",tl,[t(L,{flat:"",bordered:""},{default:l(()=>[t(y,{class:"q-pa-sm"},{default:l(()=>[e[59]||(e[59]=s("div",{class:"text-caption text-grey-7 q-mb-xs"},"Vista previa",-1)),t(ae,{src:i.jugadorPreview||a.imageSrc(i.jugadorForm.foto_actual||"torneoImagen.jpg"),ratio:1},null,8,["src"])]),_:1})]),_:1})])]),s("div",al,[t(f,{flat:"","no-caps":"",label:"Cancelar",disable:i.jugadorSaving,onClick:e[40]||(e[40]=r=>i.jugadorFormDialog=!1)},null,8,["disable"]),t(f,{color:"primary","no-caps":"",label:i.jugadorForm.id?"Actualizar":"Agregar",loading:i.jugadorSaving,disable:i.playersLoading,onClick:a.guardarJugador},null,8,["label","loading","disable","onClick"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["class"])}const ql=Xe(Qa,[["render",il],["__scopeId","data-v-9ba4c09e"]]);export{ql as default};
