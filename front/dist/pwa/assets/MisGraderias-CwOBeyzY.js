import{Q as C}from"./QSpace-D9phzHsB.js";import{_ as k,c as n,o as d,w as a,a as e,Q as x,e as $,b as f,ag as D,d as c,G as i,t as u,aa as p,J as h,f as y}from"./index-BCqWixgG.js";import{e as B,Q as g,a as s,d as b}from"./format-DaA42lUg.js";import{Q as V}from"./QBtnDropdown-C5qaIMi7.js";import{Q as G,a as _}from"./QTable-Dacp_sJ1.js";import{Q as w}from"./QBadge-BcDNLmI8.js";import{Q as I}from"./QPage-CCnFDat8.js";import{C as v}from"./ClosePopup-Db419-hH.js";import"./QSelect-DrQ4uTqS.js";import"./QChip-Cr7WtGSR.js";const S={name:"MisGraderias",data(){return{loading:!1,filter:"",rows:[],columns:[{name:"actions",label:"Acciones",align:"center"},{name:"nombre",label:"Nombre",align:"left",field:"nombre"},{name:"direccion",label:"Dirección",align:"left",field:"direccion"},{name:"layout",label:"Layout",align:"left",field:o=>`${o.filas}x${o.columnas}`},{name:"activo",label:"Estado",align:"left",field:"activo"}]}},mounted(){this.getData()},methods:{getData(){this.loading=!0,this.$axios.get("mis-graderias").then(o=>{this.rows=o.data}).catch(o=>this.$alert.error(o.response?.data?.message||"Error cargando graderías")).finally(()=>{this.loading=!1})},editRow(o){this.$router.push(`/mis-graderias/${o.id}`)},deleteRow(o){this.loading=!0,this.$axios.delete(`mis-graderias/${o}`).then(()=>{this.$alert.success("Gradería eliminada"),this.getData()}).catch(t=>this.$alert.error(t.response?.data?.message||"No se pudo eliminar")).finally(()=>{this.loading=!1})}}};function N(o,t,q,A,r,m){return d(),n(I,{class:"q-pa-md"},{default:a(()=>[e(x,{flat:"",bordered:"",class:"q-mb-md"},{default:a(()=>[e($,{class:"row items-center"},{default:a(()=>[t[2]||(t[2]=f("div",null,[f("div",{class:"text-h6 text-title"},"Mis Graderías"),f("div",{class:"text-caption text-grey-7"},"Gestión de graderías del usuario")],-1)),e(C),e(D,{modelValue:r.filter,"onUpdate:modelValue":t[0]||(t[0]=l=>r.filter=l),label:"Buscar",dense:"",outlined:"",debounce:"300",style:{width:"280px"}},{append:a(()=>[e(c,{name:"search"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(G,{rows:r.rows,columns:r.columns,"row-key":"id",dense:"",flat:"",bordered:"","wrap-cells":"",filter:r.filter,"rows-per-page-options":[0],"loading-label":"Cargando...","no-data-label":"Sin registros",loading:r.loading},{"top-right":a(()=>[e(y,{color:"positive",label:"Crear nueva gradería","no-caps":"",icon:"add_circle_outline",class:"q-mr-sm",onClick:t[1]||(t[1]=l=>o.$router.push("/mis-graderias/nueva"))}),e(y,{color:"primary",label:"Actualizar","no-caps":"",icon:"refresh",loading:r.loading,onClick:m.getData},null,8,["loading","onClick"])]),"body-cell-actions":a(l=>[e(_,{props:l,class:"text-center"},{default:a(()=>[e(V,{label:"Opciones","no-caps":"",size:"10px",dense:"",color:"primary"},{default:a(()=>[e(B,null,{default:a(()=>[p((d(),n(g,{clickable:"",onClick:Q=>o.$router.push(`/mis-graderias/${l.row.id}/venta`)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(c,{name:"confirmation_number"})]),_:1}),e(s,null,{default:a(()=>[e(b,null,{default:a(()=>[...t[3]||(t[3]=[i("Venta / Asientos",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[v]]),e(h),p((d(),n(g,{clickable:"",onClick:Q=>m.editRow(l.row)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(c,{name:"edit"})]),_:1}),e(s,null,{default:a(()=>[e(b,null,{default:a(()=>[...t[4]||(t[4]=[i("Editar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[v]]),e(h),p((d(),n(g,{clickable:"",onClick:Q=>m.deleteRow(l.row.id)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(c,{name:"delete"})]),_:1}),e(s,null,{default:a(()=>[e(b,null,{default:a(()=>[...t[5]||(t[5]=[i("Eliminar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[v]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell_layout":a(l=>[e(_,{props:l},{default:a(()=>[e(w,{outline:"",color:"primary",class:"q-mr-xs"},{default:a(()=>[i(u(l.row.filas)+" x "+u(l.row.columnas),1)]),_:2},1024),e(w,{outline:"",color:"grey-7"},{default:a(()=>[i(" Total: "+u(l.row.capacidad_total),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell_activo":a(l=>[e(_,{props:l},{default:a(()=>[e(w,{color:l.row.activo?"positive":"grey-6"},{default:a(()=>[i(u(l.row.activo?"Activo":"Inactivo"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","loading"])]),_:1})}const j=k(S,[["render",N]]);export{j as default};
