import{_ as x,c as u,o as d,w as s,a as n,Q as V,e as Q,b as o,f as v,a4 as P,a5 as m,a6 as k,a7 as b,t as l,a1 as p}from"./index-lPAR6Jhh.js";import{Q as y}from"./QPagination-D095xCo7.js";import{Q as h}from"./QBadge-DbHydDhJ.js";import{Q as C}from"./QMarkupTable-CioHdnf4.js";import{Q as q}from"./QPage-DE3LyCWt.js";import{h as g}from"./moment-C5S46NFB.js";import"./format-BvkBI9bc.js";const B={name:"ProductosVencidos",data(){return{productos:[],loading:!1,pagina:1,porPagina:10,total:0}},mounted(){this.consultar()},methods:{consultar(){this.loading=!0,this.$axios.get("/productosVencidos",{params:{page:this.pagina,per_page:this.porPagina}}).then(r=>{this.productos=r.data.data,this.total=r.data.total}).catch(()=>{this.$alert.error("Error al consultar productos vencidos")}).finally(()=>{this.loading=!1})},diasVencido(r){const e=g(r),i=g().diff(e,"days");return i<0?0:i}}},N={class:"row q-col-gutter-sm"},w={class:"col-6"},E={class:"col-6 text-right"};function z(r,e,f,i,t,c){return d(),u(q,{class:"q-pa-xs"},{default:s(()=>[n(V,{flat:"",bordered:""},{default:s(()=>[n(Q,{class:"q-pa-xs"},{default:s(()=>[e[2]||(e[2]=o("div",{class:"text-h6"},"Productos Vencidos",-1)),o("div",N,[o("div",w,[n(v,{label:"Actualizar",color:"red",icon:"refresh",onClick:c.consultar,loading:t.loading,"no-caps":""},null,8,["onClick","loading"])]),o("div",E,[t.total>t.porPagina?(d(),u(y,{key:0,modelValue:t.pagina,"onUpdate:modelValue":[e[0]||(e[0]=a=>t.pagina=a),c.consultar],max:Math.ceil(t.total/t.porPagina),"max-pages":"6",size:"sm","boundary-numbers":"","direction-links":"",color:"red"},null,8,["modelValue","max","onUpdate:modelValue"])):P("",!0)])]),n(C,{dense:"",class:"q-mt-md",flat:"",bordered:""},{default:s(()=>[e[1]||(e[1]=o("thead",null,[o("tr",null,[o("th",null,"#"),o("th",null,"Producto"),o("th",null,"Cantidad"),o("th",null,"Lote"),o("th",null,"Fecha de Vencimiento"),o("th",null,"Estado"),o("th",null,"Días vencido")])],-1)),o("tbody",null,[(d(!0),m(k,null,b(t.productos,(a,_)=>(d(),m("tr",{key:a.id},[o("td",null,l((t.pagina-1)*t.porPagina+_+1),1),o("td",null,l(a.producto?.nombre),1),o("td",null,l(a.cantidad),1),o("td",null,l(a.lote),1),o("td",null,l(a.fecha_vencimiento),1),o("td",null,[n(h,{color:a.estado==="Activo"?"green":"red",class:"q-pa-xs"},{default:s(()=>[p(l(a.estado),1)]),_:2},1032,["color"])]),o("td",null,[n(h,{color:"negative",class:"q-pa-xs"},{default:s(()=>[p(l(c.diasVencido(a.fecha_vencimiento))+" días ",1)]),_:2},1024)])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})}const U=x(B,[["render",z]]);export{U as default};
