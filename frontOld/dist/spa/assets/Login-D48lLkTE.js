import{Q as q}from"./QImg-D1sKr7CE.js";import{_ as V,g as I,r,x as S,c as $,o as C,w as t,a as s,b as o,Q as k,e as p,a1 as v,ap as x,aq as b,d as c,an as _,f as g,t as B}from"./index-lPAR6Jhh.js";import{Q as N}from"./QSpace-CQPUmHlq.js";import{Q as z}from"./QForm-BUxmvV0f.js";import{Q as F}from"./QPage-DE3LyCWt.js";import{Q as L,a as E}from"./QLayout-B9h1G3KC.js";import"./QResizeObserver-CKgEc0WY.js";const P={class:"row items-center q-mt-sm q-mb-md"},U={class:"text-body2"},A={class:"text-caption text-grey-6"},D={__name:"Login",setup(O){const{proxy:l}=I(),d=r(""),u=r(""),n=r(!1),f=r(!1),m=r(!1),y=S(()=>new Date().getFullYear());function Q(){m.value=!0,l.$axios.post("/login",{username:d.value,password:u.value}).then(i=>{const{user:e,token:a}=i.data;l.$axios.defaults.headers.common.Authorization=`Bearer ${a}`,l.$store.isLogged=!0,l.$store.user=e,l.$store.permissions=(e.permissions||[]).map(w=>w.name),localStorage.setItem("tokenSofiaFactu",a),localStorage.setItem("user",JSON.stringify(e)),l.$alert.success("Bienvenido ",e.name),l.$router.push("/")}).catch(i=>{l.$alert.error(i?.response?.data?.message||"Error de autenticación","Error")}).finally(()=>{m.value=!1})}return(i,e)=>(C(),$(E,{class:"login-layout"},{default:t(()=>[s(L,null,{default:t(()=>[s(F,{class:"full-height"},{default:t(()=>[e[11]||(e[11]=o("div",{class:"login-bg-overlay"},null,-1)),s(z,{onSubmit:Q,class:"login-wrap"},{default:t(()=>[s(k,{flat:"",bordered:"",class:"login-card"},{default:t(()=>[s(p,{class:"q-pt-lg text-center"},{default:t(()=>[s(q,{src:"logo.png",width:"110px",class:"q-mb-sm",ratio:"1",fit:"contain"}),e[4]||(e[4]=o("br",null,null,-1)),e[5]||(e[5]=o("div",{class:"text-subtitle2 text-grey-7 brand-chip"},[o("b",null,"Sofía"),v(" · Área Fresca ")],-1))]),_:1}),s(x,{spaced:""}),s(p,{class:"q-pt-none"},{default:t(()=>[e[6]||(e[6]=o("div",{class:"text-h6 text-bold q-mb-xs"},"Iniciar sesión",-1)),e[7]||(e[7]=o("div",{class:"text-body2 text-grey-7 q-mb-md"}," Accede al panel de administración usando tus credenciales. ",-1)),e[8]||(e[8]=o("div",{class:"q-mb-sm text-caption text-grey-7"},"Nombre de usuario",-1)),s(b,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),outlined:"",dense:"",placeholder:"Nombre de usuario",rules:[a=>!!a||"Ingrese su nombre de usuario"],class:"q-mb-md"},{prepend:t(()=>[s(c,{name:"account_circle",size:"18px"})]),_:1},8,["modelValue","rules"]),e[9]||(e[9]=o("div",{class:"q-mb-sm text-caption text-grey-7"},"Contraseña",-1)),s(b,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a),outlined:"",dense:"",type:n.value?"text":"password",placeholder:"Contraseña",rules:[a=>!!a||"Ingrese su contraseña"]},{prepend:t(()=>[s(c,{name:"lock",size:"18px"})]),append:t(()=>[s(c,{name:n.value?"visibility":"visibility_off",size:"18px",class:"cursor-pointer",onClick:e[1]||(e[1]=a=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),o("div",P,[s(_,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=a=>f.value=a),label:"Recuérdame",color:"primary",dense:""},null,8,["modelValue"]),s(N),s(g,{flat:"",dense:"","no-caps":"",class:"text-weight-medium link-muted",label:"¿Olvidaste tu contraseña?"})]),s(g,{color:"primary",label:"Iniciar sesión",class:"full-width btnLogin","no-caps":"",unelevated:"",size:"16px",loading:m.value,type:"submit"},null,8,["loading"])]),_:1}),s(p,{class:"q-pt-none text-center"},{default:t(()=>[o("div",U,[e[10]||(e[10]=v(" ¿Eres usuario nuevo? ")),s(g,{flat:"",dense:"","no-caps":"",class:"text-weight-medium",label:"Regístrate"})]),s(x,{spaced:""}),o("div",A," © "+B(y.value)+" Sofía · Área Fresca. Todos los derechos reservados. ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},H=V(D,[["__scopeId","data-v-47b14879"]]);export{H as default};
