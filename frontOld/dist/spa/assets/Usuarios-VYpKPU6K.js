import{v as ne,x as g,j as c,y as ye,g as se,C as Mt,d as $,a9 as zt,r as Y,p as z,aa as jt,ab as Ze,k as nt,l as st,ac as It,ad as Ht,m as it,ae as ut,af as Gt,S as ct,U as dt,ag as Wt,ah as Kt,ai as Je,aj as Le,ak as Ye,al as Xt,q as vt,am as Zt,an as Te,ao as ee,f as T,ap as Jt,_ as Yt,c as D,o as F,w as v,a as n,b as U,a5 as te,a4 as Be,a6 as De,a7 as Qe,a1 as E,t as X,a3 as el,Z as le,aq as H,h as Ae,Q as Ne,e as Z,ar as tl,as as ll}from"./index-lPAR6Jhh.js";import{Q as J,a as N}from"./QMenu-B-B1QStO.js";import{a as et,Q as ae}from"./QItemLabel-nqG76Yrv.js";import{Q as Ue}from"./QList-vjswA5vR.js";import{Q as al,C as oe}from"./ClosePopup-IDxrIBrB.js";import{Q as ol}from"./QImg-D1sKr7CE.js";import{Q as rl}from"./QTooltip-DBefQNLx.js";import{Q as tt}from"./QBadge-DbHydDhJ.js";import{Q as nl}from"./QMarkupTable-CioHdnf4.js";import{u as sl,a as il,c as ft,Q as mt}from"./QSelect-CbWjc70L.js";import{Q as Oe}from"./QSpace-CQPUmHlq.js";import{Q as lt}from"./QForm-BUxmvV0f.js";import{Q as ul}from"./QPage-DE3LyCWt.js";import"./rtl-DFPa-2ov.js";import"./format-BvkBI9bc.js";const be=ne({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const r=se(),f=g(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return c("td",{class:f.value},ye(t.default));const o=r.vnode.key,d=(e.props.colsMap!==void 0?e.props.colsMap[o]:null)||e.props.col;if(d===void 0)return;const{row:l}=e.props;return c("td",{class:f.value+d.__tdClass(l),style:d.__tdStyle(l)},ye(t.default))}}}),cl=ne({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:r}){const f=se(),{proxy:{$q:o}}=f,d=l=>{r("click",l)};return()=>{if(e.props===void 0)return c("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:d},ye(t.default));let l,i;const m=f.vnode.key;if(m){if(l=e.props.colsMap[m],l===void 0)return}else l=e.props.col;if(l.sortable===!0){const s=l.align==="right"?"unshift":"push";i=Mt(t.default,[]),i[s](c($,{class:l.__iconClass,name:o.iconSet.table.arrowUp}))}else i=ye(t.default);const w={class:l.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:l.headerStyle,onClick:s=>{l.sortable===!0&&e.props.sort(l),d(s)}};return c("th",w,i)}}});function gt(e,t){return c("div",e,[c("table",{class:"q-table"},t)])}const dl={list:Ue,table:nl},vl=["list","table","__qtable"],fl=ne({name:"QVirtualScroll",props:{...sl,type:{type:String,default:"list",validator:e=>vl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:zt},setup(e,{slots:t,attrs:r}){let f;const o=Y(null),d=g(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:l,localResetVirtualScroll:i,padVirtualScroll:m,onVirtualScrollEvt:w}=il({virtualScrollLength:d,getVirtualScrollTarget:p,getVirtualScrollEl:k}),s=g(()=>{if(d.value===0)return[];const A=(O,V)=>({index:l.value.from+V,item:O});return e.itemsFn===void 0?e.items.slice(l.value.from,l.value.to).map(A):e.itemsFn(l.value.from,l.value.to-l.value.from).map(A)}),S=g(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),P=g(()=>e.scrollTarget!==void 0?{}:{tabindex:0});z(d,()=>{i()}),z(()=>e.scrollTarget,()=>{C(),_()});function k(){return o.value.$el||o.value}function p(){return f}function _(){f=jt(k(),e.scrollTarget),f.addEventListener("scroll",w,Ze.passive)}function C(){f!==void 0&&(f.removeEventListener("scroll",w,Ze.passive),f=void 0)}function Q(){let A=m(e.type==="list"?"div":"tbody",s.value.map(t.default));return t.before!==void 0&&(A=t.before().concat(A)),ut(t.after,A)}return nt(()=>{i()}),st(()=>{_()}),It(()=>{_()}),Ht(()=>{C()}),it(()=>{C()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?gt({ref:o,class:"q-table__middle "+S.value},Q()):c(dl[e.type],{...r,ref:o,class:[r.class,S.value],...P.value},Q)}}}),ml={xs:2,sm:4,md:6,lg:10,xl:14};function at(e,t,r){return{transform:t===!0?`translateX(${r.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const gl=ne({name:"QLinearProgress",props:{...ct,...Gt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:r}=se(),f=dt(e,r.$q),o=Wt(e,ml),d=g(()=>e.indeterminate===!0||e.query===!0),l=g(()=>e.reverse!==e.query),i=g(()=>({...o.value!==null?o.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),m=g(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),w=g(()=>at(e.buffer!==void 0?e.buffer:1,l.value,r.$q)),s=g(()=>`with${e.instantFeedback===!0?"out":""}-transition`),S=g(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${s.value} q-linear-progress__track--${f.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),P=g(()=>at(d.value===!0?1:e.value,l.value,r.$q)),k=g(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${s.value} q-linear-progress__model--${d.value===!0?"in":""}determinate`),p=g(()=>({width:`${e.value*100}%`})),_=g(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${s.value}`);return()=>{const C=[c("div",{class:S.value,style:w.value}),c("div",{class:k.value,style:P.value})];return e.stripe===!0&&d.value===!1&&C.push(c("div",{class:_.value,style:p.value})),c("div",{class:m.value,style:i.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},ut(t.default,C))}}});let re=0;const bl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},hl=["update:fullscreen","fullscreen"];function yl(){const e=se(),{props:t,emit:r,proxy:f}=e;let o,d,l;const i=Y(!1);Kt(e)===!0&&z(()=>f.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&s()}),z(()=>t.fullscreen,S=>{i.value!==S&&m()}),z(i,S=>{r("update:fullscreen",S),r("fullscreen",S)});function m(){i.value===!0?s():w()}function w(){i.value!==!0&&(i.value=!0,l=f.$el.parentNode,l.replaceChild(d,f.$el),document.body.appendChild(f.$el),re++,re===1&&document.body.classList.add("q-body--fullscreen-mixin"),o={handler:s},Je.add(o))}function s(){i.value===!0&&(o!==void 0&&(Je.remove(o),o=void 0),l.replaceChild(f.$el,d),i.value=!1,re=Math.max(0,re-1),re===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),f.$el.scrollIntoView!==void 0&&setTimeout(()=>{f.$el.scrollIntoView()})))}return nt(()=>{d=document.createElement("span")}),st(()=>{t.fullscreen===!0&&w()}),it(s),Object.assign(f,{toggleFullscreen:m,setFullscreen:w,exitFullscreen:s}),{inFullscreen:i,toggleFullscreen:m}}function Sl(e,t){return new Date(e)-new Date(t)}const wl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Cl(e,t,r,f){const o=g(()=>{const{sortBy:i}=t.value;return i&&r.value.find(m=>m.name===i)||null}),d=g(()=>e.sortMethod!==void 0?e.sortMethod:(i,m,w)=>{const s=r.value.find(k=>k.name===m);if(s===void 0||s.field===void 0)return i;const S=w===!0?-1:1,P=typeof s.field=="function"?k=>s.field(k):k=>k[s.field];return i.sort((k,p)=>{let _=P(k),C=P(p);return s.rawSort!==void 0?s.rawSort(_,C,k,p)*S:_==null?-1*S:C==null?1*S:s.sort!==void 0?s.sort(_,C,k,p)*S:Le(_)===!0&&Le(C)===!0?(_-C)*S:Ye(_)===!0&&Ye(C)===!0?Sl(_,C)*S:typeof _=="boolean"&&typeof C=="boolean"?(_-C)*S:([_,C]=[_,C].map(Q=>(Q+"").toLocaleString().toLowerCase()),_<C?-1*S:_===C?0:S)})});function l(i){let m=e.columnSortOrder;if(Xt(i)===!0)i.sortOrder&&(m=i.sortOrder),i=i.name;else{const S=r.value.find(P=>P.name===i);S?.sortOrder&&(m=S.sortOrder)}let{sortBy:w,descending:s}=t.value;w!==i?(w=i,s=m==="da"):e.binaryStateSort===!0?s=!s:s===!0?m==="ad"?w=null:s=!1:m==="ad"?s=!0:w=null,f({sortBy:w,descending:s,page:1})}return{columnToSort:o,computedSortMethod:d,sort:l}}const _l={filter:[String,Object],filterMethod:Function};function Pl(e,t){const r=g(()=>e.filterMethod!==void 0?e.filterMethod:(f,o,d,l)=>{const i=o?o.toLowerCase():"";return f.filter(m=>d.some(w=>{const s=l(w,m)+"";return(s==="undefined"||s==="null"?"":s.toLowerCase()).indexOf(i)!==-1}))});return z(()=>e.filter,()=>{vt(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:r}}function kl(e,t){for(const r in t)if(t[r]!==e[r])return!1;return!0}function ot(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const pl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function ql(e,t){const{props:r,emit:f}=e,o=Y(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:r.rowsPerPageOptions.length!==0?r.rowsPerPageOptions[0]:5},r.pagination)),d=g(()=>{const s=r["onUpdate:pagination"]!==void 0?{...o.value,...r.pagination}:o.value;return ot(s)}),l=g(()=>d.value.rowsNumber!==void 0);function i(s){m({pagination:s,filter:r.filter})}function m(s={}){vt(()=>{f("request",{pagination:s.pagination||d.value,filter:s.filter||r.filter,getCellValue:t})})}function w(s,S){const P=ot({...d.value,...s});if(kl(d.value,P)===!0){l.value===!0&&S===!0&&i(P);return}if(l.value===!0){i(P);return}r.pagination!==void 0&&r["onUpdate:pagination"]!==void 0?f("update:pagination",P):o.value=P}return{innerPagination:o,computedPagination:d,isServerSide:l,requestServerInteraction:m,setPagination:w}}function xl(e,t,r,f,o,d){const{props:l,emit:i,proxy:{$q:m}}=e,w=g(()=>f.value===!0?r.value.rowsNumber||0:d.value),s=g(()=>{const{page:V,rowsPerPage:B}=r.value;return(V-1)*B}),S=g(()=>{const{page:V,rowsPerPage:B}=r.value;return V*B}),P=g(()=>r.value.page===1),k=g(()=>r.value.rowsPerPage===0?1:Math.max(1,Math.ceil(w.value/r.value.rowsPerPage))),p=g(()=>S.value===0?!0:r.value.page>=k.value),_=g(()=>(l.rowsPerPageOptions.includes(t.value.rowsPerPage)?l.rowsPerPageOptions:[t.value.rowsPerPage].concat(l.rowsPerPageOptions)).map(B=>({label:B===0?m.lang.table.allRows:""+B,value:B})));z(k,(V,B)=>{if(V===B)return;const ie=r.value.page;V&&!ie?o({page:1}):V<ie&&o({page:V})});function C(){o({page:1})}function Q(){const{page:V}=r.value;V>1&&o({page:V-1})}function A(){const{page:V,rowsPerPage:B}=r.value;S.value>0&&V*B<w.value&&o({page:V+1})}function O(){o({page:k.value})}return l["onUpdate:pagination"]!==void 0&&i("update:pagination",{...r.value}),{firstRowIndex:s,lastRowIndex:S,isFirstPage:P,isLastPage:p,pagesNumber:k,computedRowsPerPageOptions:_,computedRowsNumber:w,firstPage:C,prevPage:Q,nextPage:A,lastPage:O}}const Rl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Vl=["update:selected","selection"];function Fl(e,t,r,f){const o=g(()=>{const p={};return e.selected.map(f.value).forEach(_=>{p[_]=!0}),p}),d=g(()=>e.selection!=="none"),l=g(()=>e.selection==="single"),i=g(()=>e.selection==="multiple"),m=g(()=>r.value.length!==0&&r.value.every(p=>o.value[f.value(p)]===!0)),w=g(()=>m.value!==!0&&r.value.some(p=>o.value[f.value(p)]===!0)),s=g(()=>e.selected.length);function S(p){return o.value[p]===!0}function P(){t("update:selected",[])}function k(p,_,C,Q){t("selection",{rows:_,added:C,keys:p,evt:Q});const A=l.value===!0?C===!0?_:[]:C===!0?e.selected.concat(_):e.selected.filter(O=>p.includes(f.value(O))===!1);t("update:selected",A)}return{hasSelectionMode:d,singleSelection:l,multipleSelection:i,allRowsSelected:m,someRowsSelected:w,rowsSelectedNumber:s,isRowSelected:S,clearSelection:P,updateSelection:k}}function rt(e){return Array.isArray(e)?e.slice():[]}const Tl={expanded:Array},Bl=["update:expanded"];function Dl(e,t){const r=Y(rt(e.expanded));z(()=>e.expanded,l=>{r.value=rt(l)});function f(l){return r.value.includes(l)}function o(l){e.expanded!==void 0?t("update:expanded",l):r.value=l}function d(l,i){const m=r.value.slice(),w=m.indexOf(l);i===!0?w===-1&&(m.push(l),o(m)):w!==-1&&(m.splice(w,1),o(m))}return{isRowExpanded:f,setExpanded:o,updateExpanded:d}}const Ql={visibleColumns:Array};function Al(e,t,r){const f=g(()=>{if(e.columns!==void 0)return e.columns;const i=e.rows[0];return i!==void 0?Object.keys(i).map(m=>({name:m,label:m.toUpperCase(),field:m,align:Le(i[m])?"right":"left",sortable:!0})):[]}),o=g(()=>{const{sortBy:i,descending:m}=t.value;return(e.visibleColumns!==void 0?f.value.filter(s=>s.required===!0||e.visibleColumns.includes(s.name)===!0):f.value).map(s=>{const S=s.align||"right",P=`text-${S}`;return{...s,align:S,__iconClass:`q-table__sort-icon q-table__sort-icon--${S}`,__thClass:P+(s.headerClasses!==void 0?" "+s.headerClasses:"")+(s.sortable===!0?" sortable":"")+(s.name===i?` sorted ${m===!0?"sort-desc":""}`:""),__tdStyle:s.style!==void 0?typeof s.style!="function"?()=>s.style:s.style:()=>null,__tdClass:s.classes!==void 0?typeof s.classes!="function"?()=>P+" "+s.classes:k=>P+" "+s.classes(k):()=>P}})}),d=g(()=>{const i={};return o.value.forEach(m=>{i[m.name]=m}),i}),l=g(()=>e.tableColspan!==void 0?e.tableColspan:o.value.length+(r.value===!0?1:0));return{colList:f,computedCols:o,computedColsMap:d,computedColspan:l}}const he="q-table__bottom row items-center",bt={};ft.forEach(e=>{bt[e]={}});const Nl=ne({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...bt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...ct,...bl,...Ql,..._l,...pl,...Tl,...Rl,...wl},emits:["request","virtualScroll",...hl,...Bl,...Vl],setup(e,{slots:t,emit:r}){const f=se(),{proxy:{$q:o}}=f,d=dt(e,o),{inFullscreen:l,toggleFullscreen:i}=yl(),m=g(()=>typeof e.rowKey=="function"?e.rowKey:a=>a[e.rowKey]),w=Y(null),s=Y(null),S=g(()=>e.grid!==!0&&e.virtualScroll===!0),P=g(()=>" q-table__card"+(d.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),k=g(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":P.value)+(d.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(l.value===!0?" fullscreen scroll":"")),p=g(()=>k.value+(e.loading===!0?" q-table--loading":""));z(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+k.value,()=>{S.value===!0&&s.value?.reset()});const{innerPagination:_,computedPagination:C,isServerSide:Q,requestServerInteraction:A,setPagination:O}=ql(f,W),{computedFilterMethod:V}=Pl(e,O),{isRowExpanded:B,setExpanded:ie,updateExpanded:ht}=Dl(e,r),Se=g(()=>{let a=e.rows;if(Q.value===!0||a.length===0)return a;const{sortBy:u,descending:b}=C.value;return e.filter&&(a=V.value(a,e.filter,M.value,W)),_t.value!==null&&(a=Pt.value(e.rows===a?a.slice():a,u,b)),a}),Ee=g(()=>Se.value.length),j=g(()=>{let a=Se.value;if(Q.value===!0)return a;const{rowsPerPage:u}=C.value;return u!==0&&(ce.value===0&&e.rows!==a?a.length>de.value&&(a=a.slice(0,de.value)):a=a.slice(ce.value,de.value)),a}),{hasSelectionMode:G,singleSelection:yt,multipleSelection:$e,allRowsSelected:St,someRowsSelected:Me,rowsSelectedNumber:we,isRowSelected:Ce,clearSelection:wt,updateSelection:ue}=Fl(e,r,j,m),{colList:Ct,computedCols:M,computedColsMap:ze,computedColspan:je}=Al(e,C,G),{columnToSort:_t,computedSortMethod:Pt,sort:_e}=Cl(e,C,Ct,O),{firstRowIndex:ce,lastRowIndex:de,isFirstPage:Pe,isLastPage:ke,pagesNumber:ve,computedRowsPerPageOptions:kt,computedRowsNumber:fe,firstPage:pe,prevPage:qe,nextPage:xe,lastPage:Re}=xl(f,_,C,Q,O,Ee),pt=g(()=>j.value.length===0),qt=g(()=>{const a={};return ft.forEach(u=>{a[u]=e[u]}),a.virtualScrollItemSize===void 0&&(a.virtualScrollItemSize=e.dense===!0?28:48),a});function xt(){S.value===!0&&s.value.reset()}function Rt(){if(e.grid===!0)return Et();const a=e.hideHeader!==!0?Ke:null;if(S.value===!0){const b=t["top-row"],h=t["bottom-row"],y={default:R=>He(R.item,t.body,R.index)};if(b!==void 0){const R=c("tbody",b({cols:M.value}));y.before=a===null?()=>R:()=>[a()].concat(R)}else a!==null&&(y.before=a);return h!==void 0&&(y.after=()=>c("tbody",h({cols:M.value}))),c(fl,{ref:s,class:e.tableClass,style:e.tableStyle,...qt.value,scrollTarget:e.virtualScrollTarget,items:j.value,type:"__qtable",tableColspan:je.value,onVirtualScroll:Ft},y)}const u=[Tt()];return a!==null&&u.unshift(a()),gt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},u)}function Vt(a,u){if(s.value!==null){s.value.scrollTo(a,u);return}a=parseInt(a,10);const b=w.value.querySelector(`tbody tr:nth-of-type(${a+1})`);if(b!==null){const h=w.value.querySelector(".q-table__middle.scroll"),y=b.offsetTop-e.virtualScrollStickySizeStart,R=y<h.scrollTop?"decrease":"increase";h.scrollTop=y,r("virtualScroll",{index:a,from:0,to:_.value.rowsPerPage-1,direction:R})}}function Ft(a){r("virtualScroll",a)}function Ie(){return[c(gl,{class:"q-table__linear-progress",color:e.color,dark:d.value,indeterminate:!0,trackColor:"transparent"})]}function He(a,u,b){const h=m.value(a),y=Ce(h);if(u!==void 0){const x={key:h,row:a,pageIndex:b,__trClass:y?"selected":""};if(e.tableRowStyleFn!==void 0&&(x.__trStyle=e.tableRowStyleFn(a)),e.tableRowClassFn!==void 0){const I=e.tableRowClassFn(a);I&&(x.__trClass=`${I} ${x.__trClass}`)}return u(Ge(x))}const R=t["body-cell"],q=M.value.map(x=>{const I=t[`body-cell-${x.name}`],ge=I!==void 0?I:R;return ge!==void 0?ge(Bt({key:h,row:a,pageIndex:b,col:x})):c("td",{class:x.__tdClass(a),style:x.__tdStyle(a)},W(x,a))});if(G.value===!0){const x=t["body-selection"],I=x!==void 0?x(Dt({key:h,row:a,pageIndex:b})):[c(Te,{modelValue:y,color:e.color,dark:d.value,dense:e.dense,"onUpdate:modelValue":(ge,$t)=>{ue([h],[a],ge,$t)}})];q.unshift(c("td",{class:"q-table--col-auto-width"},I))}const L={key:h,class:{selected:y}};if(e.onRowClick!==void 0&&(L.class["cursor-pointer"]=!0,L.onClick=x=>{r("rowClick",x,a,b)}),e.onRowDblclick!==void 0&&(L.class["cursor-pointer"]=!0,L.onDblclick=x=>{r("rowDblclick",x,a,b)}),e.onRowContextmenu!==void 0&&(L.class["cursor-pointer"]=!0,L.onContextmenu=x=>{r("rowContextmenu",x,a,b)}),e.tableRowStyleFn!==void 0&&(L.style=e.tableRowStyleFn(a)),e.tableRowClassFn!==void 0){const x=e.tableRowClassFn(a);x&&(L.class[x]=!0)}return c("tr",L,q)}function Tt(){const a=t.body,u=t["top-row"],b=t["bottom-row"];let h=j.value.map((y,R)=>He(y,a,R));return u!==void 0&&(h=u({cols:M.value}).concat(h)),b!==void 0&&(h=h.concat(b({cols:M.value}))),c("tbody",h)}function Ge(a){return Ve(a),a.cols=a.cols.map(u=>ee({...u},"value",()=>W(u,a.row))),a}function Bt(a){return Ve(a),ee(a,"value",()=>W(a.col,a.row)),a}function Dt(a){return Ve(a),a}function Ve(a){Object.assign(a,{cols:M.value,colsMap:ze.value,sort:_e,rowIndex:ce.value+a.pageIndex,color:e.color,dark:d.value,dense:e.dense}),G.value===!0&&ee(a,"selected",()=>Ce(a.key),(u,b)=>{ue([a.key],[a.row],u,b)}),ee(a,"expand",()=>B(a.key),u=>{ht(a.key,u)})}function W(a,u){const b=typeof a.field=="function"?a.field(u):u[a.field];return a.format!==void 0?a.format(b,u):b}const K=g(()=>({pagination:C.value,pagesNumber:ve.value,isFirstPage:Pe.value,isLastPage:ke.value,firstPage:pe,prevPage:qe,nextPage:xe,lastPage:Re,inFullscreen:l.value,toggleFullscreen:i}));function Qt(){const a=t.top,u=t["top-left"],b=t["top-right"],h=t["top-selection"],y=G.value===!0&&h!==void 0&&we.value>0,R="q-table__top relative-position row items-center";if(a!==void 0)return c("div",{class:R},[a(K.value)]);let q;if(y===!0?q=h(K.value).slice():(q=[],u!==void 0?q.push(c("div",{class:"q-table__control"},[u(K.value)])):e.title&&q.push(c("div",{class:"q-table__control"},[c("div",{class:["q-table__title",e.titleClass]},e.title)]))),b!==void 0&&(q.push(c("div",{class:"q-table__separator col"})),q.push(c("div",{class:"q-table__control"},[b(K.value)]))),q.length!==0)return c("div",{class:R},q)}const We=g(()=>Me.value===!0?null:St.value);function Ke(){const a=At();return e.loading===!0&&t.loading===void 0&&a.push(c("tr",{class:"q-table__progress"},[c("th",{class:"relative-position",colspan:je.value},Ie())])),c("thead",a)}function At(){const a=t.header,u=t["header-cell"];if(a!==void 0)return a(Fe({header:!0})).slice();const b=M.value.map(h=>{const y=t[`header-cell-${h.name}`],R=y!==void 0?y:u,q=Fe({col:h});return R!==void 0?R(q):c(cl,{key:h.name,props:q},()=>h.label)});if(yt.value===!0&&e.grid!==!0)b.unshift(c("th",{class:"q-table--col-auto-width"}," "));else if($e.value===!0){const h=t["header-selection"],y=h!==void 0?h(Fe({})):[c(Te,{color:e.color,modelValue:We.value,dark:d.value,dense:e.dense,"onUpdate:modelValue":Xe})];b.unshift(c("th",{class:"q-table--col-auto-width"},y))}return[c("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},b)]}function Fe(a){return Object.assign(a,{cols:M.value,sort:_e,colsMap:ze.value,color:e.color,dark:d.value,dense:e.dense}),$e.value===!0&&ee(a,"selected",()=>We.value,Xe),a}function Xe(a){Me.value===!0&&(a=!1),ue(j.value.map(m.value),j.value,a)}const me=g(()=>{const a=[e.iconFirstPage||o.iconSet.table.firstPage,e.iconPrevPage||o.iconSet.table.prevPage,e.iconNextPage||o.iconSet.table.nextPage,e.iconLastPage||o.iconSet.table.lastPage];return o.lang.rtl===!0?a.reverse():a});function Nt(){if(e.hideBottom===!0)return;if(pt.value===!0){if(e.hideNoData===!0)return;const b=e.loading===!0?e.loadingLabel||o.lang.table.loading:e.filter?e.noResultsLabel||o.lang.table.noResults:e.noDataLabel||o.lang.table.noData,h=t["no-data"],y=h!==void 0?[h({message:b,icon:o.iconSet.table.warning,filter:e.filter})]:[c($,{class:"q-table__bottom-nodata-icon",name:o.iconSet.table.warning}),b];return c("div",{class:he+" q-table__bottom--nodata"},y)}const a=t.bottom;if(a!==void 0)return c("div",{class:he},[a(K.value)]);const u=e.hideSelectedBanner!==!0&&G.value===!0&&we.value>0?[c("div",{class:"q-table__control"},[c("div",[(e.selectedRowsLabel||o.lang.table.selectedRecords)(we.value)])])]:[];if(e.hidePagination!==!0)return c("div",{class:he+" justify-end"},Lt(u));if(u.length!==0)return c("div",{class:he},u)}function Ot(a){O({page:1,rowsPerPage:a.value})}function Lt(a){let u;const{rowsPerPage:b}=C.value,h=e.paginationLabel||o.lang.table.pagination,y=t.pagination,R=e.rowsPerPageOptions.length>1;if(a.push(c("div",{class:"q-table__separator col"})),R===!0&&a.push(c("div",{class:"q-table__control"},[c("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||o.lang.table.recordsPerPage]),c(mt,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:b,options:kt.value,displayValue:b===0?o.lang.table.allRows:b,dark:d.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Ot})])),y!==void 0)u=y(K.value);else if(u=[c("span",b!==0?{class:"q-table__bottom-item"}:{},[b?h(ce.value+1,Math.min(de.value,fe.value),fe.value):h(1,Ee.value,fe.value)])],b!==0&&ve.value>1){const q={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(q.size="sm"),ve.value>2&&u.push(c(T,{key:"pgFirst",...q,icon:me.value[0],disable:Pe.value,ariaLabel:o.lang.pagination.first,onClick:pe})),u.push(c(T,{key:"pgPrev",...q,icon:me.value[1],disable:Pe.value,ariaLabel:o.lang.pagination.prev,onClick:qe}),c(T,{key:"pgNext",...q,icon:me.value[2],disable:ke.value,ariaLabel:o.lang.pagination.next,onClick:xe})),ve.value>2&&u.push(c(T,{key:"pgLast",...q,icon:me.value[3],disable:ke.value,ariaLabel:o.lang.pagination.last,onClick:Re}))}return a.push(c("div",{class:"q-table__control"},u)),a}function Ut(){const a=e.gridHeader===!0?[c("table",{class:"q-table"},[Ke()])]:e.loading===!0&&t.loading===void 0?Ie():void 0;return c("div",{class:"q-table__middle"},a)}function Et(){const a=t.item!==void 0?t.item:u=>{const b=u.cols.map(y=>c("div",{class:"q-table__grid-item-row"},[c("div",{class:"q-table__grid-item-title"},[y.label]),c("div",{class:"q-table__grid-item-value"},[y.value])]));if(G.value===!0){const y=t["body-selection"],R=y!==void 0?y(u):[c(Te,{modelValue:u.selected,color:e.color,dark:d.value,dense:e.dense,"onUpdate:modelValue":(q,L)=>{ue([u.key],[u.row],q,L)}})];b.unshift(c("div",{class:"q-table__grid-item-row"},R),c(Jt,{dark:d.value}))}const h={class:["q-table__grid-item-card"+P.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(h.style=[h.style,e.cardStyleFn(u.row)]),e.cardClassFn!==void 0){const y=e.cardClassFn(u.row);y&&(h.class[0]+=` ${y}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(h.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(h.onClick=y=>{r("RowClick",y,u.row,u.pageIndex)}),e.onRowDblclick!==void 0&&(h.onDblclick=y=>{r("RowDblclick",y,u.row,u.pageIndex)}),e.onRowContextmenu!==void 0&&(h.onContextmenu=y=>{r("rowContextmenu",y,u.row,u.pageIndex)})),c("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(u.selected===!0?" q-table__grid-item--selected":"")},[c("div",h,b)])};return c("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},j.value.map((u,b)=>a(Ge({key:m.value(u),row:u,pageIndex:b}))))}return Object.assign(f.proxy,{requestServerInteraction:A,setPagination:O,firstPage:pe,prevPage:qe,nextPage:xe,lastPage:Re,isRowSelected:Ce,clearSelection:wt,isRowExpanded:B,setExpanded:ie,sort:_e,resetVirtualScroll:xt,scrollTo:Vt,getCellValue:W}),Zt(f.proxy,{filteredSortedRows:()=>Se.value,computedRows:()=>j.value,computedRowsNumber:()=>fe.value}),()=>{const a=[Qt()],u={ref:w,class:p.value};return e.grid===!0?a.push(Ut()):Object.assign(u,{class:[u.class,e.cardClass],style:e.cardStyle}),a.push(Rt(),Nt()),e.loading===!0&&t.loading!==void 0&&a.push(t.loading()),c("div",u,a)}}}),Ol={name:"UsuariosPage",data(){return{users:[],user:{},userDialog:!1,loading:!1,actionUser:"",filter:"",roles:["Admin","Usuario"],columns:[{name:"actions",label:"Acciones",align:"center"},{name:"name",label:"Nombre",align:"left",field:"name"},{name:"username",label:"Usuario",align:"left",field:"username"},{name:"avatar",label:"Avatar",align:"left",field:e=>e.avatar},{name:"role",label:"Rol",align:"left",field:"role"},{name:"email",label:"Email",align:"left",field:"email"},{name:"celular",label:"Celular",align:"left",field:"celular"},{name:"permissions",label:"Permisos",align:"left",field:e=>(e.permissions||[]).map(t=>t.name).join(", ")}],permissions:[],dialogPermisos:!1,permFilter:"",cambioAvatarDialogo:!1}},async mounted(){this.usersGet()},methods:{async usersGet(){this.loading=!0;try{const e=await this.$axios.get("users");this.users=e.data}catch(e){this.$alert.error(e.response?.data?.message||"Error cargando usuarios")}finally{this.loading=!1}},userNew(){this.user={name:"",username:"",password:"",role:"Asistente",avatar:"default.png",area:"DNA",zona:"CENTRAL",email:"",celular:""},this.actionUser="Nuevo",this.userDialog=!0},userEdit(e){this.user={...e},this.actionUser="Editar",this.userDialog=!0},userDelete(e){this.$alert.dialog("¿Desea eliminar el usuario?").onOk(async()=>{this.loading=!0;try{await this.$axios.delete("users/"+e),this.$alert.success("Usuario eliminado"),this.usersGet()}catch(t){this.$alert.error(t.response?.data?.message||"No se pudo eliminar")}finally{this.loading=!1}})},userPost(){this.loading=!0,this.$axios.post("users",this.user).then(()=>{this.userDialog=!1,this.$alert.success("Usuario creado"),this.usersGet()}).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo crear")).finally(()=>{this.loading=!1})},userPut(){this.loading=!0,this.$axios.put("users/"+this.user.id,this.user).then(()=>{this.userDialog=!1,this.$alert.success("Usuario actualizado"),this.usersGet()}).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo actualizar")).finally(()=>{this.loading=!1})},onFileChange(e){const t=e.target.files[0],r=new FormData;r.append("avatar",t),this.loading=!0,this.$axios.post(`${this.user.id}/avatar`,r,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.cambioAvatarDialogo=!1,this.$alert.success("Avatar actualizado"),this.usersGet()}).catch(f=>this.$alert.error(f.response?.data?.message||"No se pudo actualizar")).finally(()=>{this.loading=!1})},cambiarAvatar(e){this.cambioAvatarDialogo=!0,this.user={...e}},async permisosShow(e){this.user={...e},this.dialogPermisos=!0,this.loading=!0;try{const t=await this.$axios.get("permissions").then(o=>o.data),r=await this.$axios.get(`users/${e.id}/permissions`).then(o=>o.data),f=new Set(["Usuarios","Impuestos","Productos","Ventas","Nueva Venta","Proveedores","Compras","Nueva Compra","Clientes","Productos por vencer","Productos vencidos","Pedidos","Nuevo Pedido"]);this.permissions=t.filter(o=>f.has(o.name)).map(o=>({...o,checked:r.includes(o.id)}))}catch(t){this.$alert.error(t.response?.data?.message||"Error cargando permisos")}finally{this.loading=!1}},async permisosPost(){this.loading=!0;try{const e=this.permissions.filter(t=>t.checked).map(t=>t.id);await this.$axios.put(`users/${this.user.id}/permissions`,{permissions:e}),this.dialogPermisos=!1,this.$alert.success("Permisos actualizados"),this.usersGet()}catch(e){this.$alert.error(e.response?.data?.message||"No se pudo guardar")}finally{this.loading=!1}},markAll(e){this.permissions=this.permissions.map(t=>({...t,checked:!!e}))},userEditPassword(e){this.user={...e},this.$alert.dialogPrompt("Nueva contraseña","Ingrese la nueva contraseña","password").onOk(t=>{this.$axios.put("updatePassword/"+e.id,{password:t}).then(()=>{this.$alert.success("Contraseña actualizada de "+e.username),this.usersGet()}).catch(r=>this.$alert.error(r.response?.data?.message||"No se pudo actualizar"))})}},computed:{filteredPermissions(){if(!this.permFilter)return this.permissions;const e=this.permFilter.toLowerCase();return this.permissions.filter(t=>t.name.toLowerCase().includes(e))}}},Ll={class:"row items-center q-col-gutter-xs"},Ul={class:"text-left"},El={class:"text-right"},$l={style:{position:"relative"}},Ml=["src"],zl={class:"text-right"},jl={class:"row q-col-gutter-md items-center q-mb-sm"},Il={class:"col"},Hl={class:"col-auto"};function Gl(e,t,r,f,o,d){return F(),D(ul,{class:"q-pa-md"},{default:v(()=>[n(Nl,{rows:o.users,columns:o.columns,dense:"","wrap-cells":"",flat:"",bordered:"","rows-per-page-options":[0],title:"Usuarios",filter:o.filter},{"top-right":v(()=>[n(T,{color:"positive",label:"Nuevo",onClick:d.userNew,"no-caps":"",icon:"add_circle_outline",loading:o.loading,class:"q-mr-sm"},null,8,["onClick","loading"]),n(T,{color:"primary",label:"Actualizar",onClick:d.usersGet,"no-caps":"",icon:"refresh",loading:o.loading,class:"q-mr-sm"},null,8,["onClick","loading"]),n(H,{modelValue:o.filter,"onUpdate:modelValue":t[0]||(t[0]=l=>o.filter=l),label:"Buscar",dense:"",outlined:""},{append:v(()=>[n($,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":v(l=>[n(be,{props:l},{default:v(()=>[n(al,{label:"Opciones","no-caps":"",size:"10px",dense:"",color:"primary"},{default:v(()=>[n(Ue,null,{default:v(()=>[le((F(),D(J,{clickable:"",onClick:i=>d.userEdit(l.row)},{default:v(()=>[n(N,{avatar:""},{default:v(()=>[n($,{name:"edit"})]),_:1}),n(N,null,{default:v(()=>[n(ae,null,{default:v(()=>t[23]||(t[23]=[E("Editar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[oe]]),le((F(),D(J,{clickable:"",onClick:i=>d.userDelete(l.row.id)},{default:v(()=>[n(N,{avatar:""},{default:v(()=>[n($,{name:"delete"})]),_:1}),n(N,null,{default:v(()=>[n(ae,null,{default:v(()=>t[24]||(t[24]=[E("Eliminar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[oe]]),le((F(),D(J,{clickable:"",onClick:i=>d.userEditPassword(l.row)},{default:v(()=>[n(N,{avatar:""},{default:v(()=>[n($,{name:"lock_reset"})]),_:1}),n(N,null,{default:v(()=>[n(ae,null,{default:v(()=>t[25]||(t[25]=[E("Cambiar contraseña")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[oe]]),le((F(),D(J,{clickable:"",onClick:i=>d.cambiarAvatar(l.row)},{default:v(()=>[n(N,{avatar:""},{default:v(()=>[n($,{name:"image"})]),_:1}),n(N,null,{default:v(()=>[n(ae,null,{default:v(()=>t[26]||(t[26]=[E("Cambiar avatar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[oe]]),le((F(),D(J,{clickable:"",onClick:i=>d.permisosShow(l.row)},{default:v(()=>[n(N,{avatar:""},{default:v(()=>[n($,{name:"lock"})]),_:1}),n(N,null,{default:v(()=>[n(ae,null,{default:v(()=>t[27]||(t[27]=[E("Permisos")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[oe]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-role":v(l=>[n(be,{props:l},{default:v(()=>[n(et,{label:l.row.role,color:e.$filters.color(l.row.role),"text-color":"white",dense:"",size:"14px"},null,8,["label","color"])]),_:2},1032,["props"])]),"body-cell-avatar":v(l=>[n(be,{props:l},{default:v(()=>[n(el,{rounded:""},{default:v(()=>[l.row.avatar?(F(),D(ol,{key:0,src:`${e.$url}../../images/${l.row.avatar}`,width:"40",height:"40"},null,8,["src"])):(F(),D($,{key:1,name:"person",size:"40px"}))]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-permissions":v(l=>[n(be,{props:l},{default:v(()=>[U("div",Ll,[(F(!0),te(De,null,Qe((l.row.permissions||[]).slice(0,3),(i,m)=>(F(),D(et,{key:i.id,dense:"",color:"grey-3","text-color":"black",size:"12px",class:"q-mr-xs q-mb-xs"},{default:v(()=>[E(X(i.name),1)]),_:2},1024))),128)),(l.row.permissions||[]).length>3?(F(),D(tt,{key:0,outline:"",color:"primary",class:"q-ml-xs"},{default:v(()=>[E(" +"+X((l.row.permissions||[]).length-3)+" ",1),n(rl,{anchor:"top middle",self:"bottom middle",offset:[0,8]},{default:v(()=>[U("div",Ul,[(F(!0),te(De,null,Qe(l.row.permissions,i=>(F(),te("div",{key:i.id},"• "+X(i.name),1))),128))])]),_:2},1024)]),_:2},1024)):Be("",!0),(l.row.permissions||[]).length?Be("",!0):(F(),D(tt,{key:1,color:"grey-5","text-color":"white",outline:""},{default:v(()=>t[28]||(t[28]=[E(" Sin permisos ")])),_:1}))])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"]),n(Ae,{modelValue:o.userDialog,"onUpdate:modelValue":t[10]||(t[10]=l=>o.userDialog=l),persistent:""},{default:v(()=>[n(Ne,{style:{width:"400px"}},{default:v(()=>[n(Z,{class:"q-pb-none row items-center"},{default:v(()=>[U("div",null,X(o.actionUser)+" usuario",1),n(Oe),n(T,{icon:"close",flat:"",round:"",dense:"",onClick:t[1]||(t[1]=l=>o.userDialog=!1)})]),_:1}),n(Z,{class:"q-pt-none"},{default:v(()=>[n(lt,{onSubmit:t[9]||(t[9]=l=>o.user.id?d.userPut():d.userPost())},{default:v(()=>[n(H,{modelValue:o.user.name,"onUpdate:modelValue":t[2]||(t[2]=l=>o.user.name=l),label:"Nombre",dense:"",outlined:"",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"]),n(H,{modelValue:o.user.username,"onUpdate:modelValue":t[3]||(t[3]=l=>o.user.username=l),label:"Usuario",dense:"",outlined:"",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"]),o.user.id?Be("",!0):(F(),D(H,{key:0,modelValue:o.user.password,"onUpdate:modelValue":t[4]||(t[4]=l=>o.user.password=l),label:"Contraseña",dense:"",outlined:"",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"])),n(mt,{modelValue:o.user.role,"onUpdate:modelValue":t[5]||(t[5]=l=>o.user.role=l),label:"Rol",dense:"",outlined:"",options:o.roles,rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","options","rules"]),n(H,{modelValue:o.user.email,"onUpdate:modelValue":t[6]||(t[6]=l=>o.user.email=l),label:"Email",dense:"",outlined:"",hint:""},null,8,["modelValue"]),n(H,{modelValue:o.user.celular,"onUpdate:modelValue":t[7]||(t[7]=l=>o.user.celular=l),label:"Celular",dense:"",outlined:"",hint:""},null,8,["modelValue"]),U("div",El,[n(T,{color:"negative",label:"Cancelar",onClick:t[8]||(t[8]=l=>o.userDialog=!1),"no-caps":"",loading:o.loading},null,8,["loading"]),n(T,{color:"primary",label:"Guardar",type:"submit","no-caps":"",loading:o.loading,class:"q-ml-sm"},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(Ae,{modelValue:o.cambioAvatarDialogo,"onUpdate:modelValue":t[16]||(t[16]=l=>o.cambioAvatarDialogo=l),persistent:""},{default:v(()=>[n(Ne,null,{default:v(()=>[n(Z,{class:"q-pb-none row items-center text-bold"},{default:v(()=>[t[29]||(t[29]=E(" Cambiar avatar ")),n(Oe),n(T,{icon:"close",flat:"",round:"",dense:"",onClick:t[11]||(t[11]=l=>o.cambioAvatarDialogo=!1)})]),_:1}),n(Z,{class:"q-pt-none"},{default:v(()=>[n(lt,{onSubmit:t[15]||(t[15]=l=>d.userPut())},{default:v(()=>[U("div",null,[U("div",$l,[n(T,{icon:"edit",size:"10px",class:"absolute q-mt-sm q-ml-sm",onClick:t[12]||(t[12]=l=>e.$refs.fileInput.click()),dense:"",outline:"",label:"Cambiar foto","no-caps":""})]),o.user.avatar?(F(),te("img",{key:0,src:`${e.$url}../../images/${o.user.avatar}`,width:"300",height:"300"},null,8,Ml)):(F(),D($,{key:1,name:"person",size:"100px"})),U("input",{ref:"fileInput",type:"file",style:{display:"none"},onChange:t[13]||(t[13]=(...l)=>d.onFileChange&&d.onFileChange(...l)),accept:"image/*"},null,544)]),U("div",zl,[n(T,{color:"negative",label:"Cancelar",onClick:t[14]||(t[14]=l=>o.cambioAvatarDialogo=!1),"no-caps":"",loading:o.loading},null,8,["loading"]),n(T,{color:"primary",label:"Guardar",type:"submit","no-caps":"",loading:o.loading,class:"q-ml-sm"},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(Ae,{modelValue:o.dialogPermisos,"onUpdate:modelValue":t[22]||(t[22]=l=>o.dialogPermisos=l),persistent:""},{default:v(()=>[n(Ne,{style:{"min-width":"460px"}},{default:v(()=>[n(Z,{class:"q-pb-none row items-center text-bold"},{default:v(()=>[E(" Permisos de "+X(o.user.username)+" ",1),n(Oe),n(T,{icon:"close",flat:"",round:"",dense:"",onClick:t[17]||(t[17]=l=>o.dialogPermisos=!1)})]),_:1}),n(Z,{class:"q-pt-none"},{default:v(()=>[U("div",jl,[U("div",Il,[n(H,{modelValue:o.permFilter,"onUpdate:modelValue":t[18]||(t[18]=l=>o.permFilter=l),dense:"",outlined:"",placeholder:"Filtrar permisos... (ej. KPIs, Usuarios)"},{append:v(()=>[n($,{name:"search"})]),_:1},8,["modelValue"])]),U("div",Hl,[n(T,{dense:"",flat:"",icon:"checklist_rtl",label:"Marcar todo",onClick:t[19]||(t[19]=l=>d.markAll(!0))}),n(T,{dense:"",flat:"",icon:"close",label:"Quitar todo",onClick:t[20]||(t[20]=l=>d.markAll(!1))})])]),n(Ue,{dense:"",bordered:""},{default:v(()=>[(F(!0),te(De,null,Qe(d.filteredPermissions,l=>(F(),D(J,{key:l.id},{default:v(()=>[n(N,null,{default:v(()=>[E(X(l.name),1)]),_:2},1024),n(N,{side:""},{default:v(()=>[n(tl,{modelValue:l.checked,"onUpdate:modelValue":i=>l.checked=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),n(ll,{align:"right"},{default:v(()=>[n(T,{color:"negative",label:"Cancelar",onClick:t[21]||(t[21]=l=>o.dialogPermisos=!1),"no-caps":"",loading:o.loading},null,8,["loading"]),n(T,{color:"primary",label:"Guardar",onClick:d.permisosPost,"no-caps":"",loading:o.loading},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const ua=Yt(Ol,[["render",Gl]]);export{ua as default};
