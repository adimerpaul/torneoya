import{_ as Q,c as v,o as u,w as l,a as s,Q as I,e as C,b as a,aa as E,ab as U,f as V,a6 as T,a2 as m,t as d,d as y,a3 as h,a1 as F,a4 as x,a5 as N,Z as g,h as R,aq as q,ac as L}from"./index-CmoW1HI-.js";import{Q as _}from"./QChip-B_XB_8XG.js";import{a as k,b as p}from"./QMenu-j9-YnpjT.js";import{Q as A,C as w}from"./ClosePopup-veQafRnd.js";import{Q as D}from"./QTooltip-BdRl0rZg.js";import{Q as S}from"./QMarkupTable-6CKuV8-r.js";import{Q as B}from"./QSpace-CghvMLQs.js";import{Q as O}from"./QSelect-YWvpHr97.js";import{Q as j}from"./QPage-Dl-a7fNa.js";import"./QItemLabel-BiiYZsTs.js";import"./format-CJebrXOQ.js";const $={name:"DigitadorFactura",data(){const o=new Date().toISOString().slice(0,10);return{fechaInicio:o,fechaFin:o,loading:!1,loadingFacturar:!1,loadingPrintFacturas:!1,loadingPrintVouchers:!1,saving:!1,search:"",soloFactura:!1,ventas:[],pedidosSinVenta:[],stats:{total_ventas:0,monto_total_ventas:0,ventas_facturadas:0,ventas_no_facturadas:0,pendientes_factura:0,pedidos_sin_venta:0},dialogEdit:!1,editForm:{venta_id:null,tipo_pago:"Efectivo",facturado:!1,factura_estado:"SIN_GESTION",observaciones:"",productos:[]},tipoPagoVentaOptions:[{label:"Efectivo",value:"Efectivo"},{label:"QR",value:"QR"},{label:"Contado",value:"Contado"},{label:"Credito",value:"Credito"},{label:"Boleta anterior",value:"Boleta anterior"}],facturaEstadoOptions:[{label:"Sin gestion",value:"SIN_GESTION"},{label:"Pendiente",value:"PENDIENTE"},{label:"Facturado",value:"FACTURADO"}]}},computed:{ventasFiltradas(){const o=String(this.search||"").trim().toLowerCase();return o?this.ventas.filter(e=>{const i=(e.productos||[]).map(r=>`${r.nombre} ${r.codigo}`).join(" ").toLowerCase();return`${e.comanda||""} ${e.vendedor||""} ${e.cliente||""} ${e.venta_id||""} ${i}`.toLowerCase().includes(o)}):this.ventas},totalEdit(){return(this.editForm.productos||[]).reduce((o,e)=>o+Number(e.cantidad||0)*Number(e.precio||0),0)}},mounted(){this.cargarVentas()},methods:{tipoColor(o){const e=String(o||"NORMAL").toUpperCase();return e==="POLLO"?"orange":e==="RES"?"red":e==="CERDO"?"brown":"primary"},isBloqueada(o){const e=!!(o&&o.facturado),i=String(o&&o.factura_estado||"").toUpperCase()==="FACTURADO",b=String(o&&o.estado||"").toUpperCase()==="ACTIVO";return e&&i&&b},async cargarVentas(){this.loading=!0;try{const o=await this.$axios.get("/digitador-factura/pedidos",{params:{fecha_inicio:this.fechaInicio,fecha_fin:this.fechaFin,solo_factura:this.soloFactura}}),e=o&&o.data?o.data:{};this.ventas=Array.isArray(e.data)?e.data:[],this.pedidosSinVenta=Array.isArray(e.pedidos_sin_venta)?e.pedidos_sin_venta:[],this.stats=e.stats||this.stats}catch(o){this.$alert.error(o&&o.response&&o.response.data&&o.response.data.message||"No se pudo cargar ventas de digitador factura")}finally{this.loading=!1}},abrirEdicion(o){if(this.isBloqueada(o)){this.$alert.error("La factura ya fue generada. Anule la venta para volver a editar.");return}const e=o&&o.detalle_edit?o.detalle_edit:{};this.editForm={venta_id:o.venta_id,tipo_pago:e.tipo_pago||o.pago||"Efectivo",facturado:!!(typeof e.facturado<"u"?e.facturado:o.facturado),factura_estado:e.factura_estado||o.factura_estado||"SIN_GESTION",observaciones:e.observaciones||o.observaciones||"",productos:(e.productos||o.productos||[]).map(i=>({id:i.id,codigo:i.codigo,nombre:i.nombre,tipo:i.tipo,cantidad:Number(i.cantidad||0),precio:Number(i.precio||0)}))},this.dialogEdit=!0},async guardarEdicion(){if(this.editForm.venta_id)try{this.saving=!0,await this.$axios.put(`/digitador-factura/ventas/${this.editForm.venta_id}`,{tipo_pago:this.editForm.tipo_pago,facturado:!!this.editForm.facturado,factura_estado:this.editForm.factura_estado,observaciones:this.editForm.observaciones||null,productos:(this.editForm.productos||[]).map(o=>({id:o.id,cantidad:Number(o.cantidad||0),precio:Number(o.precio||0)}))}),this.$alert.success("Venta actualizada"),this.dialogEdit=!1,await this.cargarVentas()}catch(o){this.$alert.error(o&&o.response&&o.response.data&&o.response.data.message||"No se pudo actualizar venta")}finally{this.saving=!1}},async verificarImpuestos(o){if(o&&o.cuf)try{const e=await this.$axios.post(`/verificarImpuestos/${o.cuf}`);this.$q.dialog({title:"Verificacion de impuestos",fullWidth:!0,message:`<pre>${JSON.stringify(e.data,null,2)}</pre>`,html:!0,ok:!0})}catch(e){this.$alert.error(e&&e.response&&e.response.data&&e.response.data.message||"No se pudo verificar en impuestos")}},imprimirImpuestos(o){o&&o.cuf&&window.open(`${this.$store.env.url2}consulta/QR?nit=${this.$store.env.nit}&cuf=${o.cuf}&numero=${o.venta_id}&t=2`,"_blank")},async anularVenta(o){if(await new Promise(i=>{this.$alert.dialog("Desea anular la venta?").onOk(()=>i(!0)).onCancel(()=>i(!1))}))try{await this.$axios.put(`/ventasAnular/${o.venta_id}`),this.$alert.success("Venta anulada"),await this.cargarVentas()}catch(i){this.$alert.error(i&&i.response&&i.response.data&&i.response.data.message||"No se pudo anular la venta")}},async generarFacturaTodos(){if(await new Promise(e=>{this.$alert.dialog("Seguro que quiere facturar todas las ventas pendientes del rango?").onOk(()=>e(!0)).onCancel(()=>e(!1))})){this.loadingFacturar=!0;try{const e=await this.$axios.post("/digitador-factura/generar-factura-todos",{fecha_inicio:this.fechaInicio,fecha_fin:this.fechaFin}),i=Number(e&&e.data&&e.data.facturadas||0),b=Number(e&&e.data&&e.data.errores||0);this.$alert.success(`${e&&e.data&&e.data.message||"Proceso ejecutado"} | Facturadas: ${i} | Errores: ${b}`),await this.cargarVentas()}catch(e){this.$alert.error(e&&e.response&&e.response.data&&e.response.data.message||"No se pudo marcar facturacion masiva")}finally{this.loadingFacturar=!1}}},async descargarPdf(o,e){this[e]=!0;try{const i=await this.$axios.get(o,{params:{fecha_inicio:this.fechaInicio,fecha_fin:this.fechaFin},responseType:"blob"}),b=new Blob([i.data],{type:"application/pdf"}),c=(i&&i.headers&&i.headers["content-disposition"]||"").match(/filename="?([^"]+)"?/),t=c&&c[1]||"reporte.pdf",n=document.createElement("a"),f=window.URL.createObjectURL(b);n.href=f,n.download=t,document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(f)}catch(i){this.$alert.error(i&&i.response&&i.response.data&&i.response.data.message||"No se pudo generar el PDF")}finally{this[e]=!1}},async descargarPdfIndividual(o){try{const e=await this.$axios.get(o,{responseType:"blob"}),i=new Blob([e.data],{type:"application/pdf"}),r=(e&&e.headers&&e.headers["content-disposition"]||"").match(/filename="?([^"]+)"?/),c=r&&r[1]||"documento.pdf",t=document.createElement("a"),n=window.URL.createObjectURL(i);t.href=n,t.download=c,document.body.appendChild(t),t.click(),t.remove(),window.URL.revokeObjectURL(n)}catch(e){this.$alert.error(e&&e.response&&e.response.data&&e.response.data.message||"No se pudo generar el PDF")}},async imprimirFacturaIndividual(o){await this.descargarPdfIndividual(`/digitador-factura/reportes/facturas/${o.venta_id}`)},async imprimirVoucherIndividual(o){await this.descargarPdfIndividual(`/digitador-factura/reportes/vouchers/${o.venta_id}`)},async compartirPdf(o,e){try{const i=await this.$axios.get(o,{responseType:"blob"}),b=new Blob([i.data],{type:"application/pdf"}),c=(i&&i.headers&&i.headers["content-disposition"]||"").match(/filename="?([^"]+)"?/),t=c&&c[1]||e,n=new File([b],t,{type:"application/pdf"});if(navigator.canShare&&navigator.canShare({files:[n]})){await navigator.share({files:[n],title:t});return}const f=document.createElement("a"),P=window.URL.createObjectURL(b);f.href=P,f.download=t,document.body.appendChild(f),f.click(),f.remove(),window.URL.revokeObjectURL(P),this.$alert.error("Tu navegador no permite compartir PDF directo. Se descargo el archivo para enviarlo por WhatsApp.")}catch(i){this.$alert.error(i&&i.response&&i.response.data&&i.response.data.message||"No se pudo preparar el PDF para compartir")}},async mandarWhatsappFactura(o){await this.compartirPdf(`/digitador-factura/reportes/facturas/${o.venta_id}`,`factura_venta_${o.venta_id}.pdf`)},async mandarWhatsappVoucher(o){await this.compartirPdf(`/digitador-factura/reportes/vouchers/${o.venta_id}`,`voucher_venta_${o.venta_id}.pdf`)},async imprimirFacturasMasivo(){await this.descargarPdf("/digitador-factura/reportes/facturas","loadingPrintFacturas")},async imprimirVouchersMasivo(){await this.descargarPdf("/digitador-factura/reportes/vouchers","loadingPrintVouchers")}}},z={class:"col-12 col-md-2"},M={class:"col-12 col-md-2"},W={class:"col-12 col-md-2"},G={class:"col-12 col-md-2"},H={class:"col-6 col-md-2"},J={class:"col-6 col-md-2"},Z={class:"col-6 col-md-2"},X={class:"col-6 col-md-2"},Y={class:"col-6 col-md-2"},K={class:"col-6 col-md-2"},ee={class:"row q-col-gutter-sm"},te={class:"col-12 col-md-4"},ae={class:"col-12 col-md-4"},oe={class:"col-12 col-md-4"},se={class:"col-12 col-md-4"},le={class:"col-12 col-md-3"},re={style:{padding:"0",margin:"0","list-style":"none"}},ie={key:0},de={key:0},ne={class:"text-h6"},ce={class:"row q-col-gutter-sm"},ue={class:"col-12 col-md-3"},me={class:"col-12 col-md-2"},pe={class:"col-12 col-md-3"},fe={class:"col-12 col-md-4"},he=["onUpdate:modelValue"],ge=["onUpdate:modelValue"],_e={key:0},be={class:"text-h6 q-mt-sm"};function ve(o,e,i,b,r,c){return u(),v(j,{class:"q-pa-sm misped-page"},{default:l(()=>[s(I,{flat:"",bordered:"",class:"hero-card q-mb-sm"},{default:l(()=>[s(C,{class:"row items-center q-col-gutter-sm"},{default:l(()=>[e[9]||(e[9]=a("div",{class:"col-12 col-md-4"},[a("div",{class:"text-subtitle2 text-grey-7"},"Panel administrativo"),a("div",{class:"text-h6 text-weight-bold"},"Digitador factura")],-1)),a("div",z,[s(E,{modelValue:r.fechaInicio,"onUpdate:modelValue":e[0]||(e[0]=t=>r.fechaInicio=t),type:"date",dense:"",outlined:"",label:"Fecha inicio"},null,8,["modelValue"])]),a("div",M,[s(E,{modelValue:r.fechaFin,"onUpdate:modelValue":e[1]||(e[1]=t=>r.fechaFin=t),type:"date",dense:"",outlined:"",label:"Fecha fin"},null,8,["modelValue"])]),a("div",W,[s(U,{modelValue:r.soloFactura,"onUpdate:modelValue":e[2]||(e[2]=t=>r.soloFactura=t),label:"Solo factura",color:"primary"},null,8,["modelValue"])]),a("div",G,[s(V,{color:"primary",icon:"search","no-caps":"",class:"full-width",label:"Consulta",loading:r.loading,onClick:c.cargarVentas},null,8,["loading","onClick"])])]),_:1}),s(T),s(C,{class:"row q-col-gutter-sm items-center"},{default:l(()=>[a("div",H,[s(_,{square:"",color:"blue-8","text-color":"white",class:"full-width justify-center"},{default:l(()=>[m("Ventas: "+d(r.stats.total_ventas||0),1)]),_:1})]),a("div",J,[s(_,{square:"",color:"indigo-8","text-color":"white",class:"full-width justify-center"},{default:l(()=>[m("Monto Bs: "+d(Number(r.stats.monto_total_ventas||0).toFixed(2)),1)]),_:1})]),a("div",Z,[s(_,{square:"",color:"green-8","text-color":"white",class:"full-width justify-center"},{default:l(()=>[m("Facturadas: "+d(r.stats.ventas_facturadas||0),1)]),_:1})]),a("div",X,[s(_,{square:"",color:"orange-8","text-color":"white",class:"full-width justify-center"},{default:l(()=>[m("No facturadas: "+d(r.stats.ventas_no_facturadas||0),1)]),_:1})]),a("div",Y,[s(_,{square:"",color:"deep-orange-9","text-color":"white",class:"full-width justify-center"},{default:l(()=>[m("Pendientes: "+d(r.stats.pendientes_factura||0),1)]),_:1})]),a("div",K,[s(_,{square:"",color:"grey-8","text-color":"white",class:"full-width justify-center"},{default:l(()=>[m("Sin venta: "+d(r.stats.pedidos_sin_venta||0),1)]),_:1})])]),_:1}),s(C,{class:"q-pt-none"},{default:l(()=>[a("div",ee,[a("div",te,[s(V,{color:"deep-orange",icon:"receipt_long",label:"Generar factura de todos","no-caps":"",size:"lg",class:"full-width text-weight-bold",loading:r.loadingFacturar,onClick:c.generarFacturaTodos},null,8,["loading","onClick"])]),a("div",ae,[s(V,{color:"primary",icon:"print",label:"Imprimir todas facturas","no-caps":"",size:"lg",class:"full-width text-weight-bold",loading:r.loadingPrintFacturas,onClick:c.imprimirFacturasMasivo},null,8,["loading","onClick"])]),a("div",oe,[s(V,{color:"teal",icon:"receipt",label:"Imprimir todos vouchers","no-caps":"",size:"lg",class:"full-width text-weight-bold",loading:r.loadingPrintVouchers,onClick:c.imprimirVouchersMasivo},null,8,["loading","onClick"])])])]),_:1})]),_:1}),s(I,{flat:"",bordered:"",class:"q-mb-sm"},{default:l(()=>[s(C,{class:"row q-col-gutter-sm items-center"},{default:l(()=>[a("div",se,[s(E,{modelValue:r.search,"onUpdate:modelValue":e[3]||(e[3]=t=>r.search=t),dense:"",outlined:"",label:"Buscar comanda/cliente/vendedor/producto",debounce:"250"},{append:l(()=>[s(y,{name:"search"})]),_:1},8,["modelValue"])]),a("div",le,[s(_,{color:"indigo-7","text-color":"white"},{default:l(()=>[m("Registros: "+d(c.ventasFiltradas.length),1)]),_:1})])]),_:1}),s(S,{flat:"",dense:"","wrap-cells":""},{default:l(()=>[e[19]||(e[19]=a("thead",null,[a("tr",{class:"bg-grey-2"},[a("th",null,"Opciones"),a("th",null,"Comanda"),a("th",null,"Vendedor"),a("th",null,"Cliente"),a("th",null,"Tipo"),a("th",null,"Producto"),a("th",null,"Fec/Hora"),a("th",null,"Pago"),a("th",null,"Factura")])],-1)),a("tbody",null,[(u(!0),h(x,null,N(c.ventasFiltradas,t=>(u(),h("tr",{key:t.venta_id},[a("td",null,[s(A,{color:"primary",label:"Opciones",dense:"","no-caps":"",size:"10px"},{default:l(()=>[g((u(),v(k,{clickable:"",onClick:n=>c.abrirEdicion(t),disable:c.isBloqueada(t)},{default:l(()=>[s(p,{avatar:""},{default:l(()=>[s(y,{name:"edit"})]),_:1}),s(p,null,{default:l(()=>[m(d(c.isBloqueada(t)?"Edicion bloqueada":"Editar"),1)]),_:2},1024)]),_:2},1032,["onClick","disable"])),[[w]]),t.cuf?g((u(),v(k,{key:0,clickable:"",onClick:n=>c.verificarImpuestos(t)},{default:l(()=>[s(p,{avatar:""},{default:l(()=>[s(y,{name:"fact_check"})]),_:1}),s(p,null,{default:l(()=>e[10]||(e[10]=[m("Verificar impuestos")])),_:1})]),_:2},1032,["onClick"])),[[w]]):F("",!0),t.cuf?g((u(),v(k,{key:1,clickable:"",onClick:n=>c.imprimirImpuestos(t)},{default:l(()=>[s(p,{avatar:""},{default:l(()=>[s(y,{name:"receipt_long"})]),_:1}),s(p,null,{default:l(()=>e[11]||(e[11]=[m("Imprimir impuesto")])),_:1})]),_:2},1032,["onClick"])),[[w]]):F("",!0),t.cuf&&t.factura_estado==="FACTURADO"?g((u(),v(k,{key:2,clickable:"",onClick:n=>c.imprimirFacturaIndividual(t)},{default:l(()=>[s(p,{avatar:""},{default:l(()=>[s(y,{name:"print"})]),_:1}),s(p,null,{default:l(()=>e[12]||(e[12]=[m("Imprimir factura")])),_:1})]),_:2},1032,["onClick"])),[[w]]):F("",!0),g((u(),v(k,{clickable:"",onClick:n=>c.imprimirVoucherIndividual(t)},{default:l(()=>[s(p,{avatar:""},{default:l(()=>[s(y,{name:"description"})]),_:1}),s(p,null,{default:l(()=>e[13]||(e[13]=[m("Imprimir voucher")])),_:1})]),_:2},1032,["onClick"])),[[w]]),t.cuf&&t.factura_estado==="FACTURADO"?g((u(),v(k,{key:3,clickable:"",onClick:n=>c.mandarWhatsappFactura(t)},{default:l(()=>[s(p,{avatar:""},{default:l(()=>[s(y,{name:"chat"})]),_:1}),s(p,null,{default:l(()=>e[14]||(e[14]=[m("WhatsApp factura")])),_:1})]),_:2},1032,["onClick"])),[[w]]):F("",!0),g((u(),v(k,{clickable:"",onClick:n=>c.mandarWhatsappVoucher(t)},{default:l(()=>[s(p,{avatar:""},{default:l(()=>[s(y,{name:"chat_bubble"})]),_:1}),s(p,null,{default:l(()=>e[15]||(e[15]=[m("WhatsApp voucher")])),_:1})]),_:2},1032,["onClick"])),[[w]]),g((u(),v(k,{clickable:"",onClick:n=>c.anularVenta(t)},{default:l(()=>[s(p,{avatar:""},{default:l(()=>[s(y,{name:"delete"})]),_:1}),s(p,null,{default:l(()=>e[16]||(e[16]=[m("Anular")])),_:1})]),_:2},1032,["onClick"])),[[w]])]),_:2},1024)]),a("td",null,d(t.comanda||"-"),1),a("td",null,d(t.vendedor||"-"),1),a("td",null,d(t.cliente||"-"),1),a("td",null,[(u(!0),h(x,null,N(t.tipo||[],n=>(u(),v(_,{key:`${t.venta_id}-${n}`,dense:"","text-color":"white",color:c.tipoColor(n),class:"q-mr-xs q-mb-xs"},{default:l(()=>[m(d(n),1)]),_:2},1032,["color"]))),128))]),a("td",null,[a("ul",re,[(u(!0),h(x,null,N(t.productos||[],n=>(u(),h("li",{key:`${t.venta_id}-${n.id}`,style:{"font-size":"0.9em","border-bottom":"1px solid #eee",padding:"0"}},d(n.nombre)+" x "+d(n.cantidad),1))),128))])]),a("td",null,d(t.fecha)+" "+d(t.hora||""),1),a("td",null,d(t.pago||"-"),1),a("td",null,[s(_,{dense:"",color:t.facturado?"green-8":"negative","text-color":"white"},{default:l(()=>[m(d(t.facturado?"SI":"NO"),1)]),_:2},1032,["color"]),s(_,{dense:"",color:t.online?"green-7":"blue-8","text-color":"white",class:"q-ml-xs"},{default:l(()=>[m(d(t.factura_estado||"SIN_GESTION"),1)]),_:2},1032,["color"]),s(_,{dense:"",color:t.online?"green":"red","text-color":"white",class:"q-ml-xs"},{default:l(()=>[m(d(t.online?"ONLINE":"OFFLINE"),1)]),_:2},1032,["color"]),t.factura_error?(u(),v(_,{key:0,dense:"",color:"negative","text-color":"white",class:"q-ml-xs"},{default:l(()=>[e[17]||(e[17]=m(" Error ")),s(D,{style:{"max-width":"360px","white-space":"normal"}},{default:l(()=>[m(d(t.factura_error),1)]),_:2},1024)]),_:2},1024)):F("",!0)])]))),128)),c.ventasFiltradas.length===0?(u(),h("tr",ie,e[18]||(e[18]=[a("td",{colspan:"9",class:"text-center text-grey-7"},"Sin datos disponibles",-1)]))):F("",!0)])]),_:1})]),_:1}),s(I,{flat:"",bordered:""},{default:l(()=>[s(C,{class:"text-subtitle2"},{default:l(()=>[m(" Pedidos sin venta generada: "+d(r.pedidosSinVenta.length),1)]),_:1}),s(S,{flat:"",dense:"","wrap-cells":""},{default:l(()=>[e[21]||(e[21]=a("thead",null,[a("tr",{class:"bg-grey-2"},[a("th",null,"Comanda"),a("th",null,"Vendedor"),a("th",null,"Cliente"),a("th",null,"Fec/Hora"),a("th",null,"Factura"),a("th",null,"Estado")])],-1)),a("tbody",null,[(u(!0),h(x,null,N(r.pedidosSinVenta,t=>(u(),h("tr",{key:`sv-${t.comanda}`},[a("td",null,d(t.comanda),1),a("td",null,d(t.vendedor||"-"),1),a("td",null,d(t.cliente||"-"),1),a("td",null,d(t.fecha)+" "+d(t.hora||""),1),a("td",null,d(t.facturado?"SI":"NO"),1),a("td",null,d(t.estado||"-"),1)]))),128)),r.pedidosSinVenta.length===0?(u(),h("tr",de,e[20]||(e[20]=[a("td",{colspan:"6",class:"text-center text-grey-7"},"Sin pendientes",-1)]))):F("",!0)])]),_:1})]),_:1}),s(R,{modelValue:r.dialogEdit,"onUpdate:modelValue":e[8]||(e[8]=t=>r.dialogEdit=t),maximized:""},{default:l(()=>[s(I,null,{default:l(()=>[s(C,{class:"row items-center q-pb-none"},{default:l(()=>[a("div",ne,"Editar venta #"+d(r.editForm.venta_id),1),s(B),g(s(V,{flat:"",round:"",dense:"",icon:"close"},null,512),[[w]])]),_:1}),s(C,{class:"q-pt-sm"},{default:l(()=>[a("div",ce,[a("div",ue,[s(O,{modelValue:r.editForm.tipo_pago,"onUpdate:modelValue":e[4]||(e[4]=t=>r.editForm.tipo_pago=t),options:r.tipoPagoVentaOptions,dense:"",outlined:"","emit-value":"","map-options":"",label:"Tipo pago"},null,8,["modelValue","options"])]),a("div",me,[s(U,{modelValue:r.editForm.facturado,"onUpdate:modelValue":e[5]||(e[5]=t=>r.editForm.facturado=t),label:"Facturado"},null,8,["modelValue"])]),a("div",pe,[s(O,{modelValue:r.editForm.factura_estado,"onUpdate:modelValue":e[6]||(e[6]=t=>r.editForm.factura_estado=t),options:r.facturaEstadoOptions,dense:"",outlined:"","emit-value":"","map-options":"",label:"Estado factura"},null,8,["modelValue","options"])]),a("div",fe,[s(E,{modelValue:r.editForm.observaciones,"onUpdate:modelValue":e[7]||(e[7]=t=>r.editForm.observaciones=t),dense:"",outlined:"",label:"Observacion",maxlength:"600"},null,8,["modelValue"])])]),s(S,{dense:"",flat:"",bordered:"",class:"q-mt-sm"},{default:l(()=>[e[23]||(e[23]=a("thead",null,[a("tr",null,[a("th",null,"Cod"),a("th",null,"Nombre"),a("th",null,"Tipo"),a("th",null,"Cantidad"),a("th",null,"Precio"),a("th",null,"Subtotal")])],-1)),a("tbody",null,[(u(!0),h(x,null,N(r.editForm.productos,(t,n)=>(u(),h("tr",{key:`ed-${t.id}-${n}`},[a("td",null,d(t.codigo),1),a("td",null,d(t.nombre),1),a("td",null,d(t.tipo),1),a("td",null,[g(a("input",{"onUpdate:modelValue":f=>t.cantidad=f,type:"number",step:"0.01",min:"0",style:{width:"80px"}},null,8,he),[[q,t.cantidad,void 0,{number:!0}]])]),a("td",null,[g(a("input",{"onUpdate:modelValue":f=>t.precio=f,type:"number",step:"0.01",min:"0",style:{width:"90px"}},null,8,ge),[[q,t.precio,void 0,{number:!0}]])]),a("td",null,d((Number(t.cantidad||0)*Number(t.precio||0)).toFixed(2)),1)]))),128)),r.editForm.productos.length===0?(u(),h("tr",_e,e[22]||(e[22]=[a("td",{colspan:"6",class:"text-grey-7"},"Sin detalles",-1)]))):F("",!0)])]),_:1}),a("div",be,"Total: "+d(c.totalEdit.toFixed(2))+" Bs.",1)]),_:1}),s(L,{align:"between",class:"q-pa-md"},{default:l(()=>[g(s(V,{flat:"",color:"negative",label:"Cerrar"},null,512),[[w]]),s(V,{color:"green","no-caps":"",icon:"save",label:"Guardar cambios",loading:r.saving,onClick:c.guardarEdicion},null,8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const Pe=Q($,[["render",ve],["__scopeId","data-v-efbeac7d"]]);export{Pe as default};
