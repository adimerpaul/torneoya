import{_ as Sl,g as Ql,r as m,x as D,l as ql,c as O,o as r,w as n,a,Q as A,e as w,b as o,aa as u,f as b,a6 as Dl,a2 as p,t as s,d as E,a3 as _,a1 as _l,a4 as T,a5 as F,Z as f,h as nl,as as Al,ab as Tl,ad as Fl,ae as Il,a8 as ul,a7 as bl,aq as fl,ac as Vl}from"./index-CmoW1HI-.js";import{Q as P}from"./QChip-B_XB_8XG.js";import{Q as g}from"./QSelect-YWvpHr97.js";import{a as $,b as V}from"./QMenu-j9-YnpjT.js";import{Q as gl,C as x}from"./ClosePopup-veQafRnd.js";import{Q as sl}from"./QMarkupTable-6CKuV8-r.js";import{Q as il}from"./QSpace-CghvMLQs.js";import{Q as rl}from"./QImg-BFhzNBj4.js";import{Q as zl}from"./QItemLabel-BiiYZsTs.js";import{Q as Bl}from"./QList-MksEbVq0.js";import{Q as Gl}from"./QPage-Dl-a7fNa.js";import"./format-CJebrXOQ.js";const Ml={class:"col-12 col-md-3"},Kl={class:"col-12 col-md-2"},Hl={class:"col-12 col-md-3"},Jl={class:"col-6 col-md-4"},Yl={class:"col-6 col-md-4"},Zl={class:"col-6 col-md-4"},Wl={class:"col-12 col-md-auto"},Xl={class:"col-12 col-md-auto"},le={class:"col-12 col-md-auto"},ee={class:"col-12 col-md-auto"},oe={class:"col-12 col-md-4"},ae={class:"col-12 col-md-3"},te={class:"col-12 col-md-auto"},de={key:1,class:"row items-center q-gutter-xs"},ne={style:{padding:"0",margin:"0","list-style":"none"}},ue={key:0},se={class:"text-h6"},ie={class:"row q-col-gutter-sm"},re={class:"col-12 col-md-4"},ce={class:"col-12 col-md-2"},me={class:"col-12 col-md-3"},pe={class:"col-12 col-md-3"},ve={class:"col-12 col-md-12"},_e={class:"col-12 col-md-10"},be={class:"row items-center no-wrap q-gutter-xs"},fe={class:"ellipsis"},Ve={class:"col-12 col-md-2"},ge=["onUpdate:modelValue","onInput"],Ue=["onUpdate:modelValue","onInput"],Ce={class:"row items-center no-wrap q-gutter-sm"},we={key:0},xe={class:"text-h6 q-mt-sm"},ye={class:"text-h6"},he={key:0,class:"row q-col-gutter-sm"},Oe={class:"col-12"},Pe={key:1,class:"row q-col-gutter-sm"},ke={class:"col-12 col-md-4"},Re={class:"col-12 col-md-4"},Ee={class:"col-12 col-md-4"},$e={class:"col-12 col-md-6"},Ne={class:"col-12 col-md-6"},je={class:"col-12"},Le={key:2,class:"row q-col-gutter-sm"},Se={class:"col-12 col-md-4"},Qe={class:"col-12 col-md-4"},qe={class:"col-12 col-md-4"},De={class:"col-12 col-md-6"},Ae={class:"col-12 col-md-6"},Te={class:"col-12"},Fe={key:3,class:"row q-col-gutter-sm"},Ie={class:"col-12 col-md-6"},ze={class:"col-12 col-md-6"},Be={class:"col-12 col-md-6"},Ge={class:"col-12 col-md-6"},Me={class:"col-12 col-md-6"},Ke={class:"col-12 col-md-6"},He={class:"col-12 col-md-6"},Je={class:"col-12 col-md-6"},Ye={class:"col-12 col-md-6"},Ze={class:"col-12 col-md-6"},We={class:"col-12 col-md-6"},Xe={class:"col-12 col-md-6"},lo={class:"col-12 col-md-6"},eo={class:"col-12 col-md-6"},oo={class:"col-12 col-md-6"},ao={class:"col-12 col-md-6"},to={class:"col-12"},no={class:"col-12 col-md-6"},uo={class:"col-12 col-md-6"},so={class:"col-12 col-md-6"},io={class:"col-12 col-md-6"},ro={class:"col-12 col-md-6"},co={class:"col-12 col-md-6"},mo={class:"col-12 col-md-6"},po={class:"col-12 col-md-6"},vo={class:"col-12 col-md-6"},_o={class:"col-12 col-md-6"},bo={class:"col-12 col-md-6"},fo={class:"col-12 col-md-6"},Vo={class:"col-12 col-md-6"},go={class:"col-12 col-md-6"},Uo={class:"col-12 col-md-6"},Co={class:"col-12 col-md-6"},wo={class:"col-12 col-md-6"},xo={class:"col-12 col-md-6"},yo={class:"col-12"},ho={class:"text-h6"},Oo={class:"row q-col-gutter-sm q-mb-sm"},Po={class:"col-12 col-md-3"},ko={class:"col-12 col-md-3"},Ro={class:"col-12 col-md-2"},Eo={class:"col-12 col-md-2"},$o={class:"col-12 col-md-2"},No={class:"text-h6 q-mt-sm text-right"},jo={__name:"MisPedidos",setup(Lo){const{proxy:v}=Ql(),k=m(new Date().toISOString().slice(0,10)),J=m(!1),Y=m(!1),Z=m(!1),W=m(""),I=m("TODOS"),X=m([]),z=m({total:0,creado:0,pendiente:0,enviado:0}),B=m(!1),G=m(!1),ll=m(!1),U=m(null),N=m(-1),t=m({}),y=m("NORMAL"),h=["KG","CAJA","UNIDAD"],i=m({id:null,productos:[]}),Ul=[{label:"Contado",value:"Contado"},{label:"Pago QR",value:"QR"},{label:"Credito",value:"Credito"},{label:"Boleta anterior",value:"Boleta anterior"}],cl=[{label:"06:00-07:30",value:"06:00-07:30"},{label:"07:30-09:00",value:"07:30-09:00"},{label:"09:00-10:30",value:"09:00-10:30"},{label:"10:30-12:00",value:"10:30-12:00"},{label:"SEGUNDA VUELTA",value:"SEGUNDA VUELTA"},{label:"SE RECOGE",value:"SE RECOGE"}],R=m([]),j=m([]),L=m(null),Cl=[{label:"Todos",value:"TODOS"},{label:"Normal",value:"NORMAL"},{label:"Pollo",value:"POLLO"},{label:"Res",value:"RES"},{label:"Cerdo",value:"CERDO"}],el=D(()=>X.value.filter(d=>M(d))),wl=D(()=>i.value.productos.reduce((d,l)=>d+Number(l.cantidad||0)*Number(l.precio||0),0)),xl=D(()=>(U.value?.detalles||[]).reduce((d,l)=>d+Number(l.cantidad||0)*Number(l.precio||0),0)),yl=D(()=>y.value==="RES"?"Res":y.value==="CERDO"?"Cerdo":y.value==="POLLO"?"Pollo":"Normal"),ol=D(()=>{const d=W.value.trim().toLowerCase();return X.value.filter(l=>{if(!(I.value==="TODOS"||pl(l).includes(I.value)))return!1;if(!d)return!0;const c=(l.cliente?.nombre||"").toLowerCase(),C=String(l.id),dl=(l.detalles||[]).map(H=>H.producto?.nombre||"").join(" ").toLowerCase();return c.includes(d)||C.includes(d)||dl.includes(d)})});function S(d){const l=String(d||"NORMAL").trim().toUpperCase();return l==="POLLO"||l==="RES"||l==="CERDO"?l:"NORMAL"}function hl(d){return d==="Enviado"?"green":d==="Pendiente"?"deep-orange":d==="Creado"?"orange":d==="Anulado"?"negative":"primary"}function ml(d){return d==="POLLO"?"orange":d==="RES"?"red":d==="CERDO"?"brown":"primary"}function pl(d){const l=[];if(d?.contiene_normal&&l.push("NORMAL"),d?.contiene_pollo&&l.push("POLLO"),d?.contiene_res&&l.push("RES"),d?.contiene_cerdo&&l.push("CERDO"),l.length>0)return l;const e=Array.from(new Set((d?.detalles||[]).map(c=>S(c?.producto?.tipo)).filter(Boolean)));return e.length>0?e:["NORMAL"]}function M(d){return d&&(d.estado==="Creado"||d.estado==="Pendiente")}function al(d){const l=d||"uploads/default.png";return`${v.$url}../${l}`}function tl(d){return d==="RES"?{precio_res:"",res_trozado:"",res_entero:"",res_pierna:"",res_brazo:"",observacion:""}:d==="CERDO"?{cerdo_precio_total:"",cerdo_entero:"",cerdo_desmembrado:"",cerdo_corte:"",cerdo_kilo:"",observacion:""}:d==="POLLO"?{pollo_cja_b5:"",pollo_uni_b5:"",pollo_cja_b6:"",pollo_uni_b6:"",pollo_cja_104:"",pollo_uni_104:"",pollo_cja_105:"",pollo_uni_105:"",pollo_cja_106:"",pollo_uni_106:"",pollo_cja_107:"",pollo_uni_107:"",pollo_cja_108:"",pollo_uni_108:"",pollo_cja_109:"",pollo_uni_109:"",pollo_rango_unidades:"",pollo_ala:"",pollo_ala_unidad:"KG",pollo_cadera:"",pollo_cadera_unidad:"KG",pollo_pecho:"",pollo_pecho_unidad:"KG",pollo_pi_mu:"",pollo_pi_mu_unidad:"KG",pollo_filete:"",pollo_filete_unidad:"KG",pollo_cuello:"",pollo_cuello_unidad:"KG",pollo_hueso:"",pollo_hueso_unidad:"KG",pollo_menudencia:"",pollo_menudencia_unidad:"KG",pollo_bs:"",pollo_bs2:"",observacion:""}:{observacion:""}}function Ol(d,l){N.value=l,y.value=S(d?.tipo),t.value={...tl(y.value),...d?.detalle_extra||{}},G.value=!0}function Pl(){if(N.value<0||!i.value.productos[N.value])return;const d=i.value.productos[N.value];d.detalle_extra={...t.value},d.observacion=t.value.observacion||d.observacion||"",G.value=!1,N.value=-1,t.value={}}function kl(d,l){l(()=>{const e=(d||"").toLowerCase();if(!e){j.value=[...R.value];return}j.value=R.value.filter(c=>c.label.toLowerCase().includes(e))})}function Rl(){if(!L.value)return;const d=R.value.find(e=>e.id===L.value);if(!d)return;const l=i.value.productos.find(e=>e.producto_id===d.id);l?l.cantidad+=1:i.value.productos.push({producto_id:d.id,codigo:d.codigo,nombre:d.nombre,imagen:d.imagen||"uploads/default.png",tipo:d.tipo,cantidad:1,precio:d.precio,observacion:"",detalle_extra:tl(d.tipo)}),L.value=null}function El(d){if(!M(d)){v.$alert.error("El pedido enviado ya no se puede modificar");return}i.value={id:d.id,fecha:d.fecha,hora:d.hora||cl[0].value,facturado:!!d.facturado,tipo_pago:d.tipo_pago||"Contado",observaciones:d.observaciones||"",productos:(d.detalles||[]).map(l=>({producto_id:l.producto_id,codigo:l.producto?.codigo,nombre:l.producto?.nombre||`Producto ${l.producto_id}`,imagen:l.producto?.imagen||"uploads/default.png",tipo:S(l.producto?.tipo),cantidad:Number(l.cantidad||0),precio:Number(l.precio||0),observacion:l.observacion_detalle||"",detalle_extra:{...tl(S(l.producto?.tipo)),...l.detalle_extra||{}}}))},B.value=!0}function vl(d){U.value=d,ll.value=!0}async function $l(){if(i.value.id)try{const d=i.value.productos.map(l=>({producto_id:l.producto_id,cantidad:Number(l.cantidad||0),precio:Number(l.precio||0),observacion:l.observacion||"",detalle_extra:l.detalle_extra||{}})).filter(l=>l.cantidad>0);if(d.length===0){v.$alert.error("Debe agregar al menos un producto");return}Z.value=!0,await v.$axios.put(`/pedidos/${i.value.id}`,{fecha:i.value.fecha,hora:i.value.hora,facturado:i.value.facturado,tipo_pago:i.value.tipo_pago,observaciones:i.value.observaciones,comentario_visita:i.value.observaciones,productos:d}),v.$alert.success("Pedido actualizado"),B.value=!1,await Q()}catch(d){v.$alert.error(d?.message||d?.response?.data?.message||"No se pudo guardar")}finally{Z.value=!1}}async function Nl(d){if(M(d))try{await v.$axios.put(`/pedidos/${d.id}/enviar`),v.$alert.success("Pedido enviado"),await Q()}catch(l){v.$alert.error(l?.response?.data?.message||"No se pudo enviar")}}async function jl(){if(el.value.length!==0){Y.value=!0;try{await v.$axios.post("/pedidos/enviar-mis-pedidos",{fecha:k.value,ids:el.value.map(d=>d.id)}),v.$alert.success("Pedidos enviados"),await Q()}catch(d){v.$alert.error(d?.response?.data?.message||"No se pudieron enviar los pedidos")}finally{Y.value=!1}}}async function K(d){try{const l=await v.$axios.get(`/mis-pedidos/reporte/${d}`,{params:{fecha:k.value},responseType:"blob"}),e=new Blob([l.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),dl=(l?.headers?.["content-disposition"]||"").match(/filename="?([^"]+)"?/)?.[1]||`reporte_${String(d).toLowerCase()}_${k.value}.xlsx`,H=window.URL.createObjectURL(e),q=document.createElement("a");q.href=H,q.download=dl,document.body.appendChild(q),q.click(),q.remove(),window.URL.revokeObjectURL(H)}catch(l){v.$alert.error(l?.response?.data?.message||`No se pudo exportar el reporte ${d}`)}}async function Q(){J.value=!0;try{const d=await v.$axios.get("/mis-pedidos",{params:{fecha:k.value}});X.value=d.data?.data||[],z.value=d.data?.stats||{total:0,creado:0,pendiente:0,enviado:0}}catch(d){v.$alert.error(d?.response?.data?.message||"No se pudo cargar pedidos")}finally{J.value=!1}}async function Ll(){try{const d=await v.$axios.get("/productosAll"),l=Array.isArray(d.data)?d.data:[];R.value=l.map(e=>({id:e.id,codigo:e.codigo,nombre:e.nombre,imagen:e.imagen||"uploads/default.png",tipo:S(e.tipo),precio:Number(e.precio1||0),label:`${e.codigo||e.id}-${e.nombre} ${Number(e.precio1||0).toFixed(2)} Bs`})),j.value=[...R.value]}catch{R.value=[],j.value=[]}}return ql(async()=>{await Promise.all([Q(),Ll()])}),(d,l)=>(r(),O(Gl,{class:"q-pa-sm misped-page"},{default:n(()=>[a(A,{flat:"",bordered:"",class:"hero-card q-mb-sm"},{default:n(()=>[a(w,{class:"row items-center q-col-gutter-sm"},{default:n(()=>[l[65]||(l[65]=o("div",{class:"col-12 col-md-4"},[o("div",{class:"text-subtitle2 text-grey-7"},"Mis pedidos por dia"),o("div",{class:"text-h6 text-weight-bold"},"Gestion y envio")],-1)),o("div",Ml,[a(u,{modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=e=>k.value=e),type:"date",dense:"",outlined:"",label:"Fecha"},null,8,["modelValue"])]),o("div",Kl,[a(b,{color:"primary",icon:"search","no-caps":"",class:"full-width",label:"Consulta",loading:J.value,onClick:Q},null,8,["loading"])]),o("div",Hl,[a(b,{color:"warning",icon:"send","no-caps":"",class:"full-width text-black",label:"Enviar todos los pedidos",disable:el.value.length===0,loading:Y.value,onClick:jl},null,8,["disable","loading"])])]),_:1}),a(Dl),a(w,{class:"row q-col-gutter-sm"},{default:n(()=>[o("div",Jl,[a(P,{square:"",color:"blue-8","text-color":"white",class:"full-width justify-center"},{default:n(()=>[p("Total: "+s(z.value.total),1)]),_:1})]),o("div",Yl,[a(P,{square:"",color:"orange-8","text-color":"white",class:"full-width justify-center"},{default:n(()=>[p("Creado: "+s(z.value.creado),1)]),_:1})]),o("div",Zl,[a(P,{square:"",color:"green-8","text-color":"white",class:"full-width justify-center"},{default:n(()=>[p("Enviado: "+s(z.value.enviado),1)]),_:1})])]),_:1})]),_:1}),a(A,{flat:"",bordered:""},{default:n(()=>[a(w,{class:"row q-col-gutter-sm items-center"},{default:n(()=>[o("div",Wl,[a(b,{color:"green-7",icon:"download","no-caps":"",label:"Reporte Pollo",onClick:l[1]||(l[1]=e=>K("POLLO"))})]),o("div",Xl,[a(b,{color:"purple-7",icon:"download","no-caps":"",label:"Reporte Res",onClick:l[2]||(l[2]=e=>K("RES"))})]),o("div",le,[a(b,{color:"cyan-7",icon:"download","no-caps":"",label:"Reporte Cerdo",onClick:l[3]||(l[3]=e=>K("CERDO"))})]),o("div",ee,[a(b,{color:"blue-grey-7",icon:"download","no-caps":"",label:"Reporte Normal",onClick:l[4]||(l[4]=e=>K("NORMAL"))})])]),_:1}),a(w,{class:"row q-col-gutter-sm items-center"},{default:n(()=>[o("div",oe,[a(u,{modelValue:W.value,"onUpdate:modelValue":l[5]||(l[5]=e=>W.value=e),dense:"",outlined:"",label:"Buscar cliente/comanda/producto",debounce:"250"},{append:n(()=>[a(E,{name:"search"})]),_:1},8,["modelValue"])]),o("div",ae,[a(g,{modelValue:I.value,"onUpdate:modelValue":l[6]||(l[6]=e=>I.value=e),dense:"",outlined:"","emit-value":"","map-options":"",options:Cl,label:"Filtrar por tipo"},null,8,["modelValue"])]),o("div",te,[a(P,{color:"indigo-7","text-color":"white"},{default:n(()=>[p("Pedidos: "+s(ol.value.length),1)]),_:1})])]),_:1}),a(sl,{flat:"",dense:"","wrap-cells":""},{default:n(()=>[l[71]||(l[71]=o("thead",null,[o("tr",{class:"bg-grey-2"},[o("th",null,"Opciones"),o("th",null,"Comanda"),o("th",null,"Cliente"),o("th",null,"Tipo"),o("th",null,"Producto"),o("th",null,"Fec/Hora"),o("th",null,"Pago"),o("th",null,"Factura"),o("th",null,"Estado")])],-1)),o("tbody",null,[(r(!0),_(T,null,F(ol.value,e=>(r(),_("tr",{key:e.id},[o("td",null,[M(e)?(r(),O(gl,{key:0,color:"primary",label:"Opciones",dense:"","no-caps":"",size:"10px"},{default:n(()=>[f((r(),O($,{clickable:"",onClick:c=>vl(e)},{default:n(()=>[a(V,{avatar:""},{default:n(()=>[a(E,{name:"visibility"})]),_:1}),a(V,null,{default:n(()=>l[66]||(l[66]=[p("Ver")])),_:1})]),_:2},1032,["onClick"])),[[x]]),f((r(),O($,{clickable:"",onClick:c=>El(e)},{default:n(()=>[a(V,{avatar:""},{default:n(()=>[a(E,{name:"edit"})]),_:1}),a(V,null,{default:n(()=>l[67]||(l[67]=[p("Editar")])),_:1})]),_:2},1032,["onClick"])),[[x]]),f((r(),O($,{clickable:"",onClick:c=>Nl(e)},{default:n(()=>[a(V,{avatar:""},{default:n(()=>[a(E,{name:"send"})]),_:1}),a(V,null,{default:n(()=>l[68]||(l[68]=[p("Mandar")])),_:1})]),_:2},1032,["onClick"])),[[x]])]),_:2},1024)):(r(),_("div",de,[a(P,{dense:"",color:"green-7","text-color":"white"},{default:n(()=>l[69]||(l[69]=[p("Ya mandado")])),_:1}),a(b,{dense:"",flat:"",color:"primary",icon:"visibility",label:"Ver","no-caps":"",onClick:c=>vl(e)},null,8,["onClick"])]))]),o("td",null,s(e.id),1),o("td",null,s(e.cliente?.nombre||"-"),1),o("td",null,[(r(!0),_(T,null,F(pl(e),c=>(r(),O(P,{key:`${e.id}-${c}`,dense:"","text-color":"white",color:ml(c),class:"q-mr-xs q-mb-xs"},{default:n(()=>[p(s(c),1)]),_:2},1032,["color"]))),128))]),o("td",null,[o("ul",ne,[(r(!0),_(T,null,F(e.detalles||[],c=>(r(),_("li",{key:c.id,style:{"font-size":"0.9em","border-bottom":"1px solid #eee",padding:"0"}},s(c.producto?.nombre||"Producto "+c.producto_id)+" x "+s(c.cantidad),1))),128))])]),o("td",null,s(e.fecha)+" "+s(e.hora||""),1),o("td",null,s(e.tipo_pago||"-"),1),o("td",null,s(e.facturado?"SI":"NO"),1),o("td",null,[a(P,{dense:"",color:hl(e.estado),"text-color":"white"},{default:n(()=>[p(s(e.estado),1)]),_:2},1032,["color"])])]))),128)),ol.value.length===0?(r(),_("tr",ue,l[70]||(l[70]=[o("td",{colspan:"9",class:"text-center text-grey-7"},"Sin datos disponibles",-1)]))):_l("",!0)])]),_:1})]),_:1}),a(nl,{modelValue:B.value,"onUpdate:modelValue":l[13]||(l[13]=e=>B.value=e),maximized:""},{default:n(()=>[a(A,null,{default:n(()=>[a(w,{class:"row items-center q-pb-none"},{default:n(()=>[o("div",se,"Editar pedido #"+s(i.value.id),1),a(il),f(a(b,{flat:"",round:"",dense:"",icon:"close"},null,512),[[x]])]),_:1}),a(w,{class:"q-pt-sm"},{default:n(()=>[o("div",ie,[o("div",re,[a(Al,{modelValue:i.value.tipo_pago,"onUpdate:modelValue":l[7]||(l[7]=e=>i.value.tipo_pago=e),options:Ul,type:"radio",color:"primary",inline:""},null,8,["modelValue"])]),o("div",ce,[a(Tl,{modelValue:i.value.facturado,"onUpdate:modelValue":l[8]||(l[8]=e=>i.value.facturado=e),label:"Facturado"},null,8,["modelValue"])]),o("div",me,[a(u,{modelValue:i.value.fecha,"onUpdate:modelValue":l[9]||(l[9]=e=>i.value.fecha=e),type:"date",dense:"",outlined:"",label:"Fecha"},null,8,["modelValue"])]),o("div",pe,[a(g,{modelValue:i.value.hora,"onUpdate:modelValue":l[10]||(l[10]=e=>i.value.hora=e),options:cl,dense:"",outlined:"","emit-value":"","map-options":"",label:"Horario"},null,8,["modelValue"])]),o("div",ve,[a(u,{modelValue:i.value.observaciones,"onUpdate:modelValue":l[11]||(l[11]=e=>i.value.observaciones=e),dense:"",outlined:"",label:"Comentario"},null,8,["modelValue"])]),o("div",_e,[a(g,{modelValue:L.value,"onUpdate:modelValue":l[12]||(l[12]=e=>L.value=e),options:j.value,"option-value":"id","option-label":"label","emit-value":"","map-options":"",dense:"",outlined:"",label:"Productos","use-input":"","input-debounce":"350",onFilter:kl},{"selected-item":n(e=>[o("div",be,[a(ul,{rounded:"",size:"24px"},{default:n(()=>[a(rl,{src:al(e?.opt?.imagen)},null,8,["src"])]),_:2},1024),o("span",fe,s(e?.opt?.label||""),1)])]),option:n(e=>[a($,Fl(Il(e.itemProps)),{default:n(()=>[a(V,{avatar:""},{default:n(()=>[a(ul,{rounded:"",size:"28px"},{default:n(()=>[a(rl,{src:al(e.opt.imagen)},null,8,["src"])]),_:2},1024)]),_:2},1024),a(V,null,{default:n(()=>[a(zl,null,{default:n(()=>[p(s(e.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]),o("div",Ve,[a(b,{color:"negative",class:"full-width",icon:"add",onClick:Rl})])]),a(sl,{dense:"",flat:"",bordered:"",class:"q-mt-sm"},{default:n(()=>[l[75]||(l[75]=o("thead",null,[o("tr",null,[o("th",null,"Detalle"),o("th",null,"Subtotal"),o("th",null,"Cantidad"),o("th",null,"Precio"),o("th",null,"Cod"),o("th",null,"Nombre"),o("th",null,"Obs")])],-1)),o("tbody",null,[(r(!0),_(T,null,F(i.value.productos,(e,c)=>(r(),_("tr",{key:`${e.producto_id}-${c}`},[o("td",null,[a(gl,{dense:"",label:"Op("+e.tipo+")",color:ml(e.tipo),"no-caps":"",size:"10px"},{default:n(()=>[a(Bl,null,{default:n(()=>[f((r(),O($,{clickable:"",onClick:C=>Ol(e,c)},{default:n(()=>[a(V,{avatar:""},{default:n(()=>[a(E,{name:"tune",color:"purple"})]),_:1}),a(V,null,{default:n(()=>l[72]||(l[72]=[p("Editar detalle")])),_:1})]),_:2},1032,["onClick"])),[[bl],[x]]),f((r(),O($,{clickable:"",onClick:C=>i.value.productos.splice(c,1)},{default:n(()=>[a(V,{avatar:""},{default:n(()=>[a(E,{name:"delete",color:"negative"})]),_:1}),a(V,null,{default:n(()=>l[73]||(l[73]=[p("Eliminar producto")])),_:1})]),_:2},1032,["onClick"])),[[bl],[x]])]),_:2},1024)]),_:2},1032,["label","color"])]),o("td",null,s((Number(e.cantidad)*Number(e.precio)).toFixed(2)),1),o("td",null,[f(o("input",{"onUpdate:modelValue":C=>e.cantidad=C,type:"text",style:{width:"40px"},onInput:C=>e.cantidad=e.cantidad<1?1:e.cantidad},null,40,ge),[[fl,e.cantidad,void 0,{number:!0}]])]),o("td",null,[f(o("input",{"onUpdate:modelValue":C=>e.precio=C,type:"text",style:{width:"50px"},onInput:C=>e.precio=e.precio<0?0:e.precio},null,40,Ue),[[fl,e.precio,void 0,{number:!0}]])]),o("td",null,s(e.codigo||e.producto_id),1),o("td",null,[o("div",Ce,[a(ul,{rounded:"",size:"30px"},{default:n(()=>[a(rl,{src:al(e.imagen)},null,8,["src"])]),_:2},1024),o("div",null,s(e.nombre),1)])]),o("td",null,s(e.observacion||"-"),1)]))),128)),i.value.productos.length===0?(r(),_("tr",we,l[74]||(l[74]=[o("td",{colspan:"7",class:"text-grey-7"},"Sin datos disponibles",-1)]))):_l("",!0)])]),_:1}),o("div",xe,"Total: "+s(wl.value.toFixed(2))+" Bs.",1)]),_:1}),a(Vl,{align:"between",class:"q-pa-md"},{default:n(()=>[f(a(b,{flat:"",color:"negative",label:"Cerrar"},null,512),[[x]]),a(b,{color:"green","no-caps":"",icon:"save",label:"Guardar cambios",loading:Z.value,onClick:$l},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(nl,{modelValue:G.value,"onUpdate:modelValue":l[63]||(l[63]=e=>G.value=e)},{default:n(()=>[a(A,{style:{width:"450px","max-width":"96vw"}},{default:n(()=>[a(w,{class:"row items-center q-pb-none"},{default:n(()=>[o("div",ye,"Pedido "+s(yl.value),1),a(il),f(a(b,{flat:"",round:"",dense:"",icon:"close"},null,512),[[x]])]),_:1}),a(w,null,{default:n(()=>[y.value==="NORMAL"?(r(),_("div",he,[o("div",Oe,[a(u,{modelValue:t.value.observacion,"onUpdate:modelValue":l[14]||(l[14]=e=>t.value.observacion=e),dense:"",outlined:"",label:"Observacion detalle"},null,8,["modelValue"])])])):y.value==="RES"?(r(),_("div",Pe,[o("div",ke,[a(u,{modelValue:t.value.precio_res,"onUpdate:modelValue":l[15]||(l[15]=e=>t.value.precio_res=e),dense:"",outlined:"",label:"Precio RES"},null,8,["modelValue"])]),o("div",Re,[a(u,{modelValue:t.value.res_trozado,"onUpdate:modelValue":l[16]||(l[16]=e=>t.value.res_trozado=e),dense:"",outlined:"",label:"Res trozado"},null,8,["modelValue"])]),o("div",Ee,[a(u,{modelValue:t.value.res_entero,"onUpdate:modelValue":l[17]||(l[17]=e=>t.value.res_entero=e),dense:"",outlined:"",label:"Res entero"},null,8,["modelValue"])]),o("div",$e,[a(u,{modelValue:t.value.res_pierna,"onUpdate:modelValue":l[18]||(l[18]=e=>t.value.res_pierna=e),dense:"",outlined:"",label:"Res pierna"},null,8,["modelValue"])]),o("div",Ne,[a(u,{modelValue:t.value.res_brazo,"onUpdate:modelValue":l[19]||(l[19]=e=>t.value.res_brazo=e),dense:"",outlined:"",label:"Res brazo"},null,8,["modelValue"])]),o("div",je,[a(u,{modelValue:t.value.observacion,"onUpdate:modelValue":l[20]||(l[20]=e=>t.value.observacion=e),dense:"",outlined:"",label:"Observacion detalle"},null,8,["modelValue"])])])):y.value==="CERDO"?(r(),_("div",Le,[o("div",Se,[a(u,{modelValue:t.value.cerdo_precio_total,"onUpdate:modelValue":l[21]||(l[21]=e=>t.value.cerdo_precio_total=e),dense:"",outlined:"",label:"Precio total"},null,8,["modelValue"])]),o("div",Qe,[a(u,{modelValue:t.value.cerdo_entero,"onUpdate:modelValue":l[22]||(l[22]=e=>t.value.cerdo_entero=e),dense:"",outlined:"",label:"Cerdo entero"},null,8,["modelValue"])]),o("div",qe,[a(u,{modelValue:t.value.cerdo_kilo,"onUpdate:modelValue":l[23]||(l[23]=e=>t.value.cerdo_kilo=e),dense:"",outlined:"",label:"Cerdo kilo"},null,8,["modelValue"])]),o("div",De,[a(u,{modelValue:t.value.cerdo_desmembrado,"onUpdate:modelValue":l[24]||(l[24]=e=>t.value.cerdo_desmembrado=e),dense:"",outlined:"",label:"Cerdo desmembrado"},null,8,["modelValue"])]),o("div",Ae,[a(u,{modelValue:t.value.cerdo_corte,"onUpdate:modelValue":l[25]||(l[25]=e=>t.value.cerdo_corte=e),dense:"",outlined:"",label:"Cerdo corte"},null,8,["modelValue"])]),o("div",Te,[a(u,{modelValue:t.value.observacion,"onUpdate:modelValue":l[26]||(l[26]=e=>t.value.observacion=e),dense:"",outlined:"",label:"Observacion detalle"},null,8,["modelValue"])])])):(r(),_("div",Fe,[o("div",Ie,[a(u,{modelValue:t.value.pollo_cja_b5,"onUpdate:modelValue":l[27]||(l[27]=e=>t.value.pollo_cja_b5=e),dense:"",outlined:"",label:"Cja b5"},null,8,["modelValue"])]),o("div",ze,[a(u,{modelValue:t.value.pollo_uni_b5,"onUpdate:modelValue":l[28]||(l[28]=e=>t.value.pollo_uni_b5=e),dense:"",outlined:"",label:"Uni b5"},null,8,["modelValue"])]),o("div",Be,[a(u,{modelValue:t.value.pollo_cja_b6,"onUpdate:modelValue":l[29]||(l[29]=e=>t.value.pollo_cja_b6=e),dense:"",outlined:"",label:"Cja b6"},null,8,["modelValue"])]),o("div",Ge,[a(u,{modelValue:t.value.pollo_uni_b6,"onUpdate:modelValue":l[30]||(l[30]=e=>t.value.pollo_uni_b6=e),dense:"",outlined:"",label:"Uni b6"},null,8,["modelValue"])]),o("div",Me,[a(u,{modelValue:t.value.pollo_cja_104,"onUpdate:modelValue":l[31]||(l[31]=e=>t.value.pollo_cja_104=e),dense:"",outlined:"",label:"Cja-104"},null,8,["modelValue"])]),o("div",Ke,[a(u,{modelValue:t.value.pollo_uni_104,"onUpdate:modelValue":l[32]||(l[32]=e=>t.value.pollo_uni_104=e),dense:"",outlined:"",label:"Unid-104"},null,8,["modelValue"])]),o("div",He,[a(u,{modelValue:t.value.pollo_cja_105,"onUpdate:modelValue":l[33]||(l[33]=e=>t.value.pollo_cja_105=e),dense:"",outlined:"",label:"Cja-105"},null,8,["modelValue"])]),o("div",Je,[a(u,{modelValue:t.value.pollo_uni_105,"onUpdate:modelValue":l[34]||(l[34]=e=>t.value.pollo_uni_105=e),dense:"",outlined:"",label:"Unid-105"},null,8,["modelValue"])]),o("div",Ye,[a(u,{modelValue:t.value.pollo_cja_106,"onUpdate:modelValue":l[35]||(l[35]=e=>t.value.pollo_cja_106=e),dense:"",outlined:"",label:"Cja-106"},null,8,["modelValue"])]),o("div",Ze,[a(u,{modelValue:t.value.pollo_uni_106,"onUpdate:modelValue":l[36]||(l[36]=e=>t.value.pollo_uni_106=e),dense:"",outlined:"",label:"Unid-106"},null,8,["modelValue"])]),o("div",We,[a(u,{modelValue:t.value.pollo_cja_107,"onUpdate:modelValue":l[37]||(l[37]=e=>t.value.pollo_cja_107=e),dense:"",outlined:"",label:"Cja-107"},null,8,["modelValue"])]),o("div",Xe,[a(u,{modelValue:t.value.pollo_uni_107,"onUpdate:modelValue":l[38]||(l[38]=e=>t.value.pollo_uni_107=e),dense:"",outlined:"",label:"Unid-107"},null,8,["modelValue"])]),o("div",lo,[a(u,{modelValue:t.value.pollo_cja_108,"onUpdate:modelValue":l[39]||(l[39]=e=>t.value.pollo_cja_108=e),dense:"",outlined:"",label:"Cja-108"},null,8,["modelValue"])]),o("div",eo,[a(u,{modelValue:t.value.pollo_uni_108,"onUpdate:modelValue":l[40]||(l[40]=e=>t.value.pollo_uni_108=e),dense:"",outlined:"",label:"Unid-108"},null,8,["modelValue"])]),o("div",oo,[a(u,{modelValue:t.value.pollo_cja_109,"onUpdate:modelValue":l[41]||(l[41]=e=>t.value.pollo_cja_109=e),dense:"",outlined:"",label:"Cja-109"},null,8,["modelValue"])]),o("div",ao,[a(u,{modelValue:t.value.pollo_uni_109,"onUpdate:modelValue":l[42]||(l[42]=e=>t.value.pollo_uni_109=e),dense:"",outlined:"",label:"Unid-109"},null,8,["modelValue"])]),o("div",to,[a(u,{modelValue:t.value.pollo_rango_unidades,"onUpdate:modelValue":l[43]||(l[43]=e=>t.value.pollo_rango_unidades=e),dense:"",outlined:"",label:"Rango pollo (unidades)"},null,8,["modelValue"])]),o("div",no,[a(u,{modelValue:t.value.pollo_ala,"onUpdate:modelValue":l[44]||(l[44]=e=>t.value.pollo_ala=e),dense:"",outlined:"",label:"Ala"},null,8,["modelValue"])]),o("div",uo,[a(g,{modelValue:t.value.pollo_ala_unidad,"onUpdate:modelValue":l[45]||(l[45]=e=>t.value.pollo_ala_unidad=e),options:h,dense:"",outlined:"",label:"Unidad ala"},null,8,["modelValue"])]),o("div",so,[a(u,{modelValue:t.value.pollo_cadera,"onUpdate:modelValue":l[46]||(l[46]=e=>t.value.pollo_cadera=e),dense:"",outlined:"",label:"Cadera"},null,8,["modelValue"])]),o("div",io,[a(g,{modelValue:t.value.pollo_cadera_unidad,"onUpdate:modelValue":l[47]||(l[47]=e=>t.value.pollo_cadera_unidad=e),options:h,dense:"",outlined:"",label:"Unidad cadera"},null,8,["modelValue"])]),o("div",ro,[a(u,{modelValue:t.value.pollo_pecho,"onUpdate:modelValue":l[48]||(l[48]=e=>t.value.pollo_pecho=e),dense:"",outlined:"",label:"Pecho"},null,8,["modelValue"])]),o("div",co,[a(g,{modelValue:t.value.pollo_pecho_unidad,"onUpdate:modelValue":l[49]||(l[49]=e=>t.value.pollo_pecho_unidad=e),options:h,dense:"",outlined:"",label:"Unidad pecho"},null,8,["modelValue"])]),o("div",mo,[a(u,{modelValue:t.value.pollo_pi_mu,"onUpdate:modelValue":l[50]||(l[50]=e=>t.value.pollo_pi_mu=e),dense:"",outlined:"",label:"Pi/Mu"},null,8,["modelValue"])]),o("div",po,[a(g,{modelValue:t.value.pollo_pi_mu_unidad,"onUpdate:modelValue":l[51]||(l[51]=e=>t.value.pollo_pi_mu_unidad=e),options:h,dense:"",outlined:"",label:"Unidad pi/mu"},null,8,["modelValue"])]),o("div",vo,[a(u,{modelValue:t.value.pollo_filete,"onUpdate:modelValue":l[52]||(l[52]=e=>t.value.pollo_filete=e),dense:"",outlined:"",label:"Filete"},null,8,["modelValue"])]),o("div",_o,[a(g,{modelValue:t.value.pollo_filete_unidad,"onUpdate:modelValue":l[53]||(l[53]=e=>t.value.pollo_filete_unidad=e),options:h,dense:"",outlined:"",label:"Unidad filete"},null,8,["modelValue"])]),o("div",bo,[a(u,{modelValue:t.value.pollo_cuello,"onUpdate:modelValue":l[54]||(l[54]=e=>t.value.pollo_cuello=e),dense:"",outlined:"",label:"Cuello"},null,8,["modelValue"])]),o("div",fo,[a(g,{modelValue:t.value.pollo_cuello_unidad,"onUpdate:modelValue":l[55]||(l[55]=e=>t.value.pollo_cuello_unidad=e),options:h,dense:"",outlined:"",label:"Unidad cuello"},null,8,["modelValue"])]),o("div",Vo,[a(u,{modelValue:t.value.pollo_hueso,"onUpdate:modelValue":l[56]||(l[56]=e=>t.value.pollo_hueso=e),dense:"",outlined:"",label:"Hueso"},null,8,["modelValue"])]),o("div",go,[a(g,{modelValue:t.value.pollo_hueso_unidad,"onUpdate:modelValue":l[57]||(l[57]=e=>t.value.pollo_hueso_unidad=e),options:h,dense:"",outlined:"",label:"Unidad hueso"},null,8,["modelValue"])]),o("div",Uo,[a(u,{modelValue:t.value.pollo_menudencia,"onUpdate:modelValue":l[58]||(l[58]=e=>t.value.pollo_menudencia=e),dense:"",outlined:"",label:"Menudencia"},null,8,["modelValue"])]),o("div",Co,[a(g,{modelValue:t.value.pollo_menudencia_unidad,"onUpdate:modelValue":l[59]||(l[59]=e=>t.value.pollo_menudencia_unidad=e),options:h,dense:"",outlined:"",label:"Unidad menudencia"},null,8,["modelValue"])]),o("div",wo,[a(u,{modelValue:t.value.pollo_bs,"onUpdate:modelValue":l[60]||(l[60]=e=>t.value.pollo_bs=e),dense:"",outlined:"",label:"BS"},null,8,["modelValue"])]),o("div",xo,[a(u,{modelValue:t.value.pollo_bs2,"onUpdate:modelValue":l[61]||(l[61]=e=>t.value.pollo_bs2=e),dense:"",outlined:"",label:"BS2"},null,8,["modelValue"])]),o("div",yo,[a(u,{modelValue:t.value.observacion,"onUpdate:modelValue":l[62]||(l[62]=e=>t.value.observacion=e),dense:"",outlined:"",label:"Observacion detalle"},null,8,["modelValue"])])]))]),_:1}),a(Vl,{align:"right"},{default:n(()=>[f(a(b,{flat:"",color:"negative",label:"Cerrar"},null,512),[[x]]),a(b,{color:"primary",label:"Guardar detalle",onClick:Pl})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(nl,{modelValue:ll.value,"onUpdate:modelValue":l[64]||(l[64]=e=>ll.value=e)},{default:n(()=>[a(A,{style:{width:"900px","max-width":"98vw"}},{default:n(()=>[a(w,{class:"row items-center q-pb-none"},{default:n(()=>[o("div",ho,"Pedido #"+s(U.value?.id),1),a(il),f(a(b,{flat:"",round:"",dense:"",icon:"close"},null,512),[[x]])]),_:1}),a(w,{class:"q-pt-sm"},{default:n(()=>[o("div",Oo,[o("div",Po,[l[76]||(l[76]=o("b",null,"Cliente:",-1)),p(" "+s(U.value?.cliente?.nombre||"-"),1)]),o("div",ko,[l[77]||(l[77]=o("b",null,"Fecha/Hora:",-1)),p(" "+s(U.value?.fecha||"-")+" "+s(U.value?.hora||"-"),1)]),o("div",Ro,[l[78]||(l[78]=o("b",null,"Pago:",-1)),p(" "+s(U.value?.tipo_pago||"-"),1)]),o("div",Eo,[l[79]||(l[79]=o("b",null,"Facturado:",-1)),p(" "+s(U.value?.facturado?"SI":"NO"),1)]),o("div",$o,[l[80]||(l[80]=o("b",null,"Estado:",-1)),p(" "+s(U.value?.estado||"-"),1)])]),a(sl,{dense:"",flat:"",bordered:""},{default:n(()=>[l[81]||(l[81]=o("thead",null,[o("tr",null,[o("th",null,"Codigo"),o("th",null,"Producto"),o("th",null,"Cantidad"),o("th",null,"Precio"),o("th",null,"Subtotal")])],-1)),o("tbody",null,[(r(!0),_(T,null,F(U.value?.detalles||[],e=>(r(),_("tr",{key:e.id},[o("td",null,s(e.producto?.codigo||e.producto_id),1),o("td",null,s(e.producto?.nombre||"Producto "+e.producto_id),1),o("td",null,s(Number(e.cantidad||0).toFixed(2)),1),o("td",null,s(Number(e.precio||0).toFixed(2)),1),o("td",null,s((Number(e.cantidad||0)*Number(e.precio||0)).toFixed(2)),1)]))),128))])]),_:1}),o("div",No,"Total: "+s(xl.value.toFixed(2))+" Bs.",1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Ko=Sl(jo,[["__scopeId","data-v-56e50d58"]]);export{Ko as default};
