import{_ as E,c as b,o as c,w as a,a as t,Q as C,e as h,b as l,aa as u,d as _,f as n,a3 as v,a4 as k,a5 as N,Z as P,a2 as f,a8 as Q,t as d,h as U,ab as q,ac as L}from"./index-CmoW1HI-.js";import{Q as V}from"./QSelect-YWvpHr97.js";import{Q as R}from"./QPagination-CYKlUxbO.js";import{a as x,b as g}from"./QMenu-j9-YnpjT.js";import{Q as w}from"./QItemLabel-BiiYZsTs.js";import{Q as T}from"./QList-MksEbVq0.js";import{Q as F,C as y}from"./ClosePopup-veQafRnd.js";import{Q as G}from"./QImg-BFhzNBj4.js";import{Q as A}from"./QBadge-CyZorIy0.js";import{Q as S}from"./QMarkupTable-6CKuV8-r.js";import{Q as I}from"./QSpace-CghvMLQs.js";import{Q as M}from"./QForm-I0BS1mnk.js";import{Q as z}from"./QPage-Dl-a7fNa.js";import{E as B}from"./Excel-DYSTQ5HC.js";import"./QChip-B_XB_8XG.js";import"./format-CJebrXOQ.js";import"./_commonjsHelpers-Bx2EM-6T.js";const D=()=>{const r={codigo:"",imagen:"uploads/default.png",producto_grupo_id:null,producto_grupo_padre_id:null,nombre:"",tipo_producto:"PF",codigo_unidad:"",unidades_caja:null,cantidad_presentacion:null,tipo:"NORMAL",oferta:" ",codigo_producto_sin:"",presentacion:"",codigo_grupo_sin:"",credito:null,active:!0};for(let o=1;o<=13;o++)r[`precio${o}`]=0;return r},j={name:"ProductosPage",data(){return{productos:[],producto:D(),productoDialog:!1,dialogImg:!1,loading:!1,actionPeriodo:"",filter:"",filterTipo:"TODOS",pagination:{page:1,rowsPerPage:15,rowsNumber:0},historialDialog:!1,historialCompras:[],productoHistorialNombre:"",grupoPadres:[],grupos:[],tiposProducto:[{label:"NORMAL",value:"NORMAL"},{label:"POLLO",value:"POLLO"},{label:"RES",value:"RES"},{label:"CERDO",value:"CERDO"}],tiposFiltro:[{label:"TODOS",value:"TODOS"},{label:"NORMAL",value:"NORMAL"},{label:"POLLO",value:"POLLO"},{label:"RES",value:"RES"},{label:"CERDO",value:"CERDO"}],unidadesCodigo:[{label:"KG",value:"KG"},{label:"U",value:"U"},{label:"UNIDA",value:"UNIDA"}],selectedImage:null,imagePreview:""}},mounted(){this.bootstrap()},methods:{async bootstrap(){await Promise.all([this.loadGrupoPadres(),this.loadGrupos()]),this.productosGet()},imageUrl(r){const o=r||"uploads/default.png";return`${this.$url}../${o}`},async loadGrupoPadres(){try{const r=await this.$axios.get("producto-grupo-padres");this.grupoPadres=r.data}catch(r){this.$alert.error(r.response?.data?.message||"No se pudo cargar grupo padre")}},async loadGrupos(r=null){try{const o={};r&&(o.producto_grupo_padre_id=r);const p=await this.$axios.get("producto-grupos",{params:o});this.grupos=p.data}catch(o){this.$alert.error(o.response?.data?.message||"No se pudo cargar grupos")}},onPadreChange(r){this.producto.producto_grupo_id=null,this.loadGrupos(r)},onTipoFilterChange(){this.pagination.page=1,this.productosGet()},copiarPrecio1(){const r=Number(this.producto.precio1||0);for(let o=2;o<=13;o++)this.producto[`precio${o}`]=r},autogenerarCodigo(){const r=(this.producto.nombre||"").toUpperCase().replace(/[^A-Z0-9 ]/g," ").trim().split(/\s+/).slice(0,3).map(p=>p.slice(0,3)).join(""),o=Date.now().toString().slice(-5);this.producto.codigo=r?`${r}-${o}`.slice(0,25):`PROD-${o}`},prodImgEdit(r){this.producto={...r},this.selectedImage=null,this.imagePreview="",this.dialogImg=!0},onImageChange(r){const o=r.target.files?.[0];o&&(this.selectedImage=o,this.imagePreview=URL.createObjectURL(o))},closeImgDialog(){this.dialogImg=!1,this.selectedImage=null,this.imagePreview&&URL.revokeObjectURL(this.imagePreview),this.imagePreview=""},async uploadImage(){if(!(!this.selectedImage||!this.producto.id)){this.loading=!0;try{const r=new FormData;r.append("image",this.selectedImage),r.append("id",this.producto.id),await this.$axios.post("uploadImage",r,{headers:{"Content-Type":"multipart/form-data"}}),this.$alert.success("Imagen actualizada"),this.closeImgDialog(),this.productosGet()}catch(r){this.$alert.error(r.response?.data?.message||"No se pudo actualizar imagen")}finally{this.loading=!1}}},verHistorial(r){this.loading=!0,this.productoHistorialNombre=r.nombre,this.$axios.get(`productos/${r.id}/historial-compras`).then(o=>{this.historialCompras=o.data,this.historialDialog=!0}).catch(()=>{this.$alert.error("Error al obtener historial")}).finally(()=>{this.loading=!1})},exportExcel(){this.loading=!0,this.$axios.get("productosAll").then(r=>{const p=[{columns:[{label:"Codigo",value:"codigo"},{label:"Nombre",value:"nombre"},{label:"Tipo producto",value:"tipo_producto"},{label:"Tipo",value:"tipo"},{label:"Precio1",value:"precio1"},{label:"Precio13",value:"precio13"},{label:"Activo",value:O=>O.active?"SI":"NO"}],content:r.data}];B.export(p,"Productos")}).catch(r=>{this.$alert.error(r.response?.data?.message||"Error al exportar")}).finally(()=>{this.loading=!1})},productoNew(){this.producto=D(),this.actionPeriodo="Nuevo",this.productoDialog=!0,this.loadGrupos()},productosGet(){this.loading=!0,this.$axios.get("productos",{params:{search:this.filter,tipo:this.filterTipo==="TODOS"?"":this.filterTipo,page:this.pagination.page,per_page:this.pagination.rowsPerPage}}).then(r=>{this.productos=r.data.data,this.pagination.rowsNumber=r.data.total}).catch(r=>{this.$alert.error(r.response?.data?.message||"Error al cargar productos")}).finally(()=>{this.loading=!1})},normalizeProductoBeforeSave(){this.producto.codigo=(this.producto.codigo||"").trim(),this.producto.nombre=(this.producto.nombre||"").trim(),this.producto.tipo_producto=(this.producto.tipo_producto||"PF").trim().toUpperCase(),this.producto.tipo=(this.producto.tipo||"NORMAL").toUpperCase(),this.producto.codigo||this.autogenerarCodigo();for(let r=1;r<=13;r++){const o=`precio${r}`,p=Number(this.producto[o]);this.producto[o]=Number.isFinite(p)?p:0}if(this.producto.producto_grupo_id&&!this.producto.producto_grupo_padre_id){const r=this.grupos.find(o=>o.id===this.producto.producto_grupo_id);r&&(this.producto.producto_grupo_padre_id=r.producto_grupo_padre_id)}},productoPost(){this.normalizeProductoBeforeSave(),this.loading=!0,this.$axios.post("productos",this.producto).then(()=>{this.productosGet(),this.productoDialog=!1,this.$alert.success("Producto creado")}).catch(r=>{this.$alert.error(r.response?.data?.message||"No se pudo crear")}).finally(()=>{this.loading=!1})},productoPut(){this.normalizeProductoBeforeSave(),this.loading=!0,this.$axios.put("productos/"+this.producto.id,this.producto).then(()=>{this.productosGet(),this.productoDialog=!1,this.$alert.success("Producto actualizado")}).catch(r=>{this.$alert.error(r.response?.data?.message||"No se pudo actualizar")}).finally(()=>{this.loading=!1})},async productoEdit(r){this.producto={...D(),...r},this.actionPeriodo="Editar",this.producto.producto_grupo_padre_id?await this.loadGrupos(this.producto.producto_grupo_padre_id):await this.loadGrupos(),this.productoDialog=!0},productoDelete(r){this.$alert.dialog("Desea eliminar el producto?").onOk(()=>{this.loading=!0,this.$axios.delete("productos/"+r).then(()=>{this.productosGet(),this.$alert.success("Producto eliminado")}).catch(o=>{this.$alert.error(o.response?.data?.message||"No se pudo eliminar")}).finally(()=>{this.loading=!1})})}}},H={class:"row q-col-gutter-sm items-end"},K={class:"col-12 col-md-4"},Z={class:"col-12 col-md-3"},J={class:"col-12 col-md-auto"},W={class:"col-12 col-md-auto"},X={class:"col-12 col-md-auto"},Y={class:"row justify-center q-mt-md"},$={style:{"min-width":"220px"}},oo={class:"text-right"},eo={class:"text-right"},lo={class:"text-subtitle1 text-bold"},to={class:"row q-col-gutter-sm"},io={class:"col-12 col-md-4"},ro={class:"col-12 col-md-2"},ao={class:"col-12 col-md-6"},so={class:"col-12 col-md-3"},uo={class:"col-12 col-md-3"},no={class:"col-12 col-md-2"},co={class:"col-12 col-md-2"},po={class:"col-12 col-md-2 flex items-center"},mo={class:"col-12 col-md-2"},go={class:"col-12 col-md-2"},ho={class:"col-12 col-md-2"},fo={class:"col-12 col-md-2"},bo={class:"col-12 col-md-2"},_o={class:"col-12 col-md-2"},vo={class:"col-12 col-md-6"},Vo={class:"col-12 col-md-6"},Co={class:"col-12 row items-center q-col-gutter-sm"},Po={class:"col-12 col-md-3"},xo={class:"col-12 col-md-3"},wo={class:"col-12"},yo={class:"row q-col-gutter-sm"},ko={class:"text-right q-mt-md"},No={class:"text-center q-mb-sm"},Uo={class:"row q-col-gutter-sm"},Io={class:"col-12"},Do={class:"text-h6"};function Oo(r,o,p,O,i,s){return c(),b(z,{class:"q-pa-sm"},{default:a(()=>[t(C,{flat:"",bordered:""},{default:a(()=>[t(h,{class:"q-pa-sm"},{default:a(()=>[l("div",H,[l("div",K,[t(u,{modelValue:i.filter,"onUpdate:modelValue":[o[0]||(o[0]=e=>i.filter=e),s.productosGet],label:"Buscar por codigo o nombre",dense:"",outlined:"",debounce:"300"},{append:a(()=>[t(_,{name:"search"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),l("div",Z,[t(V,{modelValue:i.filterTipo,"onUpdate:modelValue":[o[1]||(o[1]=e=>i.filterTipo=e),s.onTipoFilterChange],options:i.tiposFiltro,label:"Filtrar tipo",dense:"",outlined:"","emit-value":"","map-options":""},null,8,["modelValue","options","onUpdate:modelValue"])]),l("div",J,[t(n,{color:"primary",label:"Actualizar","no-caps":"",icon:"refresh",loading:i.loading,onClick:s.productosGet},null,8,["loading","onClick"])]),l("div",W,[t(n,{color:"primary",label:"Descargar","no-caps":"",icon:"fa-solid fa-file-excel",loading:i.loading,onClick:s.exportExcel},null,8,["loading","onClick"])]),l("div",X,[t(n,{color:"green",label:"Nuevo","no-caps":"",icon:"add_circle_outline",loading:i.loading,onClick:s.productoNew},null,8,["loading","onClick"])])]),l("div",Y,[t(R,{modelValue:i.pagination.page,"onUpdate:modelValue":[o[2]||(o[2]=e=>i.pagination.page=e),s.productosGet],max:Math.ceil(i.pagination.rowsNumber/i.pagination.rowsPerPage)||1,color:"primary","boundary-numbers":"","max-pages":"6"},null,8,["modelValue","max","onUpdate:modelValue"])]),t(S,{dense:"",flat:"",bordered:"","wrap-cells":"",class:"q-mt-sm"},{default:a(()=>[o[32]||(o[32]=l("thead",null,[l("tr",null,[l("th",null,"Opciones"),l("th",null,"Imagen"),l("th",null,"Codigo"),l("th",null,"Nombre"),l("th",null,"Tipo producto"),l("th",null,"Grupo padre"),l("th",null,"Grupo"),l("th",null,"Precio 1"),l("th",null,"Activo"),l("th",null,"Stock")])],-1)),l("tbody",null,[(c(!0),v(k,null,N(i.productos,e=>(c(),v("tr",{key:e.id},[l("td",null,[t(F,{label:"Opciones","no-caps":"",size:"10px",dense:"",color:"primary"},{default:a(()=>[t(T,null,{default:a(()=>[P((c(),b(x,{clickable:"",onClick:m=>s.productoEdit(e)},{default:a(()=>[t(g,{avatar:""},{default:a(()=>[t(_,{name:"edit"})]),_:1}),t(g,null,{default:a(()=>[t(w,null,{default:a(()=>o[28]||(o[28]=[f("Editar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[y]]),P((c(),b(x,{clickable:"",onClick:m=>s.prodImgEdit(e)},{default:a(()=>[t(g,{avatar:""},{default:a(()=>[t(_,{name:"image"})]),_:1}),t(g,null,{default:a(()=>[t(w,null,{default:a(()=>o[29]||(o[29]=[f("Cambiar imagen")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[y]]),P((c(),b(x,{clickable:"",onClick:m=>s.productoDelete(e.id)},{default:a(()=>[t(g,{avatar:""},{default:a(()=>[t(_,{name:"delete"})]),_:1}),t(g,null,{default:a(()=>[t(w,null,{default:a(()=>o[30]||(o[30]=[f("Eliminar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[y]]),P((c(),b(x,{clickable:"",onClick:m=>s.verHistorial(e)},{default:a(()=>[t(g,{avatar:""},{default:a(()=>[t(_,{name:"history"})]),_:1}),t(g,null,{default:a(()=>[t(w,null,{default:a(()=>o[31]||(o[31]=[f("Historial de compras")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[y]])]),_:2},1024)]),_:2},1024)]),l("td",null,[t(Q,{rounded:"",size:"48px"},{default:a(()=>[t(G,{src:s.imageUrl(e.imagen)},null,8,["src"])]),_:2},1024)]),l("td",null,d(e.codigo),1),l("td",$,d(e.nombre),1),l("td",null,d(e.tipo_producto),1),l("td",null,d(e.producto_grupo_padre?.nombre||"-"),1),l("td",null,d(e.producto_grupo?.nombre||"-"),1),l("td",oo,d(Number(e.precio1||0).toFixed(3)),1),l("td",null,[t(A,{color:e.active?"positive":"negative","text-color":"white"},{default:a(()=>[f(d(e.active?"SI":"NO"),1)]),_:2},1032,["color"])]),l("td",eo,d(Number(e.stock||0).toFixed(3)),1)]))),128))])]),_:1})]),_:1})]),_:1}),t(U,{modelValue:i.productoDialog,"onUpdate:modelValue":o[22]||(o[22]=e=>i.productoDialog=e),persistent:""},{default:a(()=>[t(C,{style:{width:"980px","max-width":"98vw"}},{default:a(()=>[t(h,{class:"row items-center q-pb-none"},{default:a(()=>[l("div",lo,d(i.actionPeriodo)+" producto",1),t(I),t(n,{icon:"close",flat:"",round:"",dense:"",onClick:o[3]||(o[3]=e=>i.productoDialog=!1)})]),_:1}),t(h,{class:"q-pt-sm"},{default:a(()=>[t(M,{onSubmit:o[21]||(o[21]=e=>i.producto.id?s.productoPut():s.productoPost())},{default:a(()=>[l("div",to,[l("div",io,[t(u,{modelValue:i.producto.codigo,"onUpdate:modelValue":o[4]||(o[4]=e=>i.producto.codigo=e),label:"Codigo",dense:"",outlined:"",maxlength:"25",rules:[e=>!!e||"Requerido"]},null,8,["modelValue","rules"])]),l("div",ro,[t(n,{color:"secondary","no-caps":"",label:"Generar",class:"full-width",onClick:s.autogenerarCodigo},null,8,["onClick"])]),l("div",ao,[t(u,{modelValue:i.producto.nombre,"onUpdate:modelValue":o[5]||(o[5]=e=>i.producto.nombre=e),label:"Nombre",dense:"",outlined:"",maxlength:"105",rules:[e=>!!e||"Requerido"]},null,8,["modelValue","rules"])]),l("div",so,[t(V,{modelValue:i.producto.producto_grupo_padre_id,"onUpdate:modelValue":[o[6]||(o[6]=e=>i.producto.producto_grupo_padre_id=e),s.onPadreChange],options:i.grupoPadres,"option-value":"id","option-label":"nombre","emit-value":"","map-options":"",label:"Grupo padre",dense:"",outlined:"",clearable:""},null,8,["modelValue","options","onUpdate:modelValue"])]),l("div",uo,[t(V,{modelValue:i.producto.producto_grupo_id,"onUpdate:modelValue":o[7]||(o[7]=e=>i.producto.producto_grupo_id=e),options:i.grupos,"option-value":"id","option-label":"nombre","emit-value":"","map-options":"",label:"Grupo",dense:"",outlined:"",clearable:""},null,8,["modelValue","options"])]),l("div",no,[t(u,{modelValue:i.producto.tipo_producto,"onUpdate:modelValue":o[8]||(o[8]=e=>i.producto.tipo_producto=e),label:"Tipo prod. (3)",dense:"",outlined:"",maxlength:"3",rules:[e=>!!e||"Requerido"]},null,8,["modelValue","rules"])]),l("div",co,[t(V,{modelValue:i.producto.tipo,"onUpdate:modelValue":o[9]||(o[9]=e=>i.producto.tipo=e),options:i.tiposProducto,label:"Tipo",dense:"",outlined:"","emit-value":"","map-options":""},null,8,["modelValue","options"])]),l("div",po,[t(q,{modelValue:i.producto.active,"onUpdate:modelValue":o[10]||(o[10]=e=>i.producto.active=e),label:"Activo"},null,8,["modelValue"])]),l("div",mo,[t(V,{modelValue:i.producto.codigo_unidad,"onUpdate:modelValue":o[11]||(o[11]=e=>i.producto.codigo_unidad=e),options:i.unidadesCodigo,"option-value":"value","option-label":"label","emit-value":"","map-options":"",label:"Codigo unidad",dense:"",outlined:"",clearable:""},null,8,["modelValue","options"])]),l("div",go,[t(u,{modelValue:i.producto.unidades_caja,"onUpdate:modelValue":o[12]||(o[12]=e=>i.producto.unidades_caja=e),modelModifiers:{number:!0},label:"Unidades caja",dense:"",outlined:"",type:"number",step:"0.01"},null,8,["modelValue"])]),l("div",ho,[t(u,{modelValue:i.producto.cantidad_presentacion,"onUpdate:modelValue":o[13]||(o[13]=e=>i.producto.cantidad_presentacion=e),modelModifiers:{number:!0},label:"Cant. presentacion",dense:"",outlined:"",type:"number",step:"0.001"},null,8,["modelValue"])]),l("div",fo,[t(u,{modelValue:i.producto.codigo_producto_sin,"onUpdate:modelValue":o[14]||(o[14]=e=>i.producto.codigo_producto_sin=e),label:"Codigo prod SIN",dense:"",outlined:"",maxlength:"100"},null,8,["modelValue"])]),l("div",bo,[t(u,{modelValue:i.producto.codigo_grupo_sin,"onUpdate:modelValue":o[15]||(o[15]=e=>i.producto.codigo_grupo_sin=e),label:"Codigo grupo SIN",dense:"",outlined:"",maxlength:"100"},null,8,["modelValue"])]),l("div",_o,[t(u,{modelValue:i.producto.credito,"onUpdate:modelValue":o[16]||(o[16]=e=>i.producto.credito=e),modelModifiers:{number:!0},label:"Credito",dense:"",outlined:"",type:"number",step:"0.001"},null,8,["modelValue"])]),l("div",vo,[t(u,{modelValue:i.producto.presentacion,"onUpdate:modelValue":o[17]||(o[17]=e=>i.producto.presentacion=e),label:"Presentacion",dense:"",outlined:"",maxlength:"300"},null,8,["modelValue"])]),l("div",Vo,[t(u,{modelValue:i.producto.oferta,"onUpdate:modelValue":o[18]||(o[18]=e=>i.producto.oferta=e),label:"Oferta",dense:"",outlined:"",maxlength:"255"},null,8,["modelValue"])]),l("div",Co,[l("div",Po,[t(u,{modelValue:i.producto.precio1,"onUpdate:modelValue":o[19]||(o[19]=e=>i.producto.precio1=e),modelModifiers:{number:!0},label:"Precio base (precio1)",dense:"",outlined:"",type:"number",step:"0.001",rules:[e=>e>=0||"Min 0"]},null,8,["modelValue","rules"])]),l("div",xo,[t(n,{color:"secondary","no-caps":"",label:"Copiar precio1 a precio2..13",class:"full-width",onClick:s.copiarPrecio1},null,8,["onClick"])])]),l("div",wo,[o[33]||(o[33]=l("div",{class:"text-subtitle2 q-mb-sm"},"Precios 1..13",-1)),l("div",yo,[(c(),v(k,null,N(13,e=>l("div",{class:"col-6 col-md-2",key:e},[t(u,{modelValue:i.producto["precio"+e],"onUpdate:modelValue":m=>i.producto["precio"+e]=m,modelModifiers:{number:!0},label:`Precio ${e}`,dense:"",outlined:"",type:"number",step:"0.001",rules:[m=>m>=0||"Min 0"]},null,8,["modelValue","onUpdate:modelValue","label","rules"])])),64))])])]),l("div",ko,[t(n,{color:"negative",label:"Cancelar",onClick:o[20]||(o[20]=e=>i.productoDialog=!1),"no-caps":"",loading:i.loading},null,8,["loading"]),t(n,{color:"primary",label:"Guardar",type:"submit","no-caps":"",loading:i.loading,class:"q-ml-sm"},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:i.dialogImg,"onUpdate:modelValue":o[25]||(o[25]=e=>i.dialogImg=e),persistent:""},{default:a(()=>[t(C,{style:{width:"420px","max-width":"95vw"}},{default:a(()=>[t(h,{class:"q-pb-none row items-center text-bold"},{default:a(()=>[f(" Cambiar imagen de "+d(i.producto?.nombre||"producto")+" ",1),t(I),t(n,{icon:"close",flat:"",round:"",dense:"",onClick:s.closeImgDialog},null,8,["onClick"])]),_:1}),t(h,{class:"q-pt-sm"},{default:a(()=>[l("div",No,[t(Q,{size:"220px",rounded:""},{default:a(()=>[t(G,{src:i.imagePreview||s.imageUrl(i.producto.imagen)},null,8,["src"])]),_:1})]),l("div",Uo,[l("div",Io,[t(n,{icon:"image",label:"Seleccionar foto","no-caps":"",color:"primary",outline:"",class:"full-width",onClick:o[23]||(o[23]=e=>r.$refs.productImageInput.click())}),l("input",{ref:"productImageInput",type:"file",accept:"image/*",style:{display:"none"},onChange:o[24]||(o[24]=(...e)=>s.onImageChange&&s.onImageChange(...e))},null,544)])])]),_:1}),t(L,{align:"right"},{default:a(()=>[t(n,{color:"negative",flat:"","no-caps":"",label:"Cancelar",onClick:s.closeImgDialog,loading:i.loading},null,8,["onClick","loading"]),t(n,{color:"primary","no-caps":"",label:"Guardar imagen",onClick:s.uploadImage,loading:i.loading,disable:!i.selectedImage},null,8,["onClick","loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:i.historialDialog,"onUpdate:modelValue":o[27]||(o[27]=e=>i.historialDialog=e),persistent:""},{default:a(()=>[t(C,{style:{width:"850px","max-width":"98vw"}},{default:a(()=>[t(h,{class:"row items-center q-pb-none"},{default:a(()=>[l("div",Do,"Historial de compras: "+d(i.productoHistorialNombre),1),t(I),t(n,{icon:"close",flat:"",round:"",dense:"",onClick:o[26]||(o[26]=e=>i.historialDialog=!1)})]),_:1}),t(h,{class:"q-pt-none"},{default:a(()=>[t(S,{dense:"","wrap-cells":"",flat:"",bordered:""},{default:a(()=>[o[34]||(o[34]=l("thead",null,[l("tr",null,[l("th",null,"#"),l("th",null,"Fecha"),l("th",null,"Lote"),l("th",null,"Vencimiento"),l("th",null,"Cantidad"),l("th",null,"Vendida"),l("th",null,"Disponible"),l("th",null,"% Vendido"),l("th",null,"Precio"),l("th",null,"Total")])],-1)),l("tbody",null,[(c(!0),v(k,null,N(i.historialCompras,(e,m)=>(c(),v("tr",{key:e.id},[l("td",null,d(m+1),1),l("td",null,d(e.compra?.fecha),1),l("td",null,d(e.lote),1),l("td",null,d(e.fecha_vencimiento),1),l("td",null,d(Number(e.cantidad||0).toFixed(3)),1),l("td",null,d(Number(e.cantidad_vendida||0).toFixed(3)),1),l("td",null,d(Number(e.cantidad_disponible||0).toFixed(3)),1),l("td",null,d(Number(e.porcentaje_vendido||0).toFixed(2))+"%",1),l("td",null,d(Number(e.precio||0).toFixed(3)),1),l("td",null,d(Number(e.total||0).toFixed(3)),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const Jo=E(j,[["render",Oo]]);export{Jo as default};
