import{_ as Ll,g as Tl,r as p,x as D,l as Al,c as k,o as r,w as n,a,Q as L,e as h,b as o,aa as u,f as U,a6 as Fl,a2 as c,t as s,d as j,a3 as _,a1 as vl,a4 as T,a5 as A,Z as V,h as al,as as Il,ab as zl,ad as Bl,ae as Gl,a8 as tl,a7 as _l,aq as bl,ac as fl}from"./index-CmoW1HI-.js";import{Q as b}from"./QSelect-YWvpHr97.js";import{Q as f}from"./QChip-B_XB_8XG.js";import{a as N,b as g}from"./QMenu-j9-YnpjT.js";import{Q as Vl,C as x}from"./ClosePopup-veQafRnd.js";import{Q as dl}from"./QMarkupTable-6CKuV8-r.js";import{Q as nl}from"./QSpace-CghvMLQs.js";import{Q as ul}from"./QImg-BFhzNBj4.js";import{Q as Ml}from"./QItemLabel-BiiYZsTs.js";import{Q as Kl}from"./QList-MksEbVq0.js";import{Q as Hl}from"./QPage-Dl-a7fNa.js";import"./format-CJebrXOQ.js";const Jl={class:"col-12 col-md-2"},Yl={class:"col-12 col-md-2"},Zl={class:"col-12 col-md-2"},Wl={class:"col-12 col-md-1"},Xl={class:"col-12 col-md-1"},le={class:"col-6 col-md-2"},ee={class:"col-6 col-md-2"},oe={class:"col-6 col-md-2"},ae={class:"col-6 col-md-2"},te={class:"col-6 col-md-2"},de={class:"col-6 col-md-3"},ne={class:"col-6 col-md-3"},ue={class:"col-6 col-md-3"},se={class:"col-6 col-md-3"},ie={class:"col-12 col-md-4"},re={class:"col-12 col-md-3"},ce={class:"col-12 col-md-auto"},me={key:1,class:"row items-center q-gutter-xs"},pe={style:{padding:"0",margin:"0","list-style":"none"}},ve={key:0},_e={class:"text-h6"},be={class:"row q-col-gutter-sm"},fe={class:"col-12 col-md-4"},Ve={class:"col-12 col-md-2"},ge={class:"col-12 col-md-3"},Ue={class:"col-12 col-md-3"},Ce={class:"col-12 col-md-12"},we={class:"col-12 col-md-10"},xe={class:"row items-center no-wrap q-gutter-xs"},ye={class:"ellipsis"},he={class:"col-12 col-md-2"},Oe=["onUpdate:modelValue","onInput"],Pe=["onUpdate:modelValue","onInput"],ke={class:"row items-center no-wrap q-gutter-sm"},Ee={key:0},je={class:"text-h6 q-mt-sm"},Ne={class:"text-h6"},Se={key:0,class:"row q-col-gutter-sm"},qe={class:"col-12"},$e={key:1,class:"row q-col-gutter-sm"},Re={class:"col-12 col-md-4"},Qe={class:"col-12 col-md-4"},De={class:"col-12 col-md-4"},Le={class:"col-12 col-md-6"},Te={class:"col-12 col-md-6"},Ae={class:"col-12"},Fe={key:2,class:"row q-col-gutter-sm"},Ie={class:"col-12 col-md-4"},ze={class:"col-12 col-md-4"},Be={class:"col-12 col-md-4"},Ge={class:"col-12 col-md-6"},Me={class:"col-12 col-md-6"},Ke={class:"col-12"},He={key:3,class:"row q-col-gutter-sm"},Je={class:"col-12 col-md-6"},Ye={class:"col-12 col-md-6"},Ze={class:"col-12 col-md-6"},We={class:"col-12 col-md-6"},Xe={class:"col-12 col-md-6"},lo={class:"col-12 col-md-6"},eo={class:"col-12 col-md-6"},oo={class:"col-12 col-md-6"},ao={class:"col-12 col-md-6"},to={class:"col-12 col-md-6"},no={class:"col-12 col-md-6"},uo={class:"col-12 col-md-6"},so={class:"col-12 col-md-6"},io={class:"col-12 col-md-6"},ro={class:"col-12 col-md-6"},co={class:"col-12 col-md-6"},mo={class:"col-12"},po={class:"col-12 col-md-6"},vo={class:"col-12 col-md-6"},_o={class:"col-12 col-md-6"},bo={class:"col-12 col-md-6"},fo={class:"col-12 col-md-6"},Vo={class:"col-12 col-md-6"},go={class:"col-12 col-md-6"},Uo={class:"col-12 col-md-6"},Co={class:"col-12 col-md-6"},wo={class:"col-12 col-md-6"},xo={class:"col-12 col-md-6"},yo={class:"col-12 col-md-6"},ho={class:"col-12 col-md-6"},Oo={class:"col-12 col-md-6"},Po={class:"col-12 col-md-6"},ko={class:"col-12 col-md-6"},Eo={class:"col-12 col-md-6"},jo={class:"col-12 col-md-6"},No={class:"col-12"},So={class:"text-h6"},qo={class:"row q-col-gutter-sm q-mb-sm"},$o={class:"col-12 col-md-3"},Ro={class:"col-12 col-md-3"},Qo={class:"col-12 col-md-2"},Do={class:"col-12 col-md-2"},Lo={class:"col-12 col-md-2"},To={class:"text-h6 q-mt-sm text-right"},Ao={__name:"MisPedidosTotales",setup(Fo){const{proxy:v}=Tl(),F=p(new Date().toISOString().slice(0,10)),Y=p(!1),Z=p(!1),W=p(!1),X=p(""),I=p("TODOS"),z=p(null),B=p("TODOS"),sl=p([{label:"Todos",value:null}]),gl=[{label:"Todos",value:"TODOS"},{label:"Creado",value:"Creado"},{label:"Enviado",value:"Enviado"}],il=p([]),C=p({total:0,creado:0,pendiente:0,enviado:0,no_enviado:0,monto_total:0,tipo_normal:0,tipo_pollo:0,tipo_res:0,tipo_cerdo:0}),G=p(!1),M=p(!1),ll=p(!1),w=p(null),S=p(-1),t=p({}),O=p("NORMAL"),P=["KG","CAJA","UNIDAD"],i=p({id:null,productos:[]}),Ul=[{label:"Contado",value:"Contado"},{label:"Pago QR",value:"QR"},{label:"Credito",value:"Credito"},{label:"Boleta anterior",value:"Boleta anterior"}],rl=[{label:"06:00-07:30",value:"06:00-07:30"},{label:"07:30-09:00",value:"07:30-09:00"},{label:"09:00-10:30",value:"09:00-10:30"},{label:"10:30-12:00",value:"10:30-12:00"},{label:"SEGUNDA VUELTA",value:"SEGUNDA VUELTA"},{label:"SE RECOGE",value:"SE RECOGE"}],E=p([]),q=p([]),$=p(null),Cl=[{label:"Todos",value:"TODOS"},{label:"Normal",value:"NORMAL"},{label:"Pollo",value:"POLLO"},{label:"Res",value:"RES"},{label:"Cerdo",value:"CERDO"}],K=D(()=>H.value.filter(d=>J(d))),wl=D(()=>i.value.productos.reduce((d,l)=>d+Number(l.cantidad||0)*Number(l.precio||0),0)),xl=D(()=>(w.value?.detalles||[]).reduce((d,l)=>d+Number(l.cantidad||0)*Number(l.precio||0),0)),yl=D(()=>O.value==="RES"?"Res":O.value==="CERDO"?"Cerdo":O.value==="POLLO"?"Pollo":"Normal"),H=D(()=>{const d=X.value.trim().toLowerCase();return il.value.filter(l=>{if(!(I.value==="TODOS"||ml(l).includes(I.value)))return!1;if(!d)return!0;const m=(l.user?.name||"").toLowerCase(),y=(l.cliente?.nombre||"").toLowerCase(),Rl=String(l.id),Ql=(l.detalles||[]).map(Dl=>Dl.producto?.nombre||"").join(" ").toLowerCase();return y.includes(d)||Rl.includes(d)||Ql.includes(d)||m.includes(d)})});function R(d){const l=String(d||"NORMAL").trim().toUpperCase();return l==="POLLO"||l==="RES"||l==="CERDO"?l:"NORMAL"}function hl(d){return d==="Enviado"?"green":d==="Pendiente"?"deep-orange":d==="Creado"?"orange":d==="Anulado"?"negative":"primary"}function cl(d){return d==="POLLO"?"orange":d==="RES"?"red":d==="CERDO"?"brown":"primary"}function ml(d){const l=[];if(d?.contiene_normal&&l.push("NORMAL"),d?.contiene_pollo&&l.push("POLLO"),d?.contiene_res&&l.push("RES"),d?.contiene_cerdo&&l.push("CERDO"),l.length>0)return l;const e=Array.from(new Set((d?.detalles||[]).map(m=>R(m?.producto?.tipo)).filter(Boolean)));return e.length>0?e:["NORMAL"]}function J(d){return d&&(d.estado==="Creado"||d.estado==="Pendiente")}function el(d){const l=d||"uploads/default.png";return`${v.$url}../${l}`}function ol(d){return d==="RES"?{precio_res:"",res_trozado:"",res_entero:"",res_pierna:"",res_brazo:"",observacion:""}:d==="CERDO"?{cerdo_precio_total:"",cerdo_entero:"",cerdo_desmembrado:"",cerdo_corte:"",cerdo_kilo:"",observacion:""}:d==="POLLO"?{pollo_cja_b5:"",pollo_uni_b5:"",pollo_cja_b6:"",pollo_uni_b6:"",pollo_cja_104:"",pollo_uni_104:"",pollo_cja_105:"",pollo_uni_105:"",pollo_cja_106:"",pollo_uni_106:"",pollo_cja_107:"",pollo_uni_107:"",pollo_cja_108:"",pollo_uni_108:"",pollo_cja_109:"",pollo_uni_109:"",pollo_rango_unidades:"",pollo_ala:"",pollo_ala_unidad:"KG",pollo_cadera:"",pollo_cadera_unidad:"KG",pollo_pecho:"",pollo_pecho_unidad:"KG",pollo_pi_mu:"",pollo_pi_mu_unidad:"KG",pollo_filete:"",pollo_filete_unidad:"KG",pollo_cuello:"",pollo_cuello_unidad:"KG",pollo_hueso:"",pollo_hueso_unidad:"KG",pollo_menudencia:"",pollo_menudencia_unidad:"KG",pollo_bs:"",pollo_bs2:"",observacion:""}:{observacion:""}}function Ol(d,l){S.value=l,O.value=R(d?.tipo),t.value={...ol(O.value),...d?.detalle_extra||{}},M.value=!0}function Pl(){if(S.value<0||!i.value.productos[S.value])return;const d=i.value.productos[S.value];d.detalle_extra={...t.value},d.observacion=t.value.observacion||d.observacion||"",M.value=!1,S.value=-1,t.value={}}function kl(d,l){l(()=>{const e=(d||"").toLowerCase();if(!e){q.value=[...E.value];return}q.value=E.value.filter(m=>m.label.toLowerCase().includes(e))})}function El(){if(!$.value)return;const d=E.value.find(e=>e.id===$.value);if(!d)return;const l=i.value.productos.find(e=>e.producto_id===d.id);l?l.cantidad+=1:i.value.productos.push({producto_id:d.id,codigo:d.codigo,nombre:d.nombre,imagen:d.imagen||"uploads/default.png",tipo:d.tipo,cantidad:1,precio:d.precio,observacion:"",detalle_extra:ol(d.tipo)}),$.value=null}function jl(d){if(!J(d)){v.$alert.error("El pedido enviado ya no se puede modificar");return}i.value={id:d.id,fecha:d.fecha,hora:d.hora||rl[0].value,facturado:!!d.facturado,tipo_pago:d.tipo_pago||"Contado",observaciones:d.observaciones||"",productos:(d.detalles||[]).map(l=>({producto_id:l.producto_id,codigo:l.producto?.codigo,nombre:l.producto?.nombre||`Producto ${l.producto_id}`,imagen:l.producto?.imagen||"uploads/default.png",tipo:R(l.producto?.tipo),cantidad:Number(l.cantidad||0),precio:Number(l.precio||0),observacion:l.observacion_detalle||"",detalle_extra:{...ol(R(l.producto?.tipo)),...l.detalle_extra||{}}}))},G.value=!0}function pl(d){w.value=d,ll.value=!0}async function Nl(){if(i.value.id)try{const d=i.value.productos.map(l=>({producto_id:l.producto_id,cantidad:Number(l.cantidad||0),precio:Number(l.precio||0),observacion:l.observacion||"",detalle_extra:l.detalle_extra||{}})).filter(l=>l.cantidad>0);if(d.length===0){v.$alert.error("Debe agregar al menos un producto");return}W.value=!0,await v.$axios.put(`/pedidos/${i.value.id}`,{fecha:i.value.fecha,hora:i.value.hora,facturado:i.value.facturado,tipo_pago:i.value.tipo_pago,observaciones:i.value.observaciones,comentario_visita:i.value.observaciones,productos:d}),v.$alert.success("Pedido actualizado"),G.value=!1,await Q()}catch(d){v.$alert.error(d?.message||d?.response?.data?.message||"No se pudo guardar")}finally{W.value=!1}}async function Sl(d){if(J(d))try{await v.$axios.put(`/pedidos/${d.id}/enviar`),v.$alert.success("Pedido enviado"),await Q()}catch(l){v.$alert.error(l?.response?.data?.message||"No se pudo enviar")}}async function ql(){if(!(K.value.length===0||!await new Promise(l=>{v.$q.dialog({title:"Envio emergencia",message:`Se enviaran ${K.value.length} pedido(s). Desea continuar?`,cancel:!0,persistent:!0,ok:{label:"Si, enviar",color:"warning",textColor:"black"},cancel:{label:"Cancelar",flat:!0,color:"grey-8"}}).onOk(()=>l(!0)).onCancel(()=>l(!1))}))){Z.value=!0;try{await v.$axios.post("/pedidos-totales/enviar-emergencia",{fecha:F.value,user_id:z.value,estado:B.value,ids:K.value.map(l=>l.id)}),v.$alert.success("Envio emergencia completado"),await Q()}catch(l){v.$alert.error(l?.response?.data?.message||"No se pudo completar el envio emergencia")}finally{Z.value=!1}}}async function Q(){Y.value=!0;try{const d=await v.$axios.get("/pedidos-totales",{params:{fecha:F.value,user_id:z.value,estado:B.value}});il.value=d.data?.data||[];const l=Array.isArray(d.data?.vendedores)?d.data.vendedores:[];sl.value=[{label:"Todos",value:null},...l.map(e=>({label:e.name,value:e.id}))],C.value=d.data?.stats||{total:0,creado:0,pendiente:0,enviado:0,no_enviado:0,monto_total:0,tipo_normal:0,tipo_pollo:0,tipo_res:0,tipo_cerdo:0}}catch(d){v.$alert.error(d?.response?.data?.message||"No se pudo cargar pedidos")}finally{Y.value=!1}}async function $l(){try{const d=await v.$axios.get("/productosAll"),l=Array.isArray(d.data)?d.data:[];E.value=l.map(e=>({id:e.id,codigo:e.codigo,nombre:e.nombre,imagen:e.imagen||"uploads/default.png",tipo:R(e.tipo),precio:Number(e.precio1||0),label:`${e.codigo||e.id}-${e.nombre} ${Number(e.precio1||0).toFixed(2)} Bs`})),q.value=[...E.value]}catch{E.value=[],q.value=[]}}return Al(async()=>{await Promise.all([Q(),$l()])}),(d,l)=>(r(),k(Hl,{class:"q-pa-sm misped-page"},{default:n(()=>[a(L,{flat:"",bordered:"",class:"hero-card q-mb-sm"},{default:n(()=>[a(h,{class:"row items-center q-col-gutter-sm"},{default:n(()=>[l[63]||(l[63]=o("div",{class:"col-12 col-md-4"},[o("div",{class:"text-subtitle2 text-grey-7"},"Panel administrativo"),o("div",{class:"text-h6 text-weight-bold"},"Mis pedidos totales")],-1)),o("div",Jl,[a(u,{modelValue:F.value,"onUpdate:modelValue":l[0]||(l[0]=e=>F.value=e),type:"date",dense:"",outlined:"",label:"Fecha"},null,8,["modelValue"])]),o("div",Yl,[a(b,{modelValue:z.value,"onUpdate:modelValue":l[1]||(l[1]=e=>z.value=e),options:sl.value,"emit-value":"","map-options":"",dense:"",outlined:"",label:"Vendedor"},null,8,["modelValue","options"])]),o("div",Zl,[a(b,{modelValue:B.value,"onUpdate:modelValue":l[2]||(l[2]=e=>B.value=e),options:gl,"emit-value":"","map-options":"",dense:"",outlined:"",label:"Estado"},null,8,["modelValue"])]),o("div",Wl,[a(U,{color:"primary",icon:"search","no-caps":"",class:"full-width",label:"Consulta",loading:Y.value,onClick:Q},null,8,["loading"])]),o("div",Xl,[a(U,{color:"warning",icon:"bolt","no-caps":"",class:"full-width text-black",label:"Emerg.",disable:K.value.length===0,loading:Z.value,onClick:ql},null,8,["disable","loading"])])]),_:1}),a(Fl),a(h,{class:"row q-col-gutter-sm items-center"},{default:n(()=>[o("div",le,[a(f,{square:"",color:"blue-8","text-color":"white",class:"full-width justify-center",icon:"receipt_long"},{default:n(()=>[c("Total: "+s(C.value.total),1)]),_:1})]),o("div",ee,[a(f,{square:"",color:"orange-8","text-color":"white",class:"full-width justify-center",icon:"edit_note"},{default:n(()=>[c("Creado: "+s(C.value.creado),1)]),_:1})]),o("div",oe,[a(f,{square:"",color:"green-8","text-color":"white",class:"full-width justify-center",icon:"send"},{default:n(()=>[c("Enviado: "+s(C.value.enviado),1)]),_:1})]),o("div",ae,[a(f,{square:"",color:"grey-8","text-color":"white",class:"full-width justify-center",icon:"outbox"},{default:n(()=>[c("No enviado: "+s(C.value.no_enviado),1)]),_:1})]),o("div",te,[a(f,{square:"",color:"indigo-8","text-color":"white",class:"full-width justify-center",icon:"payments"},{default:n(()=>[c("Total Bs: "+s(Number(C.value.monto_total||0).toFixed(2)),1)]),_:1})]),o("div",de,[a(f,{square:"",color:"blue-grey-7","text-color":"white",class:"full-width justify-center",icon:"inventory_2"},{default:n(()=>[c("Normal: "+s(C.value.tipo_normal),1)]),_:1})]),o("div",ne,[a(f,{square:"",color:"orange-7","text-color":"white",class:"full-width justify-center",icon:"egg"},{default:n(()=>[c("Pollo: "+s(C.value.tipo_pollo),1)]),_:1})]),o("div",ue,[a(f,{square:"",color:"red-7","text-color":"white",class:"full-width justify-center",icon:"set_meal"},{default:n(()=>[c("Res: "+s(C.value.tipo_res),1)]),_:1})]),o("div",se,[a(f,{square:"",color:"brown-7","text-color":"white",class:"full-width justify-center",icon:"restaurant"},{default:n(()=>[c("Cerdo: "+s(C.value.tipo_cerdo),1)]),_:1})])]),_:1})]),_:1}),a(L,{flat:"",bordered:""},{default:n(()=>[a(h,{class:"row q-col-gutter-sm items-center"},{default:n(()=>[o("div",ie,[a(u,{modelValue:X.value,"onUpdate:modelValue":l[3]||(l[3]=e=>X.value=e),dense:"",outlined:"",label:"Buscar cliente/comanda/producto",debounce:"250"},{append:n(()=>[a(j,{name:"search"})]),_:1},8,["modelValue"])]),o("div",re,[a(b,{modelValue:I.value,"onUpdate:modelValue":l[4]||(l[4]=e=>I.value=e),dense:"",outlined:"","emit-value":"","map-options":"",options:Cl,label:"Filtrar por tipo"},null,8,["modelValue"])]),o("div",ce,[a(f,{color:"indigo-7","text-color":"white"},{default:n(()=>[c("Pedidos: "+s(H.value.length),1)]),_:1})])]),_:1}),a(dl,{flat:"",dense:"","wrap-cells":""},{default:n(()=>[l[69]||(l[69]=o("thead",null,[o("tr",{class:"bg-grey-2"},[o("th",null,"Opciones"),o("th",null,"Comanda"),o("th",null,"Vendedor"),o("th",null,"Cliente"),o("th",null,"Tipo"),o("th",null,"Producto"),o("th",null,"Fec/Hora"),o("th",null,"Pago"),o("th",null,"Factura"),o("th",null,"Estado")])],-1)),o("tbody",null,[(r(!0),_(T,null,A(H.value,e=>(r(),_("tr",{key:e.id},[o("td",null,[J(e)?(r(),k(Vl,{key:0,color:"primary",label:"Opciones",dense:"","no-caps":"",size:"10px"},{default:n(()=>[V((r(),k(N,{clickable:"",onClick:m=>pl(e)},{default:n(()=>[a(g,{avatar:""},{default:n(()=>[a(j,{name:"visibility"})]),_:1}),a(g,null,{default:n(()=>l[64]||(l[64]=[c("Ver")])),_:1})]),_:2},1032,["onClick"])),[[x]]),V((r(),k(N,{clickable:"",onClick:m=>jl(e)},{default:n(()=>[a(g,{avatar:""},{default:n(()=>[a(j,{name:"edit"})]),_:1}),a(g,null,{default:n(()=>l[65]||(l[65]=[c("Editar")])),_:1})]),_:2},1032,["onClick"])),[[x]]),V((r(),k(N,{clickable:"",onClick:m=>Sl(e)},{default:n(()=>[a(g,{avatar:""},{default:n(()=>[a(j,{name:"send"})]),_:1}),a(g,null,{default:n(()=>l[66]||(l[66]=[c("Mandar")])),_:1})]),_:2},1032,["onClick"])),[[x]])]),_:2},1024)):(r(),_("div",me,[a(f,{dense:"",color:"green-7","text-color":"white"},{default:n(()=>l[67]||(l[67]=[c("Ya mandado")])),_:1}),a(U,{dense:"",flat:"",color:"primary",icon:"visibility",label:"Ver","no-caps":"",onClick:m=>pl(e)},null,8,["onClick"])]))]),o("td",null,s(e.id),1),o("td",null,s(e.user?.name||"-"),1),o("td",null,s(e.cliente?.nombre||"-"),1),o("td",null,[(r(!0),_(T,null,A(ml(e),m=>(r(),k(f,{key:`${e.id}-${m}`,dense:"","text-color":"white",color:cl(m),class:"q-mr-xs q-mb-xs"},{default:n(()=>[c(s(m),1)]),_:2},1032,["color"]))),128))]),o("td",null,[o("ul",pe,[(r(!0),_(T,null,A(e.detalles||[],m=>(r(),_("li",{key:m.id,style:{"font-size":"0.9em","border-bottom":"1px solid #eee",padding:"0"}},s(m.producto?.nombre||"Producto "+m.producto_id)+" x "+s(m.cantidad),1))),128))])]),o("td",null,s(e.fecha)+" "+s(e.hora||""),1),o("td",null,s(e.tipo_pago||"-"),1),o("td",null,s(e.facturado?"SI":"NO"),1),o("td",null,[a(f,{dense:"",color:hl(e.estado),"text-color":"white"},{default:n(()=>[c(s(e.estado),1)]),_:2},1032,["color"])])]))),128)),H.value.length===0?(r(),_("tr",ve,l[68]||(l[68]=[o("td",{colspan:"10",class:"text-center text-grey-7"},"Sin datos disponibles",-1)]))):vl("",!0)])]),_:1})]),_:1}),a(al,{modelValue:G.value,"onUpdate:modelValue":l[11]||(l[11]=e=>G.value=e),maximized:""},{default:n(()=>[a(L,null,{default:n(()=>[a(h,{class:"row items-center q-pb-none"},{default:n(()=>[o("div",_e,"Editar pedido #"+s(i.value.id),1),a(nl),V(a(U,{flat:"",round:"",dense:"",icon:"close"},null,512),[[x]])]),_:1}),a(h,{class:"q-pt-sm"},{default:n(()=>[o("div",be,[o("div",fe,[a(Il,{modelValue:i.value.tipo_pago,"onUpdate:modelValue":l[5]||(l[5]=e=>i.value.tipo_pago=e),options:Ul,type:"radio",color:"primary",inline:""},null,8,["modelValue"])]),o("div",Ve,[a(zl,{modelValue:i.value.facturado,"onUpdate:modelValue":l[6]||(l[6]=e=>i.value.facturado=e),label:"Facturado"},null,8,["modelValue"])]),o("div",ge,[a(u,{modelValue:i.value.fecha,"onUpdate:modelValue":l[7]||(l[7]=e=>i.value.fecha=e),type:"date",dense:"",outlined:"",label:"Fecha"},null,8,["modelValue"])]),o("div",Ue,[a(b,{modelValue:i.value.hora,"onUpdate:modelValue":l[8]||(l[8]=e=>i.value.hora=e),options:rl,dense:"",outlined:"","emit-value":"","map-options":"",label:"Horario"},null,8,["modelValue"])]),o("div",Ce,[a(u,{modelValue:i.value.observaciones,"onUpdate:modelValue":l[9]||(l[9]=e=>i.value.observaciones=e),dense:"",outlined:"",label:"Comentario"},null,8,["modelValue"])]),o("div",we,[a(b,{modelValue:$.value,"onUpdate:modelValue":l[10]||(l[10]=e=>$.value=e),options:q.value,"option-value":"id","option-label":"label","emit-value":"","map-options":"",dense:"",outlined:"",label:"Productos","use-input":"","input-debounce":"350",onFilter:kl},{"selected-item":n(e=>[o("div",xe,[a(tl,{rounded:"",size:"24px"},{default:n(()=>[a(ul,{src:el(e?.opt?.imagen)},null,8,["src"])]),_:2},1024),o("span",ye,s(e?.opt?.label||""),1)])]),option:n(e=>[a(N,Bl(Gl(e.itemProps)),{default:n(()=>[a(g,{avatar:""},{default:n(()=>[a(tl,{rounded:"",size:"28px"},{default:n(()=>[a(ul,{src:el(e.opt.imagen)},null,8,["src"])]),_:2},1024)]),_:2},1024),a(g,null,{default:n(()=>[a(Ml,null,{default:n(()=>[c(s(e.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]),o("div",he,[a(U,{color:"negative",class:"full-width",icon:"add",onClick:El})])]),a(dl,{dense:"",flat:"",bordered:"",class:"q-mt-sm"},{default:n(()=>[l[73]||(l[73]=o("thead",null,[o("tr",null,[o("th",null,"Detalle"),o("th",null,"Subtotal"),o("th",null,"Cantidad"),o("th",null,"Precio"),o("th",null,"Cod"),o("th",null,"Nombre"),o("th",null,"Obs")])],-1)),o("tbody",null,[(r(!0),_(T,null,A(i.value.productos,(e,m)=>(r(),_("tr",{key:`${e.producto_id}-${m}`},[o("td",null,[a(Vl,{dense:"",label:"Op("+e.tipo+")",color:cl(e.tipo),"no-caps":"",size:"10px"},{default:n(()=>[a(Kl,null,{default:n(()=>[V((r(),k(N,{clickable:"",onClick:y=>Ol(e,m)},{default:n(()=>[a(g,{avatar:""},{default:n(()=>[a(j,{name:"tune",color:"purple"})]),_:1}),a(g,null,{default:n(()=>l[70]||(l[70]=[c("Editar detalle")])),_:1})]),_:2},1032,["onClick"])),[[_l],[x]]),V((r(),k(N,{clickable:"",onClick:y=>i.value.productos.splice(m,1)},{default:n(()=>[a(g,{avatar:""},{default:n(()=>[a(j,{name:"delete",color:"negative"})]),_:1}),a(g,null,{default:n(()=>l[71]||(l[71]=[c("Eliminar producto")])),_:1})]),_:2},1032,["onClick"])),[[_l],[x]])]),_:2},1024)]),_:2},1032,["label","color"])]),o("td",null,s((Number(e.cantidad)*Number(e.precio)).toFixed(2)),1),o("td",null,[V(o("input",{"onUpdate:modelValue":y=>e.cantidad=y,type:"text",style:{width:"40px"},onInput:y=>e.cantidad=e.cantidad<1?1:e.cantidad},null,40,Oe),[[bl,e.cantidad,void 0,{number:!0}]])]),o("td",null,[V(o("input",{"onUpdate:modelValue":y=>e.precio=y,type:"text",style:{width:"50px"},onInput:y=>e.precio=e.precio<0?0:e.precio},null,40,Pe),[[bl,e.precio,void 0,{number:!0}]])]),o("td",null,s(e.codigo||e.producto_id),1),o("td",null,[o("div",ke,[a(tl,{rounded:"",size:"30px"},{default:n(()=>[a(ul,{src:el(e.imagen)},null,8,["src"])]),_:2},1024),o("div",null,s(e.nombre),1)])]),o("td",null,s(e.observacion||"-"),1)]))),128)),i.value.productos.length===0?(r(),_("tr",Ee,l[72]||(l[72]=[o("td",{colspan:"7",class:"text-grey-7"},"Sin datos disponibles",-1)]))):vl("",!0)])]),_:1}),o("div",je,"Total: "+s(wl.value.toFixed(2))+" Bs.",1)]),_:1}),a(fl,{align:"between",class:"q-pa-md"},{default:n(()=>[V(a(U,{flat:"",color:"negative",label:"Cerrar"},null,512),[[x]]),a(U,{color:"green","no-caps":"",icon:"save",label:"Guardar cambios",loading:W.value,onClick:Nl},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(al,{modelValue:M.value,"onUpdate:modelValue":l[61]||(l[61]=e=>M.value=e)},{default:n(()=>[a(L,{style:{width:"450px","max-width":"96vw"}},{default:n(()=>[a(h,{class:"row items-center q-pb-none"},{default:n(()=>[o("div",Ne,"Pedido "+s(yl.value),1),a(nl),V(a(U,{flat:"",round:"",dense:"",icon:"close"},null,512),[[x]])]),_:1}),a(h,null,{default:n(()=>[O.value==="NORMAL"?(r(),_("div",Se,[o("div",qe,[a(u,{modelValue:t.value.observacion,"onUpdate:modelValue":l[12]||(l[12]=e=>t.value.observacion=e),dense:"",outlined:"",label:"Observacion detalle"},null,8,["modelValue"])])])):O.value==="RES"?(r(),_("div",$e,[o("div",Re,[a(u,{modelValue:t.value.precio_res,"onUpdate:modelValue":l[13]||(l[13]=e=>t.value.precio_res=e),dense:"",outlined:"",label:"Precio RES"},null,8,["modelValue"])]),o("div",Qe,[a(u,{modelValue:t.value.res_trozado,"onUpdate:modelValue":l[14]||(l[14]=e=>t.value.res_trozado=e),dense:"",outlined:"",label:"Res trozado"},null,8,["modelValue"])]),o("div",De,[a(u,{modelValue:t.value.res_entero,"onUpdate:modelValue":l[15]||(l[15]=e=>t.value.res_entero=e),dense:"",outlined:"",label:"Res entero"},null,8,["modelValue"])]),o("div",Le,[a(u,{modelValue:t.value.res_pierna,"onUpdate:modelValue":l[16]||(l[16]=e=>t.value.res_pierna=e),dense:"",outlined:"",label:"Res pierna"},null,8,["modelValue"])]),o("div",Te,[a(u,{modelValue:t.value.res_brazo,"onUpdate:modelValue":l[17]||(l[17]=e=>t.value.res_brazo=e),dense:"",outlined:"",label:"Res brazo"},null,8,["modelValue"])]),o("div",Ae,[a(u,{modelValue:t.value.observacion,"onUpdate:modelValue":l[18]||(l[18]=e=>t.value.observacion=e),dense:"",outlined:"",label:"Observacion detalle"},null,8,["modelValue"])])])):O.value==="CERDO"?(r(),_("div",Fe,[o("div",Ie,[a(u,{modelValue:t.value.cerdo_precio_total,"onUpdate:modelValue":l[19]||(l[19]=e=>t.value.cerdo_precio_total=e),dense:"",outlined:"",label:"Precio total"},null,8,["modelValue"])]),o("div",ze,[a(u,{modelValue:t.value.cerdo_entero,"onUpdate:modelValue":l[20]||(l[20]=e=>t.value.cerdo_entero=e),dense:"",outlined:"",label:"Cerdo entero"},null,8,["modelValue"])]),o("div",Be,[a(u,{modelValue:t.value.cerdo_kilo,"onUpdate:modelValue":l[21]||(l[21]=e=>t.value.cerdo_kilo=e),dense:"",outlined:"",label:"Cerdo kilo"},null,8,["modelValue"])]),o("div",Ge,[a(u,{modelValue:t.value.cerdo_desmembrado,"onUpdate:modelValue":l[22]||(l[22]=e=>t.value.cerdo_desmembrado=e),dense:"",outlined:"",label:"Cerdo desmembrado"},null,8,["modelValue"])]),o("div",Me,[a(u,{modelValue:t.value.cerdo_corte,"onUpdate:modelValue":l[23]||(l[23]=e=>t.value.cerdo_corte=e),dense:"",outlined:"",label:"Cerdo corte"},null,8,["modelValue"])]),o("div",Ke,[a(u,{modelValue:t.value.observacion,"onUpdate:modelValue":l[24]||(l[24]=e=>t.value.observacion=e),dense:"",outlined:"",label:"Observacion detalle"},null,8,["modelValue"])])])):(r(),_("div",He,[o("div",Je,[a(u,{modelValue:t.value.pollo_cja_b5,"onUpdate:modelValue":l[25]||(l[25]=e=>t.value.pollo_cja_b5=e),dense:"",outlined:"",label:"Cja b5"},null,8,["modelValue"])]),o("div",Ye,[a(u,{modelValue:t.value.pollo_uni_b5,"onUpdate:modelValue":l[26]||(l[26]=e=>t.value.pollo_uni_b5=e),dense:"",outlined:"",label:"Uni b5"},null,8,["modelValue"])]),o("div",Ze,[a(u,{modelValue:t.value.pollo_cja_b6,"onUpdate:modelValue":l[27]||(l[27]=e=>t.value.pollo_cja_b6=e),dense:"",outlined:"",label:"Cja b6"},null,8,["modelValue"])]),o("div",We,[a(u,{modelValue:t.value.pollo_uni_b6,"onUpdate:modelValue":l[28]||(l[28]=e=>t.value.pollo_uni_b6=e),dense:"",outlined:"",label:"Uni b6"},null,8,["modelValue"])]),o("div",Xe,[a(u,{modelValue:t.value.pollo_cja_104,"onUpdate:modelValue":l[29]||(l[29]=e=>t.value.pollo_cja_104=e),dense:"",outlined:"",label:"Cja-104"},null,8,["modelValue"])]),o("div",lo,[a(u,{modelValue:t.value.pollo_uni_104,"onUpdate:modelValue":l[30]||(l[30]=e=>t.value.pollo_uni_104=e),dense:"",outlined:"",label:"Unid-104"},null,8,["modelValue"])]),o("div",eo,[a(u,{modelValue:t.value.pollo_cja_105,"onUpdate:modelValue":l[31]||(l[31]=e=>t.value.pollo_cja_105=e),dense:"",outlined:"",label:"Cja-105"},null,8,["modelValue"])]),o("div",oo,[a(u,{modelValue:t.value.pollo_uni_105,"onUpdate:modelValue":l[32]||(l[32]=e=>t.value.pollo_uni_105=e),dense:"",outlined:"",label:"Unid-105"},null,8,["modelValue"])]),o("div",ao,[a(u,{modelValue:t.value.pollo_cja_106,"onUpdate:modelValue":l[33]||(l[33]=e=>t.value.pollo_cja_106=e),dense:"",outlined:"",label:"Cja-106"},null,8,["modelValue"])]),o("div",to,[a(u,{modelValue:t.value.pollo_uni_106,"onUpdate:modelValue":l[34]||(l[34]=e=>t.value.pollo_uni_106=e),dense:"",outlined:"",label:"Unid-106"},null,8,["modelValue"])]),o("div",no,[a(u,{modelValue:t.value.pollo_cja_107,"onUpdate:modelValue":l[35]||(l[35]=e=>t.value.pollo_cja_107=e),dense:"",outlined:"",label:"Cja-107"},null,8,["modelValue"])]),o("div",uo,[a(u,{modelValue:t.value.pollo_uni_107,"onUpdate:modelValue":l[36]||(l[36]=e=>t.value.pollo_uni_107=e),dense:"",outlined:"",label:"Unid-107"},null,8,["modelValue"])]),o("div",so,[a(u,{modelValue:t.value.pollo_cja_108,"onUpdate:modelValue":l[37]||(l[37]=e=>t.value.pollo_cja_108=e),dense:"",outlined:"",label:"Cja-108"},null,8,["modelValue"])]),o("div",io,[a(u,{modelValue:t.value.pollo_uni_108,"onUpdate:modelValue":l[38]||(l[38]=e=>t.value.pollo_uni_108=e),dense:"",outlined:"",label:"Unid-108"},null,8,["modelValue"])]),o("div",ro,[a(u,{modelValue:t.value.pollo_cja_109,"onUpdate:modelValue":l[39]||(l[39]=e=>t.value.pollo_cja_109=e),dense:"",outlined:"",label:"Cja-109"},null,8,["modelValue"])]),o("div",co,[a(u,{modelValue:t.value.pollo_uni_109,"onUpdate:modelValue":l[40]||(l[40]=e=>t.value.pollo_uni_109=e),dense:"",outlined:"",label:"Unid-109"},null,8,["modelValue"])]),o("div",mo,[a(u,{modelValue:t.value.pollo_rango_unidades,"onUpdate:modelValue":l[41]||(l[41]=e=>t.value.pollo_rango_unidades=e),dense:"",outlined:"",label:"Rango pollo (unidades)"},null,8,["modelValue"])]),o("div",po,[a(u,{modelValue:t.value.pollo_ala,"onUpdate:modelValue":l[42]||(l[42]=e=>t.value.pollo_ala=e),dense:"",outlined:"",label:"Ala"},null,8,["modelValue"])]),o("div",vo,[a(b,{modelValue:t.value.pollo_ala_unidad,"onUpdate:modelValue":l[43]||(l[43]=e=>t.value.pollo_ala_unidad=e),options:P,dense:"",outlined:"",label:"Unidad ala"},null,8,["modelValue"])]),o("div",_o,[a(u,{modelValue:t.value.pollo_cadera,"onUpdate:modelValue":l[44]||(l[44]=e=>t.value.pollo_cadera=e),dense:"",outlined:"",label:"Cadera"},null,8,["modelValue"])]),o("div",bo,[a(b,{modelValue:t.value.pollo_cadera_unidad,"onUpdate:modelValue":l[45]||(l[45]=e=>t.value.pollo_cadera_unidad=e),options:P,dense:"",outlined:"",label:"Unidad cadera"},null,8,["modelValue"])]),o("div",fo,[a(u,{modelValue:t.value.pollo_pecho,"onUpdate:modelValue":l[46]||(l[46]=e=>t.value.pollo_pecho=e),dense:"",outlined:"",label:"Pecho"},null,8,["modelValue"])]),o("div",Vo,[a(b,{modelValue:t.value.pollo_pecho_unidad,"onUpdate:modelValue":l[47]||(l[47]=e=>t.value.pollo_pecho_unidad=e),options:P,dense:"",outlined:"",label:"Unidad pecho"},null,8,["modelValue"])]),o("div",go,[a(u,{modelValue:t.value.pollo_pi_mu,"onUpdate:modelValue":l[48]||(l[48]=e=>t.value.pollo_pi_mu=e),dense:"",outlined:"",label:"Pi/Mu"},null,8,["modelValue"])]),o("div",Uo,[a(b,{modelValue:t.value.pollo_pi_mu_unidad,"onUpdate:modelValue":l[49]||(l[49]=e=>t.value.pollo_pi_mu_unidad=e),options:P,dense:"",outlined:"",label:"Unidad pi/mu"},null,8,["modelValue"])]),o("div",Co,[a(u,{modelValue:t.value.pollo_filete,"onUpdate:modelValue":l[50]||(l[50]=e=>t.value.pollo_filete=e),dense:"",outlined:"",label:"Filete"},null,8,["modelValue"])]),o("div",wo,[a(b,{modelValue:t.value.pollo_filete_unidad,"onUpdate:modelValue":l[51]||(l[51]=e=>t.value.pollo_filete_unidad=e),options:P,dense:"",outlined:"",label:"Unidad filete"},null,8,["modelValue"])]),o("div",xo,[a(u,{modelValue:t.value.pollo_cuello,"onUpdate:modelValue":l[52]||(l[52]=e=>t.value.pollo_cuello=e),dense:"",outlined:"",label:"Cuello"},null,8,["modelValue"])]),o("div",yo,[a(b,{modelValue:t.value.pollo_cuello_unidad,"onUpdate:modelValue":l[53]||(l[53]=e=>t.value.pollo_cuello_unidad=e),options:P,dense:"",outlined:"",label:"Unidad cuello"},null,8,["modelValue"])]),o("div",ho,[a(u,{modelValue:t.value.pollo_hueso,"onUpdate:modelValue":l[54]||(l[54]=e=>t.value.pollo_hueso=e),dense:"",outlined:"",label:"Hueso"},null,8,["modelValue"])]),o("div",Oo,[a(b,{modelValue:t.value.pollo_hueso_unidad,"onUpdate:modelValue":l[55]||(l[55]=e=>t.value.pollo_hueso_unidad=e),options:P,dense:"",outlined:"",label:"Unidad hueso"},null,8,["modelValue"])]),o("div",Po,[a(u,{modelValue:t.value.pollo_menudencia,"onUpdate:modelValue":l[56]||(l[56]=e=>t.value.pollo_menudencia=e),dense:"",outlined:"",label:"Menudencia"},null,8,["modelValue"])]),o("div",ko,[a(b,{modelValue:t.value.pollo_menudencia_unidad,"onUpdate:modelValue":l[57]||(l[57]=e=>t.value.pollo_menudencia_unidad=e),options:P,dense:"",outlined:"",label:"Unidad menudencia"},null,8,["modelValue"])]),o("div",Eo,[a(u,{modelValue:t.value.pollo_bs,"onUpdate:modelValue":l[58]||(l[58]=e=>t.value.pollo_bs=e),dense:"",outlined:"",label:"BS"},null,8,["modelValue"])]),o("div",jo,[a(u,{modelValue:t.value.pollo_bs2,"onUpdate:modelValue":l[59]||(l[59]=e=>t.value.pollo_bs2=e),dense:"",outlined:"",label:"BS2"},null,8,["modelValue"])]),o("div",No,[a(u,{modelValue:t.value.observacion,"onUpdate:modelValue":l[60]||(l[60]=e=>t.value.observacion=e),dense:"",outlined:"",label:"Observacion detalle"},null,8,["modelValue"])])]))]),_:1}),a(fl,{align:"right"},{default:n(()=>[V(a(U,{flat:"",color:"negative",label:"Cerrar"},null,512),[[x]]),a(U,{color:"primary",label:"Guardar detalle",onClick:Pl})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(al,{modelValue:ll.value,"onUpdate:modelValue":l[62]||(l[62]=e=>ll.value=e)},{default:n(()=>[a(L,{style:{width:"900px","max-width":"98vw"}},{default:n(()=>[a(h,{class:"row items-center q-pb-none"},{default:n(()=>[o("div",So,"Pedido #"+s(w.value?.id),1),a(nl),V(a(U,{flat:"",round:"",dense:"",icon:"close"},null,512),[[x]])]),_:1}),a(h,{class:"q-pt-sm"},{default:n(()=>[o("div",qo,[o("div",$o,[l[74]||(l[74]=o("b",null,"Vendedor:",-1)),c(" "+s(w.value?.user?.name||"-"),1)]),o("div",Ro,[l[75]||(l[75]=o("b",null,"Cliente:",-1)),c(" "+s(w.value?.cliente?.nombre||"-"),1)]),o("div",Qo,[l[76]||(l[76]=o("b",null,"Fecha/Hora:",-1)),c(" "+s(w.value?.fecha||"-")+" "+s(w.value?.hora||"-"),1)]),o("div",Do,[l[77]||(l[77]=o("b",null,"Pago:",-1)),c(" "+s(w.value?.tipo_pago||"-"),1)]),o("div",Lo,[l[78]||(l[78]=o("b",null,"Estado:",-1)),c(" "+s(w.value?.estado||"-"),1)])]),a(dl,{dense:"",flat:"",bordered:""},{default:n(()=>[l[79]||(l[79]=o("thead",null,[o("tr",null,[o("th",null,"Codigo"),o("th",null,"Producto"),o("th",null,"Cantidad"),o("th",null,"Precio"),o("th",null,"Subtotal")])],-1)),o("tbody",null,[(r(!0),_(T,null,A(w.value?.detalles||[],e=>(r(),_("tr",{key:e.id},[o("td",null,s(e.producto?.codigo||e.producto_id),1),o("td",null,s(e.producto?.nombre||"Producto "+e.producto_id),1),o("td",null,s(Number(e.cantidad||0).toFixed(2)),1),o("td",null,s(Number(e.precio||0).toFixed(2)),1),o("td",null,s((Number(e.cantidad||0)*Number(e.precio||0)).toFixed(2)),1)]))),128))])]),_:1}),o("div",To,"Total: "+s(xl.value.toFixed(2))+" Bs.",1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},la=Ll(Ao,[["__scopeId","data-v-a776c590"]]);export{la as default};
