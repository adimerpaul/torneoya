import{_ as O,c as z,o as V,w as s,a as t,Q as k,e as _,b as i,aa as a,d as T,f as g,t as m,a3 as C,a4 as Q,a5 as I,Z as P,a2 as c,h as E,a6 as S,a1 as D,a8 as N,ad as R,ae as j,ab as p,ac as Z}from"./index-CmoW1HI-.js";import{Q as U}from"./QSelect-YWvpHr97.js";import{Q as q}from"./QPagination-CYKlUxbO.js";import{a as F,b as h}from"./QMenu-j9-YnpjT.js";import{Q as B,C as A}from"./ClosePopup-veQafRnd.js";import{Q as b}from"./QChip-B_XB_8XG.js";import{Q as W}from"./QMarkupTable-6CKuV8-r.js";import{Q as H}from"./QSpace-CghvMLQs.js";import{Q as J,a as w,b as K,c as x}from"./QTabPanels-Dg0DOsdH.js";import{Q as M}from"./QImg-BFhzNBj4.js";import{Q as G}from"./QItemLabel-BiiYZsTs.js";import{Q as X}from"./QForm-I0BS1mnk.js";import{Q as Y}from"./QPage-Dl-a7fNa.js";import{L as f}from"./leaflet-PeQDVTDL.js";import{m as $,a as ee,b as le}from"./marker-shadow-Cv-YfD74.js";import"./format-CJebrXOQ.js";import"./QResizeObserver-CGW9aATI.js";import"./touch-BjYP5sR0.js";import"./_commonjsHelpers-Bx2EM-6T.js";const y=[-17.967,-67.106];f.Icon.Default.mergeOptions({iconRetinaUrl:le,iconUrl:ee,shadowUrl:$});const oe=f.divIcon({className:"cliente-marker-wrap",html:'<div class="cliente-marker-pin"></div>',iconSize:[28,28],iconAnchor:[14,14]}),L=()=>({nombre:"",nit:"",ci:"",telefono:"",direccion:"",complemento:"",codigoTipoDocumentoIdentidad:"",email:"",id_externo:"",cod_ciudad:"",cod_nacio:"",cod_car:null,est_civ:"",edad:"",empresa:"",categoria:null,imp_pieza:null,ci_vend:"",list_blanck:!1,motivo_list_black:"",list_black:!1,tipo_paciente:"",supra_canal:"",canal:"",subcanal:"",zona:"",latitud:y[0],longitud:y[1],transporte:"",territorio:"",codcli:null,clinew:"",venta_estado:"ACTIVO",complto:"",tipodocu:null,lu:!1,ma:!1,mi:!1,ju:!1,vi:!1,sa:!1,do:!1,correcli:"",canmayni:!1,baja:!1,profecion:"",waths:!1,ctas_activo:!1,ctas_mont:null,ctas_dias:null,sexo:"",noesempre:!1,tarjeta:"",fotos:[]}),te={name:"ClientesPage",data(){return{loading:!1,filter:"",filterVendedor:null,filterZona:"",filterEstado:null,zonasOptions:[],estadoOptions:[{label:"ACTIVO",value:"ACTIVO"},{label:"INACTIVO",value:"INACTIVO"}],clientes:[],vendedores:[],dialog:!1,tab:"basico",cliente:L(),previewFotos:[],map:null,marker:null,layersControl:null,mapReady:!1,pagination:{page:1,rowsPerPage:50,rowsNumber:0}}},computed:{maxPages(){const n=Number(this.pagination.rowsNumber||0),e=Number(this.pagination.rowsPerPage||1);return Math.max(1,Math.ceil(n/e))}},mounted(){this.clientesGet(),this.vendedoresGet(),this.zonasGet()},watch:{dialog(n){if(n){this.tab==="ubicacion"&&this.$nextTick(()=>this.initMap());return}this.map&&(this.map.remove(),this.map=null,this.marker=null,this.layersControl=null)},tab(n){n==="ubicacion"&&this.dialog&&this.$nextTick(()=>this.initMap())},"cliente.latitud"(){this.syncMarkerFromModel()},"cliente.longitud"(){this.syncMarkerFromModel()}},methods:{vendedorAvatarUrl(n){const e=n?.avatar||"default.png";return`${this.$url}../images/${e}`},fotoUrl(n){return n?n.startsWith("blob:")?n:`${this.$url}../${n}`:""},async clientesGet(){this.loading=!0;try{const n=await this.$axios.get("clientes",{params:{search:this.filter,ci_vend:this.filterVendedor||"",zona:this.filterZona||"",venta_estado:this.filterEstado||"",page:this.pagination.page,per_page:this.pagination.rowsPerPage}});this.clientes=n.data.data||[],this.pagination.rowsNumber=Number(n.data.total||0)}catch(n){this.$alert.error(n.response?.data?.message||"No se pudo cargar clientes")}finally{this.loading=!1}},onFilterChange(){this.pagination.page=1,this.clientesGet()},onRowsPerPageChange(){this.pagination.page=1,this.clientesGet()},async zonasGet(){try{const n=await this.$axios.get("clientes-zonas"),e=Array.isArray(n.data)?n.data:[];this.zonasOptions=e.map(r=>({label:`${r.zona} (${r.total})`,value:r.zona}))}catch{this.zonasOptions=[]}},async vendedoresGet(){try{const n=await this.$axios.get("users"),e=Array.isArray(n.data)?n.data:[];this.vendedores=e.filter(r=>!!r?.username).map(r=>({id:r.id,name:r.name||r.username,username:r.username,avatar:r.avatar||"default.png",label:`${r.name||r.username} (@${r.username})`}))}catch{this.vendedores=[]}},nuevoCliente(){this.cliente=L(),this.previewFotos=[],this.tab="basico",this.dialog=!0,this.$nextTick(()=>this.initMap())},editarCliente(n){this.cliente={...L(),...n},this.previewFotos=[...n.fotos||[]],this.tab="basico",this.dialog=!0,this.$nextTick(()=>this.initMap())},eliminarCliente(n){this.$alert.dialog("Desea eliminar este cliente?").onOk(async()=>{this.loading=!0;try{await this.$axios.delete(`clientes/${n.id}`),this.$alert.success("Cliente eliminado"),this.clientesGet()}catch(e){this.$alert.error(e.response?.data?.message||"No se pudo eliminar")}finally{this.loading=!1}})},initMap(){if(!this.$refs.mapRef)return;const n=this.hasValidCoordinates(),e=n?Number(this.cliente.latitud):y[0],r=n?Number(this.cliente.longitud):y[1];if(!this.map){this.map=f.map(this.$refs.mapRef,{center:[e,r],zoom:n?15:13});const u=f.tileLayer("https://mt1.google.com/vt/lyrs=r&x={x}&y={y}&z={z}",{attribution:"Map data © Google",maxZoom:21}),o=f.tileLayer("https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{attribution:"Map data © Google",maxZoom:21}),d=f.tileLayer("https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",{attribution:"Map data © Google",maxZoom:21}),l=f.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors",maxZoom:19});u.addTo(this.map),this.layersControl=f.control.layers({"Google Calle":u,"Google Satelite":o,"Google Hibrido":d,OpenStreetMap:l}).addTo(this.map),this.map.on("click",v=>{this.setLatLng(v.latlng.lat,v.latlng.lng,!1)})}this.map.invalidateSize(),this.map.setView([e,r],n?15:13),this.syncMarkerFromModel(),this.mapReady=!0},hasValidCoordinates(){const n=Number(this.cliente.latitud),e=Number(this.cliente.longitud);return Number.isFinite(n)&&Number.isFinite(e)},coordsLabel(){return this.hasValidCoordinates()?`Lat: ${Number(this.cliente.latitud).toFixed(6)} | Lng: ${Number(this.cliente.longitud).toFixed(6)}`:"Sin coordenadas"},setLatLng(n,e,r=!0){this.cliente.latitud=Number(n.toFixed(7)),this.cliente.longitud=Number(e.toFixed(7)),this.syncMarkerFromModel(r)},syncMarkerFromModel(n=!1){if(!this.map)return;if(!this.hasValidCoordinates()){this.marker&&(this.map.removeLayer(this.marker),this.marker=null);return}const e=[Number(this.cliente.latitud),Number(this.cliente.longitud)];this.marker?this.marker.setLatLng(e):(this.marker=f.marker(e,{draggable:!0,icon:oe}).addTo(this.map),this.marker.on("dragend",r=>{const u=r.target.getLatLng();this.setLatLng(u.lat,u.lng,!1)})),n&&this.map.flyTo(e,Math.max(this.map.getZoom(),15))},centerMap(){!this.map||!this.hasValidCoordinates()||this.syncMarkerFromModel(!0)},goToOruro(){this.setLatLng(y[0],y[1],!0)},openGoogleMaps(){if(!this.hasValidCoordinates())return;const n=Number(this.cliente.latitud),e=Number(this.cliente.longitud);window.open(`https://www.google.com/maps/search/?api=1&query=${n},${e}`,"_blank")},useCurrentLocation(){if(!navigator.geolocation){this.$alert.error("Geolocalizacion no disponible");return}navigator.geolocation.getCurrentPosition(n=>{this.setLatLng(n.coords.latitude,n.coords.longitude,!0)},()=>this.$alert.error("No se pudo obtener ubicacion"))},onFotosChange(n){const e=Array.from(n.target.files||[]),r=this.previewFotos.length,u=Math.max(0,3-r),o=e.slice(0,u);o.forEach(l=>{l.__preview=URL.createObjectURL(l),this.previewFotos.push(l.__preview)});const d=this.cliente.fotos_files||[];this.cliente.fotos_files=[...d,...o]},removeFoto(n){const e=this.previewFotos[n];if(typeof e=="string"&&e.startsWith("blob:")){URL.revokeObjectURL(e);const r=this.cliente.fotos_files||[],u=this.previewFotos.slice(0,n).filter(o=>o.startsWith("blob:")).length;r.splice(u,1),this.cliente.fotos_files=r}else{const r=this.cliente.remove_fotos||[];r.push(e),this.cliente.remove_fotos=r}this.previewFotos.splice(n,1)},async guardarCliente(){this.loading=!0;try{const n=new FormData,e=this.cliente;["nombre","nit","ci","telefono","direccion","complemento","codigoTipoDocumentoIdentidad","email","id_externo","cod_ciudad","cod_nacio","cod_car","est_civ","edad","empresa","categoria","imp_pieza","ci_vend","list_blanck","motivo_list_black","list_black","tipo_paciente","supra_canal","canal","subcanal","zona","latitud","longitud","transporte","territorio","codcli","clinew","venta_estado","complto","tipodocu","lu","ma","mi","ju","vi","sa","do","correcli","canmayni","baja","profecion","waths","ctas_activo","ctas_mont","ctas_dias","sexo","noesempre","tarjeta"].forEach(u=>{e[u]!==void 0&&e[u]!==null&&(typeof e[u]=="boolean"?n.append(u,e[u]?"1":"0"):n.append(u,e[u]))}),(e.remove_fotos||[]).forEach((u,o)=>n.append(`remove_fotos[${o}]`,u)),(e.fotos_files||[]).forEach((u,o)=>n.append(`fotos[${o}]`,u)),e.id?(n.append("_method","PUT"),await this.$axios.post(`clientes/${e.id}`,n,{headers:{"Content-Type":"multipart/form-data"}}),this.$alert.success("Cliente actualizado")):(await this.$axios.post("clientes",n,{headers:{"Content-Type":"multipart/form-data"}}),this.$alert.success("Cliente creado")),this.dialog=!1,this.clientesGet()}catch(n){this.$alert.error(n.response?.data?.message||"No se pudo guardar cliente")}finally{this.loading=!1}}}},ie={class:"col-12 col-md-4"},ne={class:"col-12 col-md-3"},se={class:"col-12 col-md-2"},ae={class:"col-12 col-md-2"},de={class:"col-12 col-md-auto"},re={class:"col-12 col-md-auto"},ue={class:"col-auto text-caption text-grey-7"},me={class:"col-auto"},ce={class:"col"},pe={class:"row q-gutter-xs no-wrap"},ge={class:"col-auto text-caption text-grey-7"},be={class:"col"},fe={class:"text-h6"},Ve={class:"row q-col-gutter-sm"},ve={class:"col-12 col-md-4"},_e={class:"col-12 col-md-2"},he={class:"col-12 col-md-2"},ye={class:"col-12 col-md-2"},Ce={class:"col-12 col-md-2"},Ue={class:"col-12 col-md-2"},we={class:"col-12 col-md-3"},xe={class:"col-12 col-md-3"},ke={class:"col-12 col-md-6"},Me={class:"col-12 col-md-3"},ze={class:"col-12 col-md-3"},Te={class:"col-12 col-md-2"},Ne={class:"col-12 col-md-2"},Fe={class:"col-12 col-md-2"},Le={class:"col-12 col-md-2"},Qe={class:"col-12 col-md-2"},Ie={class:"col-12 col-md-2"},Pe={class:"row q-col-gutter-sm"},qe={class:"col-12 col-md-2"},Ae={class:"col-12 col-md-2"},Ge={class:"col-12 col-md-2"},Oe={class:"col-12 col-md-2"},Ee={class:"col-12 col-md-6"},Se={class:"row items-center no-wrap q-gutter-sm"},De={class:"ellipsis"},Re={class:"text-grey-7"},je={key:0,class:"col-12 col-md-6"},Ze={class:"q-ml-sm"},Be={class:"text-weight-medium"},We={class:"text-caption text-grey-7"},He={class:"col-12 col-md-2"},Je={class:"col-12 col-md-3"},Ke={class:"col-12 col-md-3"},Xe={class:"col-12 col-md-3"},Ye={class:"col-12 col-md-3"},$e={class:"col-12 col-md-3"},el={class:"col-12 col-md-3"},ll={class:"col-12 col-md-3"},ol={class:"col-12 col-md-3"},tl={class:"col-12 col-md-3"},il={class:"col-12 col-md-3"},nl={class:"row q-col-gutter-sm"},sl={class:"col-12 col-md-3"},al={class:"col-12 col-md-3"},dl={class:"col-12 col-md-3"},rl={class:"col-12 col-md-3"},ul={class:"col-12 row q-col-gutter-sm"},ml={class:"col-auto"},cl={class:"col-auto"},pl={class:"col-auto"},gl={class:"col-auto"},bl={class:"col-auto"},fl={class:"col-auto"},Vl={class:"col-auto"},vl={class:"col-12 row q-col-gutter-sm"},_l={class:"col-auto"},hl={class:"col-auto"},yl={class:"col-auto"},Cl={class:"col-auto"},Ul={class:"col-auto"},wl={class:"col-auto"},xl={class:"col-auto"},kl={class:"row q-col-gutter-sm"},Ml={class:"col-12 col-md-3"},zl={class:"col-12 col-md-3"},Tl={class:"col-12 col-md-2"},Nl={class:"col-12 col-md-2"},Fl={class:"col-12 col-md-2"},Ll={class:"col-12 col-md-6"},Ql={class:"col-12"},Il={class:"col-12"},Pl={ref:"mapRef",class:"map-canvas"},ql={class:"row q-col-gutter-sm"},Al={class:"col-12"},Gl={class:"col-12 row q-col-gutter-sm"},Ol={class:"text-right q-mt-md"};function El(n,e,r,u,o,d){return V(),z(Y,{class:"q-pa-sm"},{default:s(()=>[t(k,{flat:"",bordered:""},{default:s(()=>[t(_,{class:"row q-col-gutter-sm items-end"},{default:s(()=>[i("div",ie,[t(a,{modelValue:o.filter,"onUpdate:modelValue":[e[0]||(e[0]=l=>o.filter=l),d.onFilterChange],dense:"",outlined:"",label:"Buscar cliente",debounce:"300"},{append:s(()=>[t(T,{name:"search"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),i("div",ne,[t(U,{modelValue:o.filterVendedor,"onUpdate:modelValue":[e[1]||(e[1]=l=>o.filterVendedor=l),d.onFilterChange],options:o.vendedores,"option-label":"label","option-value":"username","emit-value":"","map-options":"",clearable:"",dense:"",outlined:"",label:"Filtrar vendedor"},null,8,["modelValue","options","onUpdate:modelValue"])]),i("div",se,[t(U,{modelValue:o.filterZona,"onUpdate:modelValue":[e[2]||(e[2]=l=>o.filterZona=l),d.onFilterChange],options:o.zonasOptions,"emit-value":"","map-options":"",clearable:"",dense:"",outlined:"",label:"Filtrar zona"},null,8,["modelValue","options","onUpdate:modelValue"])]),i("div",ae,[t(U,{modelValue:o.filterEstado,"onUpdate:modelValue":[e[3]||(e[3]=l=>o.filterEstado=l),d.onFilterChange],options:o.estadoOptions,"emit-value":"","map-options":"",clearable:"",dense:"",outlined:"",label:"Estado"},null,8,["modelValue","options","onUpdate:modelValue"])]),i("div",de,[t(g,{color:"primary",icon:"refresh","no-caps":"",label:"Actualizar",loading:o.loading,onClick:d.clientesGet},null,8,["loading","onClick"])]),i("div",re,[t(g,{color:"green",icon:"add","no-caps":"",label:"Nuevo cliente",loading:o.loading,onClick:d.nuevoCliente},null,8,["loading","onClick"])])]),_:1}),t(_,{class:"row items-center q-col-gutter-sm q-py-sm"},{default:s(()=>[i("div",ue," Total: "+m(o.pagination.rowsNumber),1),i("div",me,[t(U,{modelValue:o.pagination.rowsPerPage,"onUpdate:modelValue":[e[4]||(e[4]=l=>o.pagination.rowsPerPage=l),d.onRowsPerPageChange],options:[10,25,50,100],dense:"",outlined:"",label:"Por pagina"},null,8,["modelValue","onUpdate:modelValue"])]),i("div",ce,[t(q,{modelValue:o.pagination.page,"onUpdate:modelValue":[e[5]||(e[5]=l=>o.pagination.page=l),d.clientesGet],max:d.maxPages,"max-pages":"8","boundary-numbers":"","direction-links":""},null,8,["modelValue","max","onUpdate:modelValue"])])]),_:1}),t(_,null,{default:s(()=>[t(W,{dense:"",flat:"",bordered:"","wrap-cells":""},{default:s(()=>[e[76]||(e[76]=i("thead",null,[i("tr",null,[i("th",null,"Opciones"),i("th",null,"ID"),i("th",null,"Nombre"),i("th",null,"NIT"),i("th",null,"CI"),i("th",null,"Telefono"),i("th",null,"Vendedor"),i("th",null,"Zona"),i("th",null,"Territorio"),i("th",null,"Dias visita"),i("th",null,"Venta")])],-1)),i("tbody",null,[(V(!0),C(Q,null,I(o.clientes,l=>(V(),C("tr",{key:l.id},[i("td",null,[t(B,{label:"Opciones",dense:"",size:"10px",color:"primary","no-caps":""},{default:s(()=>[P((V(),z(F,{clickable:"",onClick:v=>d.editarCliente(l)},{default:s(()=>[t(h,{avatar:""},{default:s(()=>[t(T,{name:"edit"})]),_:1}),t(h,null,{default:s(()=>e[67]||(e[67]=[c("Editar")])),_:1})]),_:2},1032,["onClick"])),[[A]]),P((V(),z(F,{clickable:"",onClick:v=>d.eliminarCliente(l)},{default:s(()=>[t(h,{avatar:""},{default:s(()=>[t(T,{name:"delete"})]),_:1}),t(h,null,{default:s(()=>e[68]||(e[68]=[c("Eliminar")])),_:1})]),_:2},1032,["onClick"])),[[A]])]),_:2},1024)]),i("td",null,m(l.id),1),i("td",null,m(l.nombre),1),i("td",null,m(l.nit||"-"),1),i("td",null,m(l.ci),1),i("td",null,m(l.telefono),1),i("td",null,m(l.vendedor_user?.name||l.ci_vend||"-"),1),i("td",null,m(l.zona||"-"),1),i("td",null,m(l.territorio||"-"),1),i("td",null,[i("div",pe,[t(b,{size:"sm",dense:"",color:l.lu?"primary":"grey-5","text-color":"white"},{default:s(()=>e[69]||(e[69]=[c("Lu")])),_:2},1032,["color"]),t(b,{size:"sm",dense:"",color:l.ma?"primary":"grey-5","text-color":"white"},{default:s(()=>e[70]||(e[70]=[c("Ma")])),_:2},1032,["color"]),t(b,{size:"sm",dense:"",color:l.mi?"primary":"grey-5","text-color":"white"},{default:s(()=>e[71]||(e[71]=[c("Mi")])),_:2},1032,["color"]),t(b,{size:"sm",dense:"",color:l.ju?"primary":"grey-5","text-color":"white"},{default:s(()=>e[72]||(e[72]=[c("Ju")])),_:2},1032,["color"]),t(b,{size:"sm",dense:"",color:l.vi?"primary":"grey-5","text-color":"white"},{default:s(()=>e[73]||(e[73]=[c("Vi")])),_:2},1032,["color"]),t(b,{size:"sm",dense:"",color:l.sa?"primary":"grey-5","text-color":"white"},{default:s(()=>e[74]||(e[74]=[c("Sa")])),_:2},1032,["color"]),t(b,{size:"sm",dense:"",color:l.do?"primary":"grey-5","text-color":"white"},{default:s(()=>e[75]||(e[75]=[c("Do")])),_:2},1032,["color"])])]),i("td",null,[t(b,{dense:"",color:(l.venta_estado||"ACTIVO")==="ACTIVO"?"green":"orange","text-color":"white"},{default:s(()=>[c(m(l.venta_estado||"ACTIVO"),1)]),_:2},1032,["color"])])]))),128))])]),_:1})]),_:1}),t(_,{class:"row items-center q-col-gutter-sm q-pt-none"},{default:s(()=>[i("div",ge," Pagina "+m(o.pagination.page)+" de "+m(d.maxPages),1),i("div",be,[t(q,{modelValue:o.pagination.page,"onUpdate:modelValue":[e[6]||(e[6]=l=>o.pagination.page=l),d.clientesGet],max:d.maxPages,"max-pages":"8","boundary-numbers":"","direction-links":""},null,8,["modelValue","max","onUpdate:modelValue"])])]),_:1})]),_:1}),t(E,{modelValue:o.dialog,"onUpdate:modelValue":e[66]||(e[66]=l=>o.dialog=l),maximized:""},{default:s(()=>[t(k,null,{default:s(()=>[t(_,{class:"row items-center q-pb-none"},{default:s(()=>[i("div",fe,m(o.cliente.id?"Editar":"Nuevo")+" cliente",1),t(H),t(g,{flat:"",round:"",dense:"",icon:"close",onClick:e[7]||(e[7]=l=>o.dialog=!1)})]),_:1}),t(_,null,{default:s(()=>[t(X,{onSubmit:d.guardarCliente},{default:s(()=>[t(J,{modelValue:o.tab,"onUpdate:modelValue":e[8]||(e[8]=l=>o.tab=l),dense:"","active-color":"primary",align:"left",class:"text-grey-8"},{default:s(()=>[t(w,{name:"basico",label:"Basico"}),t(w,{name:"comercial",label:"Comercial"}),t(w,{name:"visita",label:"Visita"}),t(w,{name:"ubicacion",label:"Ubicacion"}),t(w,{name:"fotos",label:"Fotos"})]),_:1},8,["modelValue"]),t(S,{class:"q-my-sm"}),t(K,{modelValue:o.tab,"onUpdate:modelValue":e[64]||(e[64]=l=>o.tab=l),animated:""},{default:s(()=>[t(x,{name:"basico"},{default:s(()=>[i("div",Ve,[i("div",ve,[t(a,{modelValue:o.cliente.nombre,"onUpdate:modelValue":e[9]||(e[9]=l=>o.cliente.nombre=l),label:"Nombre",dense:"",outlined:"",rules:[l=>!!l||"Requerido"]},null,8,["modelValue","rules"])]),i("div",_e,[t(a,{modelValue:o.cliente.ci,"onUpdate:modelValue":e[10]||(e[10]=l=>o.cliente.ci=l),label:"CI",dense:"",outlined:""},null,8,["modelValue"])]),i("div",he,[t(a,{modelValue:o.cliente.nit,"onUpdate:modelValue":e[11]||(e[11]=l=>o.cliente.nit=l),label:"NIT",dense:"",outlined:""},null,8,["modelValue"])]),i("div",ye,[t(a,{modelValue:o.cliente.complemento,"onUpdate:modelValue":e[12]||(e[12]=l=>o.cliente.complemento=l),label:"Complemento",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Ce,[t(a,{modelValue:o.cliente.codigoTipoDocumentoIdentidad,"onUpdate:modelValue":e[13]||(e[13]=l=>o.cliente.codigoTipoDocumentoIdentidad=l),label:"Tipo doc",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Ue,[t(a,{modelValue:o.cliente.id_externo,"onUpdate:modelValue":e[14]||(e[14]=l=>o.cliente.id_externo=l),label:"ID externo",dense:"",outlined:""},null,8,["modelValue"])]),i("div",we,[t(a,{modelValue:o.cliente.telefono,"onUpdate:modelValue":e[15]||(e[15]=l=>o.cliente.telefono=l),label:"Telefono",dense:"",outlined:""},null,8,["modelValue"])]),i("div",xe,[t(a,{modelValue:o.cliente.email,"onUpdate:modelValue":e[16]||(e[16]=l=>o.cliente.email=l),label:"Email",dense:"",outlined:"",type:"email"},null,8,["modelValue"])]),i("div",ke,[t(a,{modelValue:o.cliente.direccion,"onUpdate:modelValue":e[17]||(e[17]=l=>o.cliente.direccion=l),label:"Direccion",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Me,[t(a,{modelValue:o.cliente.empresa,"onUpdate:modelValue":e[18]||(e[18]=l=>o.cliente.empresa=l),label:"Empresa",dense:"",outlined:""},null,8,["modelValue"])]),i("div",ze,[t(a,{modelValue:o.cliente.profecion,"onUpdate:modelValue":e[19]||(e[19]=l=>o.cliente.profecion=l),label:"Profesion",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Te,[t(a,{modelValue:o.cliente.sexo,"onUpdate:modelValue":e[20]||(e[20]=l=>o.cliente.sexo=l),label:"Sexo",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Ne,[t(a,{modelValue:o.cliente.edad,"onUpdate:modelValue":e[21]||(e[21]=l=>o.cliente.edad=l),label:"Edad",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Fe,[t(a,{modelValue:o.cliente.est_civ,"onUpdate:modelValue":e[22]||(e[22]=l=>o.cliente.est_civ=l),label:"Estado civil",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Le,[t(a,{modelValue:o.cliente.cod_ciudad,"onUpdate:modelValue":e[23]||(e[23]=l=>o.cliente.cod_ciudad=l),label:"Cod ciudad",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Qe,[t(a,{modelValue:o.cliente.cod_nacio,"onUpdate:modelValue":e[24]||(e[24]=l=>o.cliente.cod_nacio=l),label:"Cod nacio",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Ie,[t(a,{modelValue:o.cliente.tipodocu,"onUpdate:modelValue":e[25]||(e[25]=l=>o.cliente.tipodocu=l),modelModifiers:{number:!0},label:"Tipo documento",dense:"",outlined:"",type:"number"},null,8,["modelValue"])])])]),_:1}),t(x,{name:"comercial"},{default:s(()=>[i("div",Pe,[i("div",qe,[t(a,{modelValue:o.cliente.cod_car,"onUpdate:modelValue":e[26]||(e[26]=l=>o.cliente.cod_car=l),modelModifiers:{number:!0},label:"Cod car",dense:"",outlined:"",type:"number"},null,8,["modelValue"])]),i("div",Ae,[t(a,{modelValue:o.cliente.categoria,"onUpdate:modelValue":e[27]||(e[27]=l=>o.cliente.categoria=l),modelModifiers:{number:!0},label:"Categoria",dense:"",outlined:"",type:"number"},null,8,["modelValue"])]),i("div",Ge,[t(a,{modelValue:o.cliente.codcli,"onUpdate:modelValue":e[28]||(e[28]=l=>o.cliente.codcli=l),modelModifiers:{number:!0},label:"Cod cliente",dense:"",outlined:"",type:"number"},null,8,["modelValue"])]),i("div",Oe,[t(a,{modelValue:o.cliente.clinew,"onUpdate:modelValue":e[29]||(e[29]=l=>o.cliente.clinew=l),label:"Cli new",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Ee,[t(U,{modelValue:o.cliente.ci_vend,"onUpdate:modelValue":e[30]||(e[30]=l=>o.cliente.ci_vend=l),options:o.vendedores,"option-label":"label","option-value":"username","emit-value":"","map-options":"",clearable:"",dense:"",outlined:"",label:"CVENT vendedor (Usuario)"},{option:s(l=>[t(F,R(j(l.itemProps)),{default:s(()=>[t(h,{avatar:""},{default:s(()=>[t(N,{size:"28px"},{default:s(()=>[t(M,{src:d.vendedorAvatarUrl(l.opt)},null,8,["src"])]),_:2},1024)]),_:2},1024),t(h,null,{default:s(()=>[t(G,null,{default:s(()=>[c(m(l.opt?.name||"Sin nombre"),1)]),_:2},1024),t(G,{caption:""},{default:s(()=>[c("@"+m(l.opt?.username||""),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"selected-item":s(l=>[i("div",Se,[t(N,{size:"24px"},{default:s(()=>[t(M,{src:d.vendedorAvatarUrl(l.opt)},null,8,["src"])]),_:2},1024),i("div",De,[c(m(l.opt?.name||o.cliente.ci_vend)+" ",1),i("span",Re,"@"+m(l.opt?.username||o.cliente.ci_vend),1)])])]),_:1},8,["modelValue","options"])]),o.cliente.ci_vend?(V(),C("div",je,[t(k,{flat:"",bordered:"",class:"seller-card"},{default:s(()=>[t(_,{class:"row items-center q-pa-sm"},{default:s(()=>[t(N,{size:"42px"},{default:s(()=>[t(M,{src:d.vendedorAvatarUrl(o.vendedores.find(l=>l.username===o.cliente.ci_vend))},null,8,["src"])]),_:1}),i("div",Ze,[i("div",Be,m(o.vendedores.find(l=>l.username===o.cliente.ci_vend)?.name||o.cliente.ci_vend),1),i("div",We,"@"+m(o.cliente.ci_vend),1)])]),_:1})]),_:1})])):D("",!0),i("div",He,[t(a,{modelValue:o.cliente.imp_pieza,"onUpdate:modelValue":e[31]||(e[31]=l=>o.cliente.imp_pieza=l),modelModifiers:{number:!0},label:"Imp pieza",dense:"",outlined:"",type:"number",step:"0.01"},null,8,["modelValue"])]),i("div",Je,[t(a,{modelValue:o.cliente.supra_canal,"onUpdate:modelValue":e[32]||(e[32]=l=>o.cliente.supra_canal=l),label:"Supra canal",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Ke,[t(a,{modelValue:o.cliente.canal,"onUpdate:modelValue":e[33]||(e[33]=l=>o.cliente.canal=l),label:"Canal",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Xe,[t(a,{modelValue:o.cliente.subcanal,"onUpdate:modelValue":e[34]||(e[34]=l=>o.cliente.subcanal=l),label:"Subcanal",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Ye,[t(a,{modelValue:o.cliente.zona,"onUpdate:modelValue":e[35]||(e[35]=l=>o.cliente.zona=l),label:"Zona",dense:"",outlined:""},null,8,["modelValue"])]),i("div",$e,[t(a,{modelValue:o.cliente.territorio,"onUpdate:modelValue":e[36]||(e[36]=l=>o.cliente.territorio=l),label:"Territorio",dense:"",outlined:""},null,8,["modelValue"])]),i("div",el,[t(a,{modelValue:o.cliente.transporte,"onUpdate:modelValue":e[37]||(e[37]=l=>o.cliente.transporte=l),label:"Transporte",dense:"",outlined:""},null,8,["modelValue"])]),i("div",ll,[t(a,{modelValue:o.cliente.venta_estado,"onUpdate:modelValue":e[38]||(e[38]=l=>o.cliente.venta_estado=l),label:"Estado venta",dense:"",outlined:""},null,8,["modelValue"])]),i("div",ol,[t(a,{modelValue:o.cliente.complto,"onUpdate:modelValue":e[39]||(e[39]=l=>o.cliente.complto=l),label:"Completo",dense:"",outlined:""},null,8,["modelValue"])]),i("div",tl,[t(a,{modelValue:o.cliente.tarjeta,"onUpdate:modelValue":e[40]||(e[40]=l=>o.cliente.tarjeta=l),label:"Tarjeta",dense:"",outlined:""},null,8,["modelValue"])]),i("div",il,[t(a,{modelValue:o.cliente.tipo_paciente,"onUpdate:modelValue":e[41]||(e[41]=l=>o.cliente.tipo_paciente=l),label:"Tipo paciente",dense:"",outlined:""},null,8,["modelValue"])])])]),_:1}),t(x,{name:"visita"},{default:s(()=>[i("div",nl,[i("div",sl,[t(a,{modelValue:o.cliente.correcli,"onUpdate:modelValue":e[42]||(e[42]=l=>o.cliente.correcli=l),label:"Correo alterno",dense:"",outlined:""},null,8,["modelValue"])]),i("div",al,[t(a,{modelValue:o.cliente.ctas_mont,"onUpdate:modelValue":e[43]||(e[43]=l=>o.cliente.ctas_mont=l),modelModifiers:{number:!0},label:"Monto ctas",dense:"",outlined:"",type:"number",step:"0.01"},null,8,["modelValue"])]),i("div",dl,[t(a,{modelValue:o.cliente.ctas_dias,"onUpdate:modelValue":e[44]||(e[44]=l=>o.cliente.ctas_dias=l),modelModifiers:{number:!0},label:"Dias ctas",dense:"",outlined:"",type:"number"},null,8,["modelValue"])]),i("div",rl,[t(a,{modelValue:o.cliente.motivo_list_black,"onUpdate:modelValue":e[45]||(e[45]=l=>o.cliente.motivo_list_black=l),label:"Motivo lista negra",dense:"",outlined:""},null,8,["modelValue"])]),e[77]||(e[77]=i("div",{class:"col-12 q-mt-sm text-subtitle2"},"Dias de visita",-1)),i("div",ul,[i("div",ml,[t(p,{modelValue:o.cliente.lu,"onUpdate:modelValue":e[46]||(e[46]=l=>o.cliente.lu=l),label:"Lun"},null,8,["modelValue"])]),i("div",cl,[t(p,{modelValue:o.cliente.ma,"onUpdate:modelValue":e[47]||(e[47]=l=>o.cliente.ma=l),label:"Mar"},null,8,["modelValue"])]),i("div",pl,[t(p,{modelValue:o.cliente.mi,"onUpdate:modelValue":e[48]||(e[48]=l=>o.cliente.mi=l),label:"Mie"},null,8,["modelValue"])]),i("div",gl,[t(p,{modelValue:o.cliente.ju,"onUpdate:modelValue":e[49]||(e[49]=l=>o.cliente.ju=l),label:"Jue"},null,8,["modelValue"])]),i("div",bl,[t(p,{modelValue:o.cliente.vi,"onUpdate:modelValue":e[50]||(e[50]=l=>o.cliente.vi=l),label:"Vie"},null,8,["modelValue"])]),i("div",fl,[t(p,{modelValue:o.cliente.sa,"onUpdate:modelValue":e[51]||(e[51]=l=>o.cliente.sa=l),label:"Sab"},null,8,["modelValue"])]),i("div",Vl,[t(p,{modelValue:o.cliente.do,"onUpdate:modelValue":e[52]||(e[52]=l=>o.cliente.do=l),label:"Dom"},null,8,["modelValue"])])]),e[78]||(e[78]=i("div",{class:"col-12 q-mt-sm text-subtitle2"},"Estados / Flags",-1)),i("div",vl,[i("div",_l,[t(p,{modelValue:o.cliente.list_black,"onUpdate:modelValue":e[53]||(e[53]=l=>o.cliente.list_black=l),label:"Lista negra"},null,8,["modelValue"])]),i("div",hl,[t(p,{modelValue:o.cliente.list_blanck,"onUpdate:modelValue":e[54]||(e[54]=l=>o.cliente.list_blanck=l),label:"Lista blanca"},null,8,["modelValue"])]),i("div",yl,[t(p,{modelValue:o.cliente.canmayni,"onUpdate:modelValue":e[55]||(e[55]=l=>o.cliente.canmayni=l),label:"Can mayni"},null,8,["modelValue"])]),i("div",Cl,[t(p,{modelValue:o.cliente.baja,"onUpdate:modelValue":e[56]||(e[56]=l=>o.cliente.baja=l),label:"Baja"},null,8,["modelValue"])]),i("div",Ul,[t(p,{modelValue:o.cliente.waths,"onUpdate:modelValue":e[57]||(e[57]=l=>o.cliente.waths=l),label:"WhatsApp"},null,8,["modelValue"])]),i("div",wl,[t(p,{modelValue:o.cliente.ctas_activo,"onUpdate:modelValue":e[58]||(e[58]=l=>o.cliente.ctas_activo=l),label:"Ctas activo"},null,8,["modelValue"])]),i("div",xl,[t(p,{modelValue:o.cliente.noesempre,"onUpdate:modelValue":e[59]||(e[59]=l=>o.cliente.noesempre=l),label:"No es empresa"},null,8,["modelValue"])])])])]),_:1}),t(x,{name:"ubicacion"},{default:s(()=>[i("div",kl,[i("div",Ml,[t(a,{modelValue:o.cliente.latitud,"onUpdate:modelValue":e[60]||(e[60]=l=>o.cliente.latitud=l),modelModifiers:{number:!0},label:"Latitud",dense:"",outlined:"",type:"number",step:"0.0000001"},null,8,["modelValue"])]),i("div",zl,[t(a,{modelValue:o.cliente.longitud,"onUpdate:modelValue":e[61]||(e[61]=l=>o.cliente.longitud=l),modelModifiers:{number:!0},label:"Longitud",dense:"",outlined:"",type:"number",step:"0.0000001"},null,8,["modelValue"])]),i("div",Tl,[t(g,{color:"primary","no-caps":"",label:"Centrar",class:"full-width",onClick:d.centerMap},null,8,["onClick"])]),i("div",Nl,[t(g,{color:"secondary","no-caps":"",label:"Mi ubicacion",class:"full-width",onClick:d.useCurrentLocation},null,8,["onClick"])]),i("div",Fl,[t(g,{color:"teal","no-caps":"",label:"Oruro centro",class:"full-width",onClick:d.goToOruro},null,8,["onClick"])]),i("div",Ll,[t(g,{color:"info","no-caps":"",icon:"open_in_new",label:"Abrir en Google Maps",class:"full-width",disable:!d.hasValidCoordinates(),onClick:d.openGoogleMaps},null,8,["disable","onClick"])]),i("div",Ql,[t(b,{outline:"",color:"primary",icon:"place"},{default:s(()=>[c(m(d.coordsLabel()),1)]),_:1})]),i("div",Il,[i("div",Pl,null,512),e[79]||(e[79]=i("div",{class:"text-caption q-mt-xs"},"Click en el mapa o arrastra el marcador para actualizar coordenadas.",-1))])])]),_:1}),t(x,{name:"fotos"},{default:s(()=>[i("div",ql,[i("div",Al,[t(g,{color:"primary","no-caps":"",icon:"photo_camera",label:"Agregar fotos (max. 3)",onClick:e[62]||(e[62]=l=>n.$refs.fotosInput.click())}),i("input",{ref:"fotosInput",type:"file",accept:"image/*",multiple:"",style:{display:"none"},onChange:e[63]||(e[63]=(...l)=>d.onFotosChange&&d.onFotosChange(...l))},null,544)]),e[80]||(e[80]=i("div",{class:"col-12 text-caption"},"Puedes cargar hasta 3 fotos del lugar.",-1)),i("div",Gl,[(V(!0),C(Q,null,I(o.previewFotos,(l,v)=>(V(),C("div",{class:"col-6 col-md-3",key:v},[t(k,{flat:"",bordered:""},{default:s(()=>[t(M,{src:d.fotoUrl(l),style:{height:"130px"},fit:"cover"},null,8,["src"]),t(Z,{align:"right"},{default:s(()=>[t(g,{flat:"",dense:"",color:"negative",icon:"delete",onClick:Sl=>d.removeFoto(v)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))])])]),_:1})]),_:1},8,["modelValue"]),i("div",Ol,[t(g,{flat:"","no-caps":"",label:"Cancelar",color:"grey-8",onClick:e[65]||(e[65]=l=>o.dialog=!1),loading:o.loading},null,8,["loading"]),t(g,{color:"primary","no-caps":"",label:"Guardar",type:"submit",class:"q-ml-sm",loading:o.loading},null,8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const ao=O(te,[["render",El],["__scopeId","data-v-92b62711"]]);export{ao as default};
